import{L as T,u as K,r as x,O as N,o as t,c as v,w as o,a as s,g as $,i as C,f as n,I as g,A as m,b as r,G as A,P as S,Q as h,e as d,J as P,N as j,d as F,a1 as k,a0 as R,H as y,C as f,K as z}from"./app-210ffff2.js";import{u as H}from"./industry-ac15bd6a.js";const L={class:"v-col-12"},E={key:2,class:"v-col-12 v-col-md-6 py-0"},G={key:3,class:"v-col-12 py-0"},J={key:4,class:"v-col-12 py-0"},M={key:5,class:"v-col-12 py-0"},Q={class:"v-col-12 py-0"},q={class:"v-col-12 d-flex justify-end"},Y={__name:"CustomKpiDialog",props:{kpiOptions:{type:Object,default:null},isHr:{type:Boolean,default:!1}},emits:["save","approve"],setup(I,{emit:_}){const U=I;T();const B=K(),e=x({title:"",data:{},dialog:!1,loading:!1,type:"",action:"",is_review:!1}),V=H(),c=x(!1),w=()=>{V.industries.length==0&&(c.value=!0,V.getIndustries(B.authToken).then(()=>{c.value=!1}))},D=()=>{e.value.loading=!0,_("save",e.value.data)},O=()=>{e.value.loading=!0,_("approve",e.value.data)};N(()=>U.kpiOptions,p=>{w(),e.value=Object.assign({},p)});const i=p=>p.includes(e.value.type)==!0;return(p,l)=>(t(),v(z,{modelValue:e.value.dialog,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.dialog=a),width:"100%","max-width":e.value.type=="ecd"?600:900,persistent:""},{default:o(()=>[s($,{class:"rounded-lg"},{default:o(()=>[s(C,{class:"ma-0 pa-0"},{default:o(()=>[n("div",{class:g(`v-col-12 ${e.value.is_review==!0?"v-col-md-8":""} px-4`)},[s(C,null,{default:o(()=>[n("div",L,m(e.value.title)+" "+m(),1),i(["ecd","kpi"])?(t(),r("div",{key:0,class:g(`v-col-12 ${e.value.type=="ecd"?"v-col-md-12":"v-col-md-6"}  py-0`)},[s(A,{modelValue:e.value.data.title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.data.title=a),variant:"outlined",density:"compact",label:"Title*"},{selection:o(({props:a,item:u})=>{var b;return[n("span",S(h(a)),m(((b=u==null?void 0:u.raw)==null?void 0:b.title.substring(0,35))+"..."),17)]}),_:1},8,["modelValue"])],2)):d("",!0),i(["ecd"])?(t(),r("div",{key:1,class:g(`v-col-12 ${e.value.type=="ecd"?"v-col-md-12":"v-col-md-6"}  py-0`)},[s(P,{modelValue:e.value.data.ecd_type,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.data.ecd_type=a),items:["tech","soft","both"],variant:"outlined",density:"compact",class:"bg-white","hide-details":"",label:"Select Type"},null,8,["modelValue"])],2)):d("",!0),i(["kpi"])?(t(),r("div",E,[s(j,{modelValue:e.value.data.industry_id,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.data.industry_id=a),items:F(V).active_industries,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",class:"bg-white","hide-details":"",label:c.value?"Loading...":"Select Industry",loading:c.value,onFocus:w},{selection:o(({props:a,item:u})=>[n("span",S(h(a)),m(u.raw.title&&u.raw.title.length>30?u.raw.title.substring(0,30)+"...":u.raw.title),17)]),_:1},8,["modelValue","items","label","loading"])])):d("",!0),i(["kpi"])?(t(),r("div",G,[s(k,{modelValue:e.value.data.definition,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.data.definition=a),label:"KPI Definition*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):d("",!0),i(["kpi"])?(t(),r("div",J,[s(k,{modelValue:e.value.data.formula,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.data.formula=a),label:"Calculation Formula*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):d("",!0),i(["kpi"])?(t(),r("div",M,[s(k,{modelValue:e.value.data.subordinate_measures,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.data.subordinate_measures=a),label:"Subordinate Measures*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):d("",!0),n("div",Q,[s(R,{class:"mx-auto"})]),n("div",q,[e.value.action=="view"?(t(),v(y,{key:0,color:"primary",onClick:l[6]||(l[6]=a=>e.value.dialog=!1)},{default:o(()=>[f("Close")]),_:1})):d("",!0),["edit","add","approve"].includes(e.value.action)==!0?(t(),v(y,{key:1,color:"primary",variant:"text",onClick:l[7]||(l[7]=a=>e.value.dialog=!1)},{default:o(()=>[f("Cancel")]),_:1})):d("",!0),["edit","add"].includes(e.value.action)==!0&&e.value.data.title&&(i(["kpi"])&&e.value.data.industry_id||i(["ecd"])&&e.value.data.ecd_type)?(t(),v(y,{key:2,color:"secondary",class:"ml-2 px-8",onClick:D,loading:e.value.loading},{default:o(()=>[f("save")]),_:1},8,["loading"])):d("",!0),e.value.action=="approve"?(t(),v(y,{key:3,color:"secondary",class:"ml-2 px-8",loading:e.value.loading,onClick:O},{default:o(()=>[f("Approve")]),_:1},8,["loading"])):d("",!0)])]),_:1})],2)]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"]))}};export{Y as _};
