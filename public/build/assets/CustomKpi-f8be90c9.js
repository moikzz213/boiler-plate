import{u as M,r as i,z as A,K as L,N as S,o as v,b as x,a as l,w as r,B as D,H as I,X as C,d as P,a2 as F,f as s,F as U,n as q,A as T,c as k,g as V,h as H,C as z,e as w,Q,V as ee,i as ae}from"./app-6bac03f7.js";import{c as K}from"./clientApi-7db5a976.js";import{c as X,e as G,f as J}from"./mdi-a0a77bee.js";import{_ as W}from"./CustomKpiDialog-f70317d9.js";import{_ as Y}from"./ConfirmDialog-ec550284.js";import{_ as Z}from"./SnackBar-a670d79f.js";import"./industry-926dd76e.js";const te={class:"v-col-12"},le=s("div",{class:"text-primary text-capitalize"},"KPI List",-1),se=s("thead",null,[s("tr",null,[s("th",{class:"text-left text-capitalize"},"Title"),s("th",{class:"text-left text-capitalize"},"Industry"),s("th",{class:"text-right text-capitalize"},"Actions")])],-1),oe={class:"d-flex align-center justify-end"},ne={__name:"ManagerKpi",setup(B){const c=M(),d=i({}),p=A(),m=L(),t=i({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),g=i({data:{},loading:!1,dialog:!1}),f=i([]),_=i(!1),y=i(0),n=i(1);n.value=m.params&&m.params.page?m.params.page:1;const h=async a=>{_.value=!0,await K(c.authToken).get("/api/manager/custom/kpi/list/"+c.authProfile.ecode+"/?page="+a).then(e=>{y.value=e.data.last_page,n.value=e.data.current_page,f.value=e.data.data,_.value=!1}).catch(e=>{console.log("getCustomKpi",e.response),_.value=!1})};h(n.value);const $=()=>{t.value={...t.value,title:"Add New KPI ",data:{},dialog:!0,loading:!1,type:"kpi",action:"add",is_review:!1}},O=a=>{t.value={...t.value,title:"Edit KPI ",data:Object.assign({},a),loading:!1,dialog:!0,type:"kpi",action:"edit",is_review:!1}},E=async a=>{let e=Object.assign({},a);t.value.action=="add"&&(e.profile_ecode=c.authProfile.ecode),e.type=m.params.type,await K(c.authToken).post("/api/manager/my-custom-kpi/save",e).then(o=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:o.data.message},t.value={...t.value,dialog:!1,loading:!1}})}).catch(o=>{d.value={status:!0,type:"error",text:"Error while saving Custom KPI"},t.value={...t.value,loading:!1}})};S(n,(a,e)=>{a!=e&&(p.push({name:"PaginatedManagerCustomKPI",params:{page:n.value}}).catch(o=>{}),h(n.value))});const u=i({}),b=i({}),R=a=>{b.value=Object.assign({},a),u.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+a.title+".",btnColor:"error",btnTitle:"Confirm"}},N=async()=>{await K(c.authToken).post("/api/manager/my-custom-kpi/remove/"+b.value.id).then(a=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:a.data.message}})}).catch(a=>{d.value={status:!0,type:"error",text:"Error while removing data"}})},j=a=>{u.value={...u.value,loading:!0},N().then(e=>{u.value={...u.value,dialog:!1,loading:!1}}).catch(e=>{u.value={...u.value,loading:!1}})};return(a,e)=>(v(),x("div",te,[l(V,{class:"mb-3 rounded-lg",loading:_.value},{default:r(()=>[l(D,{class:"d-flex align-center"},{default:r(()=>[l(I,{size:"small",icon:"",onClick:$,color:"white",loading:g.value.loading,class:"text-capitalize mr-3"},{default:r(()=>[l(C,{icon:P(X)},null,8,["icon"])]),_:1},8,["loading"]),le]),_:1}),l(F,null,{default:r(()=>[se,s("tbody",null,[(v(!0),x(U,null,q(f.value,o=>(v(),x("tr",{key:o.id},[s("td",null,T(o.title),1),s("td",null,T(o.industry&&o.industry.title),1),s("td",null,[s("div",oe,[l(C,{size:"small",onClick:()=>O(o),icon:P(G),class:"mx-1"},null,8,["onClick","icon"]),l(C,{size:"small",onClick:()=>R(o),icon:P(J),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),f.value&&f.value.length==0?(v(),k(V,{key:0},{default:r(()=>[l(H,{class:"text-center"},{default:r(()=>[z(" No records found ")]),_:1})]),_:1})):w("",!0)]),_:1},8,["loading"]),y.value>1?(v(),k(Q,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):w("",!0),l(W,{"kpi-options":t.value,onSave:E},null,8,["kpi-options"]),l(Y,{options:u.value,onConfirm:j},null,8,["options"]),l(Z,{options:d.value},null,8,["options"])]))}},ie={class:"v-col-12"},ue=s("div",{class:"text-primary text-capitalize"},"ECD List",-1),re=s("thead",null,[s("tr",null,[s("th",{class:"text-left text-capitalize"},"Title"),s("th",{class:"text-left text-capitalize"},"ECD Type"),s("th",{class:"text-right text-capitalize"},"Actions")])],-1),ce={class:"d-flex align-center justify-end"},de={__name:"ManagerEcd",setup(B){const c=M(),d=i({}),p=A(),m=L(),t=i({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),g=i({data:{},loading:!1,dialog:!1}),f=i([]),_=i(!1),y=i(0),n=i(1);n.value=m.params&&m.params.page?m.params.page:1;const h=async a=>{_.value=!0,await K(c.authToken).get("/api/manager/custom/ecd/list/"+c.authProfile.ecode+"/?page="+a).then(e=>{y.value=e.data.last_page,n.value=e.data.current_page,f.value=e.data.data,_.value=!1}).catch(e=>{console.log("getCustomKpi",e),_.value=!1})};h(n.value);const $=()=>{t.value={...t.value,title:"Add New KPI ",data:{},dialog:!0,loading:!1,type:"ecd",action:"add",is_review:!1}},O=a=>{t.value={...t.value,title:"Edit KPI ",data:Object.assign({},a),loading:!1,dialog:!0,type:"ecd",action:"edit",is_review:!1}},E=async a=>{let e=Object.assign({},a);t.value.action=="add"&&(e.profile_ecode=c.authProfile.ecode),e.type=m.params.type,await K(c.authToken).post("/api/manager/my-custom-kpi/save",e).then(o=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:o.data.message},t.value={...t.value,dialog:!1,loading:!1}})}).catch(o=>{d.value={status:!0,type:"error",text:"Error while saving Custom KPI"},t.value={...t.value,loading:!1}})};S(n,(a,e)=>{a!=e&&(p.push({name:"PaginatedManagerCustomKPI",params:{page:n.value}}).catch(o=>{}),h(n.value))});const u=i({}),b=i({}),R=a=>{b.value=Object.assign({},a),u.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+a.title+".",btnColor:"error",btnTitle:"Confirm"}},N=async()=>{await K(c.authToken).post("/api/manager/my-custom-kpi/remove/"+b.value.id).then(a=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:a.data.message}})}).catch(a=>{d.value={status:!0,type:"error",text:"Error while removing data"}})},j=a=>{u.value={...u.value,loading:!0},N().then(e=>{u.value={...u.value,dialog:!1,loading:!1}}).catch(e=>{u.value={...u.value,loading:!1}})};return(a,e)=>(v(),x("div",ie,[l(V,{class:"mb-3 rounded-lg",loading:_.value},{default:r(()=>[l(D,{class:"d-flex align-center"},{default:r(()=>[l(I,{size:"small",icon:"",onClick:$,color:"white",loading:g.value.loading,class:"text-capitalize mr-3"},{default:r(()=>[l(C,{icon:P(X)},null,8,["icon"])]),_:1},8,["loading"]),ue]),_:1}),l(F,null,{default:r(()=>[re,s("tbody",null,[(v(!0),x(U,null,q(f.value,o=>(v(),x("tr",{key:o.id},[s("td",null,T(o.title),1),s("td",null,T(o.ecd_type),1),s("td",null,[s("div",ce,[l(C,{size:"small",onClick:()=>O(o),icon:P(G),class:"mx-1"},null,8,["onClick","icon"]),l(C,{size:"small",onClick:()=>R(o),icon:P(J),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),f.value&&f.value.length==0?(v(),k(V,{key:0},{default:r(()=>[l(H,{class:"text-center"},{default:r(()=>[z(" No records found ")]),_:1})]),_:1})):w("",!0)]),_:1},8,["loading"]),y.value>1?(v(),k(Q,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):w("",!0),l(W,{"kpi-options":t.value,onSave:E},null,8,["kpi-options"]),l(Y,{options:u.value,onConfirm:j},null,8,["options"]),l(Z,{options:d.value},null,8,["options"])]))}},pe=s("div",{class:"v-col-12 pb-0"},[s("div",{class:"text-h6"},"My Custom KPI")],-1),ve={class:"v-col-12 pb-0"},xe={__name:"CustomKpi",setup(B){const c=A(),d=L(),p=i(d.params.type),m=t=>{console.log("selectType",t),p.value!==t&&(console.log("selectType not equal",t),p.value=t,c.push({name:"ManagerCustomKPI",params:{type:p.value}}).catch(g=>{}))};return(t,g)=>(v(),k(ee,{class:"pb-16"},{default:r(()=>[l(ae,{class:"my-5"},{default:r(()=>[pe,s("div",ve,[l(I,{size:"x-large",color:`${p.value=="kpi"?"primary":""}`,readonly:`${p.value=="kpi"}`,class:"px-12 mr-3",onClick:g[0]||(g[0]=()=>m("kpi"))},{default:r(()=>[z(" KPI ")]),_:1},8,["color","readonly"]),l(I,{size:"x-large",color:`${p.value=="ecd"?"primary":""}`,readonly:`${p.value=="ecd"}`,class:"px-12",onClick:g[1]||(g[1]=()=>m("ecd"))},{default:r(()=>[z(" ECD ")]),_:1},8,["color","readonly"])]),p.value=="kpi"?(v(),k(ne,{key:0})):w("",!0),p.value=="ecd"?(v(),k(de,{key:1})):w("",!0)]),_:1})]),_:1}))}};export{xe as default};
