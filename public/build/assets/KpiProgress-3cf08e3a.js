import{k as R,L as v,r as m,N as j,o as p,c as b,w as _,b as f,F as y,n as w,f as h,Y as P,A as I,aj as D,C,i as E}from"./app-d2fb1262.js";const B={class:"d-flex justify-center"},T={__name:"KpiProgress",props:{selectedEmployee:{type:Object,default:null},density:{type:String,default:""}},setup(k){const d=k,g=R(),u=v(()=>{let t=[{state:"setting",title:"KPI & Annual Target Setting",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"inreview",title:"In Review"},{status:"submitted",title:"Submitted"}]},{state:"midyear",title:"Mid Year Review & Revised Target Setting",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]},{state:"yearend",title:"Year End Review and Submission",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]}],e=[{state:"setting",title:"KPI & Probation Target Setting",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]},{state:"first_review",title:"First Probation Review",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]},{state:"final_review",title:"Final Probation Review",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]}];return n.value&&n.value.is_regular?t:e}),S=m(new Date),x=(t,e,i)=>{let s=0;if(t&&t.reviews&&t.reviews.length>0){let r=t.reviews[0].state,o=t.reviews[0].status,l=u.value.findIndex(a=>a.state==r);if(e<l)return"bg-grey-darken-1";if(e==l){if(s=u.value[e].status.findIndex(a=>a.status==o),s==i)return"bg-secondary text-white";if(i<s)return"bg-grey-darken-1"}}else if(t&&t.length>0){let r=t[0].profile;if(r&&r.is_regular==0){let o=u.value.findIndex(a=>a.state=="setting"),l=new Date(r.doj);if(l.setDate(l.getDate()+parseInt(t[0].probation_setting_allow_days)),l>=S.value&&e==o&&(s=u.value[e].status.findIndex(a=>a.status=="open"),s==i))return"bg-secondary text-white"}else{let o=t[0].state,l=t[0].status,a=u.value.findIndex(c=>c.state==o);if(e<a)return"bg-grey-darken-1";if(e==a){if(s=u.value[e].status.findIndex(c=>c.status==l),s==i)return"bg-secondary text-white";if(i<s)return"bg-grey-darken-1"}}}return""},n=m(d.selectedEmployee),O=v(()=>n.value==null||!n.value.reviews||n.value.reviews.length==0?[{state:g.pms_settings?g.pms_settings.state:null,status:g.pms_settings?g.pms_settings.status:null,probation_setting_allow_days:g.pms_settings?g.pms_settings.probation_kpi_setting:null,profile:n.value}]:n.value);return j(()=>d.selectedEmployee,t=>{n.value=Object.assign({},t)}),(t,e)=>(p(),b(E,{class:""},{default:_(()=>[(p(!0),f(y,null,w(u.value,(i,s)=>(p(),f("div",{key:i.title,class:"v-col-12 v-col-md-4"},[h("div",{class:P(`${d.density=="compact"?"text-caption":"text-body-1"} mb-1 text-center d-flex align-center justify-center`),style:{"line-height":"1.2em",height:"30px"}},I(i.title),3),h("div",B,[(p(!0),f(y,null,w(i.status,(r,o)=>(p(),b(D,{style:{margin:"0 1px"},key:r.status,size:`${d.density=="compact"?"x-small":"small"}`,class:P(`${x(O.value,s,o)}`)},{default:_(()=>[C(I(r.title),1)]),_:2},1032,["size","class"]))),128))])]))),128))]),_:1}))}};export{T as default};
