import{u as B,z as A,K as F,r as u,N as H,o as f,b as _,a,w as c,B as L,H as w,X as k,d as x,a2 as U,F as q,n as Q,f as o,A as V,e as C,c as T,g as z,h as X,C as $,Q as G,V as le,q as S,v as j,i as se}from"./app-66d8faed.js";import{_ as oe}from"./PageHeader-b906c207.js";import{c as J,f as W,g as Y}from"./mdi-7fd0807e.js";import{c as b}from"./clientApi-092f06c6.js";import{_ as Z}from"./ConfirmDialog-51ca545f.js";import{_ as ee}from"./SnackBar-08010ad7.js";import{_ as te}from"./CustomKpiDialog-c880e39f.js";import{_ as ae}from"./ImportData-bef88f28.js";import"./industry-6eeb5b4e.js";import"./_commonjsHelpers-042e6b4d.js";const ie={class:"v-col-12"},ne=o("div",{class:"text-primary text-capitalize"},"KPI Master List",-1),re=o("thead",null,[o("tr",null,[o("th",{class:"text-left text-capitalize"},"Title"),o("th",{class:"text-left text-capitalize"},"Industry"),o("th",{class:"text-right text-capitalize"},"Actions")])],-1),ue={key:0},ce={class:"d-flex align-center justify-end"},de={__name:"KpiMaster",setup(N){const d=B(),p=A(),g=F(),i=u({}),v=u({btnTitle:"Import KPI",cardTitle:"Import KPI",endpoint:"/api/import/kpi",templateFile:"import-template-kpi.csv",conditionArray:["industry"]}),I=e=>{e.status==!0?h(1).then(()=>{i.value={status:!0,type:"success",text:e.message},v.value={...v.value,loading:!1,dialog:!1}}):i.value={status:!0,type:"error",text:e.message}},m=u([]),l=u({title:"",data:{},loading:!1,dialog:!1,type:"kpi",action:"view"}),y=u(0),s=u(1);s.value=g.params&&g.params.page?g.params.page:1;const h=async e=>{await b(d.authToken).get("/api/hr/kpi/type/kpi?page="+e).then(t=>{y.value=t.data.last_page,s.value=t.data.current_page,m.value=t.data.data}).catch(t=>{console.log("kpis",t)})};h(s.value);const K=()=>{l.value={...l.value,title:"Add KPI",data:{},dialog:!0,action:"add"}},R=e=>{l.value={...l.value,title:e.title,data:Object.assign({},e),dialog:!0,action:"edit"}};H(s,(e,t)=>{e!=t&&(p.push({name:"PaginatedHrMasterKpi",params:{page:s.value}}).catch(n=>{}),h(s.value))});const E=async()=>{l.value.data.type=g.params.type,l.value.data.profile_id=d.authProfile.id,await b(d.authToken).post("/api/hr/master-kpi/save",l.value.data).then(e=>{h(s.value).then(()=>{i.value={status:!0,type:"success",text:e.data.message},l.value={...l.value,dialog:!1,loading:!1}})}).catch(e=>{i.value={status:!0,type:"error",text:"Error while trying to save KPI"},l.value={...l.value,dialog:!1,loading:!1}})},r=u({}),P=u({}),M=e=>{P.value=Object.assign({},e),r.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+e.title+".",btnColor:"error",btnTitle:"Confirm"}},D=async()=>{let e={profile_id:d.authProfile.id};await b(d.authToken).post("/api/hr/kpi/remove/"+P.value.id,e).then(t=>{h(s.value).then(()=>{i.value={status:!0,type:"success",text:t.data.message}})}).catch(t=>{i.value={status:!0,type:"error",text:"Error while removing data"}})},O=e=>{r.value={...r.value,loading:!0},D().then(t=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(t=>{r.value={...r.value,loading:!1}})};return(e,t)=>(f(),_("div",ie,[a(ae,{options:v.value,onImported:I,class:"mb-3"},null,8,["options"]),a(z,{class:"rounded-lg"},{default:c(()=>[a(L,{class:"d-flex align-center"},{default:c(()=>[a(w,{onClick:K,density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:c(()=>[a(k,{size:"small",icon:x(J)},null,8,["icon"])]),_:1}),ne]),_:1}),a(U,null,{default:c(()=>[re,m.value&&m.value.length>0?(f(),_("tbody",ue,[(f(!0),_(q,null,Q(m.value,n=>(f(),_("tr",{key:n.id},[o("td",null,V(n.title),1),o("td",null,V(n.industry&&n.industry.title),1),o("td",null,[o("div",ce,[a(k,{size:"small",onClick:()=>R(n),icon:x(W),class:"mx-1"},null,8,["onClick","icon"]),a(k,{size:"small",onClick:()=>M(n),icon:x(Y),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])):C("",!0)]),_:1}),m.value&&m.value.length==0?(f(),T(z,{key:0},{default:c(()=>[a(X,{class:"text-center"},{default:c(()=>[$(" No records found ")]),_:1})]),_:1})):C("",!0)]),_:1}),y.value>1?(f(),T(G,{key:0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):C("",!0),a(te,{"kpi-options":l.value,"is-hr":!0,onSave:E},null,8,["kpi-options"]),a(Z,{options:r.value,onConfirm:O},null,8,["options"]),a(ee,{options:i.value},null,8,["options"])]))}},pe={class:"v-col-12"},ve=o("div",{class:"text-primary text-capitalize"},"ECD Master List",-1),me=o("thead",null,[o("tr",null,[o("th",{class:"text-left text-capitalize"},"Title"),o("th",{class:"text-left text-capitalize"},"ECD Type"),o("th",{class:"text-right text-capitalize"},"Actions")])],-1),fe={key:0},ge={class:"d-flex align-center justify-end"},he={__name:"EcdMaster",setup(N){const d=B(),p=A(),g=F(),i=u({}),v=u({btnTitle:"Import ECD",cardTitle:"Import ECD",endpoint:"/api/import/ecd",templateFile:"import-template-ecd.csv"}),I=e=>{console.log("importResponse",e),e.status==!0?h(1).then(()=>{i.value={status:!0,type:"success",text:e.message},v.value={...v.value,loading:!1,dialog:!1}}):i.value={status:!0,type:"error",text:e.message}},m=u([]),l=u({title:"",data:{},loading:!1,dialog:!1,type:"ecd",action:"view"}),y=u(0),s=u(1);s.value=g.params&&g.params.page?g.params.page:1;const h=async e=>{await b(d.authToken).get("/api/hr/kpi/type/ecd?page="+e).then(t=>{y.value=t.data.last_page,s.value=t.data.current_page,m.value=t.data.data}).catch(t=>{console.log("kpis",t)})};h(s.value);const K=()=>{l.value={...l.value,title:"Add ECD",data:{},dialog:!0,action:"add"}},R=e=>{l.value={...l.value,title:e.title,data:Object.assign({},e),dialog:!0,action:"edit"}};H(s,(e,t)=>{e!=t&&(p.push({name:"PaginatedHrMasterKpi",params:{page:s.value}}).catch(n=>{}),h(s.value))});const E=async()=>{l.value.data.type=g.params.type,l.value.data.profile_id=d.authProfile.id,await b(d.authToken).post("/api/hr/master-kpi/save",l.value.data).then(e=>{h(s.value).then(()=>{i.value={status:!0,type:"success",text:e.data.message},l.value={...l.value,dialog:!1,loading:!1}})}).catch(e=>{i.value={status:!0,type:"error",text:"Error while trying to save KPI"},l.value={...l.value,dialog:!1,loading:!1}})},r=u({}),P=u({}),M=e=>{P.value=Object.assign({},e),r.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+e.title+".",btnColor:"error",btnTitle:"Confirm"}},D=async()=>{let e={profile_id:d.authProfile.id};await b(d.authToken).post("/api/hr/kpi/remove/"+P.value.id,e).then(t=>{h(s.value).then(()=>{i.value={status:!0,type:"success",text:t.data.message}})}).catch(t=>{i.value={status:!0,type:"error",text:"Error while removing data"}})},O=e=>{r.value={...r.value,loading:!0},D().then(t=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(t=>{r.value={...r.value,loading:!1}})};return(e,t)=>(f(),_("div",pe,[a(ae,{options:v.value,onImported:I,class:"mb-3"},null,8,["options"]),a(z,{class:"rounded-lg"},{default:c(()=>[a(L,{class:"d-flex align-center"},{default:c(()=>[a(w,{onClick:K,density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:c(()=>[a(k,{size:"small",icon:x(J)},null,8,["icon"])]),_:1}),ve]),_:1}),a(U,null,{default:c(()=>[me,m.value&&m.value.length>0?(f(),_("tbody",fe,[(f(!0),_(q,null,Q(m.value,n=>(f(),_("tr",{key:n.id},[o("td",null,V(n.title),1),o("td",null,V(n.ecd_type),1),o("td",null,[o("div",ge,[a(k,{size:"small",onClick:()=>R(n),icon:x(W),class:"mx-1"},null,8,["onClick","icon"]),a(k,{size:"small",onClick:()=>M(n),icon:x(Y),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])):C("",!0)]),_:1}),m.value&&m.value.length==0?(f(),T(z,{key:0},{default:c(()=>[a(X,{class:"text-center"},{default:c(()=>[$(" No records found ")]),_:1})]),_:1})):C("",!0)]),_:1}),y.value>1?(f(),T(G,{key:0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):C("",!0),a(te,{"kpi-options":l.value,"is-hr":!0,onSave:E},null,8,["kpi-options"]),a(Z,{options:r.value,onConfirm:O},null,8,["options"]),a(ee,{options:i.value},null,8,["options"])]))}},_e={class:"v-col-12"},$e={__name:"HrMasterKpi",setup(N){const d=A(),p=u("kpi"),g=i=>{p.value!==i&&(p.value=i,d.push({name:"HrMasterKpi",params:{type:p.value}}).catch(v=>{}))};return(i,v)=>(f(),T(le,{class:"pb-16"},{default:c(()=>[a(oe,{title:"KPI Master List"}),a(se,{class:"my-5"},{default:c(()=>[o("div",_e,[a(w,{size:"x-large",color:`${p.value=="kpi"?"secondary":""}`,readonly:`${p.value=="kpi"}`,class:"px-12 mr-3",onClick:v[0]||(v[0]=()=>g("kpi"))},{default:c(()=>[$(" KPI ")]),_:1},8,["color","readonly"]),a(w,{size:"x-large",color:`${p.value=="ecd"?"secondary":""}`,readonly:`${p.value=="ecd"}`,class:"px-12",onClick:v[1]||(v[1]=()=>g("ecd"))},{default:c(()=>[$(" ECD ")]),_:1},8,["color","readonly"])]),S(a(de,null,null,512),[[j,p.value=="kpi"]]),S(a(he,null,null,512),[[j,p.value=="ecd"]])]),_:1})]),_:1}))}};export{$e as default};
