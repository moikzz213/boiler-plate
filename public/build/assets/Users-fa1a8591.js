import{z as S,K as N,u as R,r as i,N as x,c as g,w as o,V as A,o as d,a as s,f as e,g as B,B as P,i as V,A as p,G as T,d as y,a2 as E,b as C,n as F,F as j,ai as I,C as k,e as U,Q as L,aj as $,X as D}from"./app-46de97c2.js";import{g as G,e as K}from"./mdi-a0a77bee.js";import{c as Q}from"./clientApi-74ee0ab3.js";import{_ as X}from"./pageHeader-fa654728.js";const q={class:"v-col-12"},H={class:"v-col-12 v-col-md-6 text-primary text-capitalize"},J={class:"v-col-12 v-col-md-6"},M=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-capitalize"},"Username"),e("th",{class:"text-left text-capitalize"},"Email"),e("th",{class:"text-left text-capitalize"},"Role"),e("th",{class:"text-left text-capitalize"},"Status"),e("th",{class:"text-right text-capitalize"},"Actions")])],-1),O={class:"d-flex align-center justify-end"},te={__name:"Users",setup(W){const h=S(),v=N(),z=R(),n=i({loading:!1,data:[]}),f=i(0),_=i(0),u=i(v.params&&v.params.page?v.params.page:1),m=async(l,t)=>{let a="/api/admin/user/all?&filter[employee]="+l;a+="&page="+t,n.value.loading=!0,await Q(z.authToken).get(a).then(r=>{f.value=r.data.last_page,u.value=r.data.current_page,_.value=r.data.total,n.value.data=r.data.data,n.value.loading=!1}).catch(r=>{n.value.loading=!1,console.log(r)})};x(u,(l,t)=>{l!=t&&(h.push({name:"PaginatedUsers",params:{page:u.value}}).catch(a=>{}),m(c.value,u.value))}),m(null,u.value);const c=i("");x(c,(l,t)=>{l!=t&&l.length>3&&m(c.value,1)});const b=()=>{m(null,1).then(()=>{c.value=""})},w=l=>{h.push({name:"EditUser",params:{ecode:l}}).catch(()=>{})};return(l,t)=>(d(),g(A,null,{default:o(()=>[s(X,{title:"Users"}),s(V,{class:"mb-3"},{default:o(()=>[e("div",q,[s(B,{loading:n.value.loading},{default:o(()=>[s(P,{class:"pt-3"},{default:o(()=>[s(V,{class:"pa-0"},{default:o(()=>[e("div",H," Users "+p("("+_.value+")"),1),e("div",J,[s(T,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),label:"Search",variant:"outlined",density:"compact","hide-details":"","append-inner-icon":c.value!==""?y(G):null,"onClick:appendInner":b},null,8,["modelValue","append-inner-icon"])])]),_:1})]),_:1}),s(E,null,{default:o(()=>[M,e("tbody",null,[(d(!0),C(j,null,F(n.value.data,a=>(d(),C("tr",{key:a.id},[e("td",null,p(a.username),1),e("td",null,p(a.email),1),e("td",null,p(a.role),1),e("td",null,[s($,{class:"text-uppercase",size:"small",color:`${a.status.toLowerCase()=="active"?"success":"error"}`},{default:o(()=>[k(p(a.status),1)]),_:2},1032,["color"])]),e("td",null,[e("div",O,[s(D,{size:"small",onClick:()=>w(a.ecode),icon:y(K),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),n.value.data.length==0?(d(),g(I,{key:0,class:"pa-3 text-center w-100"},{default:o(()=>[k("No records found")]),_:1})):U("",!0)]),_:1},8,["loading"]),f.value>1?(d(),g(L,{key:0,modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),class:"my-4",length:f.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):U("",!0)])]),_:1})]),_:1}))}};export{te as default};
