import{u as F,z as O,K as $,r as d,N as D,l as S,c as _,w as s,V as U,o as c,a,f as o,g as x,B as G,H as y,X as V,d as C,a2 as H,A as m,b as w,F as I,n as J,e as k,h as K,C as b,Q as L,i as T,G as M,J as Q,Y as X}from"./app-6bac03f7.js";import{c as Y,e as q,f as Z}from"./mdi-a0a77bee.js";import{_ as ee}from"./PageHeader-91367b5b.js";import{c as z}from"./clientApi-7db5a976.js";import{_ as ae}from"./ConfirmDialog-ec550284.js";import{_ as te}from"./SnackBar-a670d79f.js";const le={class:"v-col-12"},se=o("div",{class:"text-primary text-capitalize"},"Weightages",-1),oe={class:"text-left text-capitalize"},ie=o("th",{class:"text-right text-capitalize"},"Actions",-1),ne={key:0},ue={class:"d-flex align-center justify-end"},de={class:X("v-col-12 px-4")},re={class:"v-col-12"},ce={class:"v-col-12 py-0"},ge={class:"v-col-12 d-flex justify-end"},ye={__name:"Weightages",setup(ve){const p=F(),R=O(),h=$(),g=d({}),r=d([]),t=d({title:"",data:{},loading:!1,dialog:!1,action:"add"}),f=d(0),n=d(h.params&&h.params.page?h.params.page:1),v=async l=>{await z(p.authToken).get("/api/hr/weightages?page="+l).then(e=>{f.value=e.data.last_page,n.value=e.data.current_page,r.value=e.data.data}).catch(e=>{console.log("weightages",e)})},W=async()=>{let l={id:t.value.action=="edit"?t.value.data.id:null,title:t.value.data.title};t.value.loading=!0,await z(p.authToken).post("/api/hr/weightage/save",l).then(e=>{v(n.value).then(()=>{t.value.loading=!1,t.value.dialog=!1,g.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{t.value.loading=!1,console.log("weightages",e),g.value={status:!0,type:"error",text:"Error while saving weightage"}})},B=()=>{t.value={...t.value,title:"Add Weightage",data:{},dialog:!0,action:"add"}},N=l=>{t.value={...t.value,title:"Edit "+l.title,data:Object.assign({},l),dialog:!0,action:"edit"}};D(n,(l,e)=>{l!=e&&(R.push({name:"PaginatedWeightages",params:{page:n.value}}).catch(i=>{}),v(n.value))}),S(()=>{v(n.value)});const u=d({}),P=d({}),A=l=>{P.value=Object.assign({},l),u.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+l.title+".",btnColor:"error",btnTitle:"Confirm"}},j=async()=>{await z(p.authToken).post("/api/hr/weightage/remove/"+P.value.id).then(l=>{v(n.value).then(()=>{g.value={status:!0,type:"success",text:l.data.message}})}).catch(l=>{g.value={status:!0,type:"error",text:"Error while removing data"}})},E=l=>{u.value={...u.value,loading:!0},j().then(e=>{u.value={...u.value,dialog:!1,loading:!1}}).catch(e=>{u.value={...u.value,loading:!1}})};return(l,e)=>(c(),_(U,{class:"pb-16"},{default:s(()=>[a(ee,{title:"Weightages"}),a(T,{class:"my-5"},{default:s(()=>[o("div",le,[a(x,{class:"rounded-lg"},{default:s(()=>[a(G,{class:"d-flex align-center"},{default:s(()=>[a(y,{onClick:B,density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:s(()=>[a(V,{size:"small",icon:C(Y)},null,8,["icon"])]),_:1}),se]),_:1}),a(H,null,{default:s(()=>[o("thead",null,[o("tr",null,[o("th",oe,m("Weightage (%)"),1),ie])]),r.value&&r.value.length>0?(c(),w("tbody",ne,[(c(!0),w(I,null,J(r.value,i=>(c(),w("tr",{key:i.id},[o("td",null,m(i.title+"%"),1),o("td",null,[o("div",ue,[a(V,{size:"small",onClick:()=>N(i),icon:C(q),class:"mx-1"},null,8,["onClick","icon"]),a(V,{size:"small",onClick:()=>A(i),icon:C(Z),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])):k("",!0)]),_:1}),r.value&&r.value.length==0?(c(),_(x,{key:0},{default:s(()=>[a(K,{class:"text-center"},{default:s(()=>[b(" No records found ")]),_:1})]),_:1})):k("",!0)]),_:1}),f.value>1?(c(),_(L,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=i=>n.value=i),class:"my-4",length:f.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):k("",!0)])]),_:1}),a(Q,{modelValue:t.value.dialog,"onUpdate:modelValue":e[3]||(e[3]=i=>t.value.dialog=i),width:"100%","max-width":"480px",persistent:""},{default:s(()=>[a(x,{class:"rounded-lg"},{default:s(()=>[a(T,{class:"ma-0 pa-0"},{default:s(()=>[o("div",de,[a(T,null,{default:s(()=>[o("div",re,m(t.value.title)+" "+m(),1),o("div",ce,[a(M,{type:"number",modelValue:t.value.data.title,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value.data.title=i),label:"Weightage*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),o("div",ge,[a(y,{color:"primary",variant:"text",onClick:e[2]||(e[2]=i=>t.value.dialog=!1)},{default:s(()=>[b("Cancel")]),_:1}),a(y,{color:"primary",loading:t.value.loading,class:"ml-2 px-8",onClick:W},{default:s(()=>[b("save")]),_:1},8,["loading"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,{options:u.value,onConfirm:E},null,8,["options"]),a(te,{options:g.value},null,8,["options"])]),_:1}))}};export{ye as default};
