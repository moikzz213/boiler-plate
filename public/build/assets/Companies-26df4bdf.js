<<<<<<<< HEAD:public/build/assets/Companies-46e8ed4f.js
import{u as E,z as I,L as S,r as d,O as U,l as L,c as V,w as s,V as G,o as m,a as t,f as o,g as k,B as H,H as g,Y as P,d as R,a2 as K,b as w,F as M,n as Y,e as b,h as q,C as _,R as J,i as T,A as h,G as Q,K as W,I as X}from"./app-97ea0592.js";import{c as Z,f as ee}from"./mdi-7fd0807e.js";import{c as z}from"./clientApi-749dd067.js";import{_ as ae}from"./PageHeader-51e993a6.js";import{_ as te}from"./ConfirmDialog-c0b3cd58.js";import{_ as le}from"./SnackBar-adcfcc56.js";import{_ as se}from"./ImportData-8af5a381.js";import"./_commonjsHelpers-042e6b4d.js";import"./industry-a63765f4.js";const oe={class:"v-col-12"},ne=o("div",{class:"text-primary text-capitalize"},"Companies",-1),ie=o("thead",null,[o("tr",null,[o("th",{class:"text-left text-capitalize"},"Title"),o("th",{class:"text-center text-capitalize"},"Status"),o("th",{class:"text-right text-capitalize"},"Actions")])],-1),ue={key:0},re={class:"text-center"},ce={class:"d-flex align-center justify-end"},de={class:X("v-col-12 px-4")},pe={class:"v-col-12"},me={class:"v-col-12 py-0"},ve={class:"v-col-12 d-flex justify-end"},be={__name:"Companies",setup(fe){const v=E(),B=I(),x=S(),u=d({}),y=d({cardTitle:"Import companies",endpoint:"/api/import/companies",templateFile:"import-template-companies.csv"}),O=a=>{a.status==!0?f(1).then(()=>{u.value={status:!0,type:"success",text:a.message},y.value={...y.value,loading:!1,dialog:!1}}):u.value={status:!0,type:"error",text:a.message}},p=d([]),l=d({title:"",data:{},loading:!1,dialog:!1,action:"add"}),C=d(0),i=d(x.params&&x.params.page?x.params.page:1),f=async a=>{await z(v.authToken).get("/api/hr/companies?page="+a).then(e=>{C.value=e.data.last_page,i.value=e.data.current_page,p.value=e.data.data}).catch(e=>{console.log("companies",e)})},A=async()=>{let a={profile_id:v.authProfile.id,id:l.value.action=="edit"?l.value.data.id:null,title:l.value.data.title};l.value.loading=!0,await z(v.authToken).post("/api/hr/company/save",a).then(e=>{f(i.value).then(()=>{l.value.loading=!1,l.value.dialog=!1,u.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{l.value.loading=!1,console.log("companies",e),e.response.data.message.includes("Duplicate entry")==!0?u.value={status:!0,type:"error",text:a.title+" already exist"}:u.value={status:!0,type:"error",text:"Error while saving company"}})},F=()=>{l.value={...l.value,title:"Add Company",data:{},dialog:!0,action:"add"}},N=a=>{l.value={...l.value,title:"Edit "+a.title,data:Object.assign({},a),dialog:!0,action:"edit"}};U(i,(a,e)=>{a!=e&&(B.push({name:"PaginatedCompanies",params:{page:i.value}}).catch(n=>{}),f(i.value))}),L(()=>{f(i.value)});const r=d({}),c=d({}),$=a=>{c.value=Object.assign({},a),c.value.new_status=c.value.status=="active"?"inactive":"active",r.value={dialog:!0,title:"Confirm",text:"Please confirm that you want to update the status of "+a.title+" to "+c.value.new_status+".",btnColor:c.value.new_status=="active"?"success":"error",btnTitle:c.value.new_status}},j=async()=>{let a={status:c.value.new_status,profile_id:v.authProfile.id};await z(v.authToken).post("/api/hr/company/update-status/"+c.value.id,a).then(e=>{f(i.value).then(()=>{u.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{u.value={status:!0,type:"error",text:"Error while removing data"}})},D=a=>{r.value={...r.value,loading:!0},j().then(e=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(e=>{r.value={...r.value,loading:!1}})};return(a,e)=>(m(),V(G,{class:"pb-16"},{default:s(()=>[t(ae,{title:"Companies"}),t(T,{class:"my-5"},{default:s(()=>[o("div",oe,[t(se,{options:y.value,onImported:O,class:"mb-3"},null,8,["options"]),t(k,{class:"rounded-lg"},{default:s(()=>[t(H,{class:"d-flex align-center"},{default:s(()=>[t(g,{onClick:F,density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:s(()=>[t(P,{size:"small",icon:R(Z)},null,8,["icon"])]),_:1}),ne]),_:1}),t(K,null,{default:s(()=>[ie,p.value&&p.value.length>0?(m(),w("tbody",ue,[(m(!0),w(M,null,Y(p.value,n=>(m(),w("tr",{key:n.id},[o("td",null,h(n.title),1),o("td",re,[t(g,{size:"small",onClick:()=>$(n),color:n.status=="active"?"success":"error",class:"mx-1 rounded-xl"},{default:s(()=>[_(h(n.status),1)]),_:2},1032,["onClick","color"])]),o("td",null,[o("div",ce,[t(P,{size:"small",onClick:()=>N(n),icon:R(ee),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])):b("",!0)]),_:1}),p.value&&p.value.length==0?(m(),V(k,{key:0},{default:s(()=>[t(q,{class:"text-center"},{default:s(()=>[_(" No records found ")]),_:1})]),_:1})):b("",!0)]),_:1}),C.value>1?(m(),V(J,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),class:"my-4",length:C.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):b("",!0)])]),_:1}),t(W,{modelValue:l.value.dialog,"onUpdate:modelValue":e[3]||(e[3]=n=>l.value.dialog=n),width:"100%","max-width":"480px",persistent:""},{default:s(()=>[t(k,{class:"rounded-lg"},{default:s(()=>[t(T,{class:"ma-0 pa-0"},{default:s(()=>[o("div",de,[t(T,null,{default:s(()=>[o("div",pe,h(l.value.title)+" "+h(),1),o("div",me,[t(Q,{modelValue:l.value.data.title,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.data.title=n),label:"Company*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),o("div",ve,[t(g,{color:"primary",variant:"text",onClick:e[2]||(e[2]=n=>l.value.dialog=!1)},{default:s(()=>[_("Cancel")]),_:1}),t(g,{color:"primary",loading:l.value.loading,class:"ml-2 px-8",onClick:A},{default:s(()=>[_("save")]),_:1},8,["loading"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{options:r.value,onConfirm:D},null,8,["options"]),t(le,{options:u.value},null,8,["options"])]),_:1}))}};export{be as default};
========
import{u as E,z as S,K as I,r as d,N as U,l as G,c as V,w as s,V as H,o as m,a as t,f as o,g as k,B as J,H as g,X as P,d as R,a2 as K,b as w,F as L,n as M,e as b,h as Q,C as _,Q as X,i as T,A as h,G as Y,J as q,Y as W}from"./app-30c9ca38.js";import{c as Z,f as ee}from"./mdi-7fd0807e.js";import{c as z}from"./clientApi-2707673d.js";import{_ as ae}from"./PageHeader-c6a4671c.js";import{_ as te}from"./ConfirmDialog-bcc66308.js";import{_ as le}from"./SnackBar-4e630a39.js";import{_ as se}from"./ImportData-a9266fe4.js";import"./_commonjsHelpers-042e6b4d.js";import"./industry-b0c5961e.js";const oe={class:"v-col-12"},ne=o("div",{class:"text-primary text-capitalize"},"Companies",-1),ie=o("thead",null,[o("tr",null,[o("th",{class:"text-left text-capitalize"},"Title"),o("th",{class:"text-center text-capitalize"},"Status"),o("th",{class:"text-right text-capitalize"},"Actions")])],-1),ue={key:0},re={class:"text-center"},ce={class:"d-flex align-center justify-end"},de={class:W("v-col-12 px-4")},pe={class:"v-col-12"},me={class:"v-col-12 py-0"},ve={class:"v-col-12 d-flex justify-end"},be={__name:"Companies",setup(fe){const v=E(),B=S(),x=I(),u=d({}),y=d({cardTitle:"Import companies",endpoint:"/api/import/companies",templateFile:"import-template-companies.csv"}),N=a=>{a.status==!0?f(1).then(()=>{u.value={status:!0,type:"success",text:a.message},y.value={...y.value,loading:!1,dialog:!1}}):u.value={status:!0,type:"error",text:a.message}},p=d([]),l=d({title:"",data:{},loading:!1,dialog:!1,action:"add"}),C=d(0),i=d(x.params&&x.params.page?x.params.page:1),f=async a=>{await z(v.authToken).get("/api/hr/companies?page="+a).then(e=>{C.value=e.data.last_page,i.value=e.data.current_page,p.value=e.data.data}).catch(e=>{console.log("companies",e)})},A=async()=>{let a={profile_id:v.authProfile.id,id:l.value.action=="edit"?l.value.data.id:null,title:l.value.data.title};l.value.loading=!0,await z(v.authToken).post("/api/hr/company/save",a).then(e=>{f(i.value).then(()=>{l.value.loading=!1,l.value.dialog=!1,u.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{l.value.loading=!1,console.log("companies",e),e.response.data.message.includes("Duplicate entry")==!0?u.value={status:!0,type:"error",text:a.title+" already exist"}:u.value={status:!0,type:"error",text:"Error while saving company"}})},F=()=>{l.value={...l.value,title:"Add Company",data:{},dialog:!0,action:"add"}},O=a=>{l.value={...l.value,title:"Edit "+a.title,data:Object.assign({},a),dialog:!0,action:"edit"}};U(i,(a,e)=>{a!=e&&(B.push({name:"PaginatedCompanies",params:{page:i.value}}).catch(n=>{}),f(i.value))}),G(()=>{f(i.value)});const r=d({}),c=d({}),$=a=>{c.value=Object.assign({},a),c.value.new_status=c.value.status=="active"?"inactive":"active",r.value={dialog:!0,title:"Confirm",text:"Please confirm that you want to update the status of "+a.title+" to "+c.value.new_status+".",btnColor:c.value.new_status=="active"?"success":"error",btnTitle:c.value.new_status}},j=async()=>{let a={status:c.value.new_status,profile_id:v.authProfile.id};await z(v.authToken).post("/api/hr/company/update-status/"+c.value.id,a).then(e=>{f(i.value).then(()=>{u.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{u.value={status:!0,type:"error",text:"Error while removing data"}})},D=a=>{r.value={...r.value,loading:!0},j().then(e=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(e=>{r.value={...r.value,loading:!1}})};return(a,e)=>(m(),V(H,{class:"pb-16"},{default:s(()=>[t(ae,{title:"Companies"}),t(T,{class:"my-5"},{default:s(()=>[o("div",oe,[t(se,{options:y.value,onImported:N,class:"mb-3"},null,8,["options"]),t(k,{class:"rounded-lg"},{default:s(()=>[t(J,{class:"d-flex align-center"},{default:s(()=>[t(g,{onClick:F,density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:s(()=>[t(P,{size:"small",icon:R(Z)},null,8,["icon"])]),_:1}),ne]),_:1}),t(K,null,{default:s(()=>[ie,p.value&&p.value.length>0?(m(),w("tbody",ue,[(m(!0),w(L,null,M(p.value,n=>(m(),w("tr",{key:n.id},[o("td",null,h(n.title),1),o("td",re,[t(g,{size:"small",onClick:()=>$(n),color:n.status=="active"?"success":"error",class:"mx-1 rounded-xl"},{default:s(()=>[_(h(n.status),1)]),_:2},1032,["onClick","color"])]),o("td",null,[o("div",ce,[t(P,{size:"small",onClick:()=>O(n),icon:R(ee),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])):b("",!0)]),_:1}),p.value&&p.value.length==0?(m(),V(k,{key:0},{default:s(()=>[t(Q,{class:"text-center"},{default:s(()=>[_(" No records found ")]),_:1})]),_:1})):b("",!0)]),_:1}),C.value>1?(m(),V(X,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),class:"my-4",length:C.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):b("",!0)])]),_:1}),t(q,{modelValue:l.value.dialog,"onUpdate:modelValue":e[3]||(e[3]=n=>l.value.dialog=n),width:"100%","max-width":"480px",persistent:""},{default:s(()=>[t(k,{class:"rounded-lg"},{default:s(()=>[t(T,{class:"ma-0 pa-0"},{default:s(()=>[o("div",de,[t(T,null,{default:s(()=>[o("div",pe,h(l.value.title)+" "+h(),1),o("div",me,[t(Y,{modelValue:l.value.data.title,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.data.title=n),label:"Company*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),o("div",ve,[t(g,{color:"primary",variant:"text",onClick:e[2]||(e[2]=n=>l.value.dialog=!1)},{default:s(()=>[_("Cancel")]),_:1}),t(g,{color:"primary",loading:l.value.loading,class:"ml-2 px-8",onClick:A},{default:s(()=>[_("save")]),_:1},8,["loading"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{options:r.value,onConfirm:D},null,8,["options"]),t(le,{options:u.value},null,8,["options"])]),_:1}))}};export{be as default};
>>>>>>>> phase-1:public/build/assets/Companies-26df4bdf.js
