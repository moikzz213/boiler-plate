import{u as w,r as c,c as u,w as t,V as C,o as p,a as l,f as a,P as x,d as m,R,S as F,t as b,v,n as g,i as _,g as k,h as S,e as D}from"./app-07292aad.js";import"./clientApi-86b20a3c.js";import{u as B}from"./company-0b22f1bf.js";import{e as N}from"./vue-datepicker-42153220.js";import"./typeof-7fd5df1e.js";import"./defineProperty-fcf2a4a8.js";const z=a("div",{class:"v-col-12"},[a("div",{class:"text-h6"},"Reports")],-1),P={class:"v-col-12 v-col-md-4"},T={class:"v-col-12 v-col-md-4"},A={class:"v-col-12 v-col-md-3"},U={class:"d-flex justify-space-between"},j={class:"v-col-12"},J={__name:"Reports",setup(L){const f=w(),r=B(),o=c(!1),y=()=>{r.companies.length==0&&(o.value=!0,r.getCompanies(f.authToken).then(()=>{o.value=!1}))},e=c({loadingReset:!1,loadingFilter:!1,data:{employee:null,company_id:null,year:new Date().getFullYear(),is_regular:1}}),h=async()=>{e.value.loadingFilter=!0,getData().then(()=>{e.value.loadingFilter=!1}).catch(d=>{e.value.loadingFilter=!1})},V=async()=>{e.value.data={employee:null,company_id:null,is_regular:1},e.value.loadingReset=!0,getData().then(()=>{e.value.loadingReset=!1}).catch(d=>{e.value.loadingReset=!1})};return(d,i)=>(p(),u(C,{class:"pb-16"},{default:t(()=>[l(_,{class:"my-5"},{default:t(()=>[z,a("div",P,[l(x,{modelValue:e.value.data.company_id,"onUpdate:modelValue":i[0]||(i[0]=s=>e.value.data.company_id=s),items:m(r).active_companies,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",class:"bg-white","hide-details":"",label:o.value?"Loading...":"Select Company",loading:o.value,clearable:"",onFocus:y},{selection:t(({props:s,item:n})=>[a("span",R(F(s)),b(n.raw.title&&n.raw.title.length>20?n.raw.title.substring(0,20)+"...":n.raw.title),17)]),_:1},8,["modelValue","items","label","loading"])]),a("div",T,[l(m(N),{modelValue:e.value.data.year,"onUpdate:modelValue":i[1]||(i[1]=s=>e.value.data.year=s),"year-picker":"",class:"pms-date-picker"},null,8,["modelValue"])]),a("div",A,[a("div",U,[l(v,{onClick:V,height:"40px",variant:"text",color:"primary",class:"bg-grey-lighten-2 text-capitalize",loading:e.value.loadingReset,style:{width:"48%"}},{default:t(()=>[g("Reset")]),_:1},8,["loading"]),l(v,{onClick:h,height:"40px",color:"secondary",class:"text-capitalize",loading:e.value.loadingFilter,style:{width:"48%"}},{default:t(()=>[g("filter")]),_:1},8,["loading"])])])]),_:1}),l(_,null,{default:t(()=>[a("div",j,[l(k,null,{default:t(()=>[d.pmsData!=null?(p(),u(S,{key:0})):D("",!0)]),_:1})])]),_:1})]),_:1}))}};export{J as default};
