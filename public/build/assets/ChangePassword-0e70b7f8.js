import{x as $,u as A,r as f,Q as b,o as w,c as U,w as n,a as e,m as P,n as _,t as D,h as z,d as y,s as r,y as x,M as F,v as E,e as N,g as B,i as R,f as m,b as T}from"./app-2a61efd4.js";import{d as h,c as j,a as S,b as O,F as q}from"./index.esm-96e7c982.js";import{c as I}from"./clientApi-57df769f.js";import{_ as G}from"./SnackBar-b94239b9.js";const ra={__name:"AccountForm",props:["user"],emits:["saved"],setup(V,{emit:v}){const a=V,p=$(),o=A(),d=f(["normal","hrbp","hr_admin"]),t=f({loading:!1,data:Object.assign({},a.user)});b(()=>a.user,g=>{t.value.data=g});const s=async g=>{let u={enable:!1,role:t.value.data.role,ecode:t.value.data.ecode,author:o.authProfile.id};if(g){let l="Active";g=="Active"&&(l="Inactive"),u={enable:l,ecode:t.value.data.ecode,author:o.authProfile.id}}t.value.loading=!0,await I(o.authToken).post("/api/admin/account/save",u).then(l=>{v("saved",l.data.message),t.value.loading=!1}).catch(l=>{t.value.loading=!1})};return(g,u)=>(w(),U(B,null,{default:n(()=>[e(P,{class:"text-primary text-capitalize mb-3"},{default:n(()=>[_("Account - "+D(t.value.data.status),1)]),_:1}),e(z,null,{default:n(()=>[e(y(h),{name:"username",modelValue:t.value.data.username,"onUpdate:modelValue":u[1]||(u[1]=l=>t.value.data.username=l)},{default:n(({field:l,errors:i})=>[e(r,x(l,{modelValue:t.value.data.username,"onUpdate:modelValue":u[0]||(u[0]=c=>t.value.data.username=c),label:"Username",variant:"outlined",density:"compact","error-messages":i,readonly:""}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),e(y(h),{name:"role",modelValue:t.value.data.role,"onUpdate:modelValue":u[3]||(u[3]=l=>t.value.data.role=l)},{default:n(({field:l,errors:i})=>[e(F,x({disabled:y(p).name!="EditUser",modelValue:t.value.data.role,"onUpdate:modelValue":u[2]||(u[2]=c=>t.value.data.role=c)},l,{items:d.value,label:"Role",variant:"outlined",density:"compact",class:"mb-2","error-messages":i}),null,16,["disabled","modelValue","items","error-messages"])]),_:1},8,["modelValue"]),y(p).name=="EditUser"?(w(),U(E,{key:0,color:"primary",size:"small",loading:t.value.loading,onClick:u[4]||(u[4]=()=>s())},{default:n(()=>[_("Save")]),_:1},8,["loading"])):N("",!0),y(p).name=="EditUser"?(w(),U(E,{key:1,class:"ml-3",color:t.value.data.status=="Inactive"?"success":"error",size:"small",loading:t.value.loading,onClick:u[5]||(u[5]=()=>s(t.value.data.status))},{default:n(()=>[_(D(t.value.data.status=="Inactive"?"Enable Employee":"Disable Employee"),1)]),_:1},8,["color","loading"])):N("",!0)]),_:1})]),_:1}))}},L={class:"v-col-12 v-col-md-6 py-0"},H={class:"v-col-12 v-col-md-6 py-0"},J={class:"v-col-12 v-col-md-6 py-0"},M={class:"v-col-12 v-col-md-6 py-0"},Q={class:"v-col-12 v-col-md-6 py-0"},K={class:"v-col-12 v-col-md-6 py-0"},W={class:"v-col-12 v-col-md-6 py-0"},X={class:"v-col-12 v-col-md-6 py-0"},Y={class:"v-col-12 v-col-md-6 py-0"},Z={class:"v-col-12 v-col-md-6 py-0"},aa={class:"v-col-12 v-col-md-6 py-0"},ea={class:"v-col-12 v-col-md-6 py-0"},la={class:"v-col-12 v-col-md-6 py-0"},ta={class:"v-col-12 v-col-md-6 py-0"},ia={__name:"ProfileForm",props:["user"],setup(V){const v=V,a=f({loading:!1,data:Object.assign({},v.user),company:{title:v.user.company?v.user.company.title:""}});return b(()=>v.user,(p,o)=>{p!=o&&(a.value.data=Object.assign({},p),a.value.company=p.company)}),(p,o)=>(w(),U(B,null,{default:n(()=>[e(P,{class:"text-primary text-capitalize mb-3"},{default:n(()=>[_("Profile Settings")]),_:1}),e(z,null,{default:n(()=>[e(R,{class:"py-3"},{default:n(()=>[m("div",L,[e(r,{modelValue:a.value.data.display_name,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value.data.display_name=d),label:"Full name",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"])]),m("div",H,[e(r,{modelValue:a.value.data.ecode,"onUpdate:modelValue":o[1]||(o[1]=d=>a.value.data.ecode=d),label:"Ecode",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"])]),m("div",J,[e(r,{modelValue:a.value.data.email,"onUpdate:modelValue":o[2]||(o[2]=d=>a.value.data.email=d),label:"Email",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"])]),m("div",M,[e(r,{label:"Employee Type","model-value":a.value.data.is_regular?"Regular":"Probation",variant:"outlined",density:"compact",readonly:""},null,8,["model-value"])]),m("div",Q,[e(r,{modelValue:a.value.company.title,"onUpdate:modelValue":o[3]||(o[3]=d=>a.value.company.title=d),label:"Company",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"])]),m("div",K,[e(r,{readonly:"",label:"Designation",modelValue:a.value.data.designation,"onUpdate:modelValue":o[4]||(o[4]=d=>a.value.data.designation=d),variant:"outlined",density:"compact"},null,8,["modelValue"])]),m("div",W,[e(r,{readonly:"",label:"Department",modelValue:a.value.data.department,"onUpdate:modelValue":o[5]||(o[5]=d=>a.value.data.department=d),variant:"outlined",density:"compact"},null,8,["modelValue"])]),m("div",X,[e(r,{readonly:"",type:"date",label:"Date of Birth","model-value":a.value.data.dob,variant:"outlined",density:"compact"},null,8,["model-value"])]),m("div",Y,[e(r,{readonly:"",type:"date",label:"Date Joined","model-value":a.value.data.doj,variant:"outlined",density:"compact"},null,8,["model-value"])]),m("div",Z,[e(r,{readonly:"",label:"Nationality","model-value":a.value.data.nationality,variant:"outlined",density:"compact"},null,8,["model-value"])]),m("div",aa,[e(r,{readonly:"",label:"Grade","model-value":a.value.data.grade_original?a.value.data.grade_original:a.value.data.grade,variant:"outlined",density:"compact"},null,8,["model-value"])]),m("div",ea,[e(r,{readonly:"",label:"Equivalent Grade","model-value":a.value.data.grade,variant:"outlined",density:"compact"},null,8,["model-value"])]),m("div",la,[e(r,{readonly:"",label:"Reporting to","model-value":`${a.value.data.managed_by&&a.value.data.managed_by.display_name?a.value.data.managed_by.display_name+" ("+a.value.data.managed_by.ecode+")":"N/A"}
            `,variant:"outlined",density:"compact"},null,8,["model-value"])]),m("div",ta,[e(r,{readonly:"",label:"HRBP",modelValue:a.value.data.hrbp_email,"onUpdate:modelValue":o[6]||(o[6]=d=>a.value.data.hrbp_email=d),variant:"outlined",density:"compact"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}))}},oa={class:"d-flex align-center"},ma={__name:"ChangePassword",props:["user"],setup(V){const v=V,a=$(),p=f("performance-management-system"),o=f("https://users.moikzz.tech"),d=f({status:!1,type:"",text:""}),t=f(!0),s=f({status:!1,loading:!1,data:{username:"",password:"",password_confirmation:"",url:p.value}}),g=j({password:S().min(5).required(),password_confirmation:S().required().oneOf([O("password")],"Passwords do not match")}),u=async()=>{s.value.loading=!0,s.value.data.username=v.user?v.user.ecode:a.params.ecode,await axios.post(o.value+"/api/application/reset-password",s.value.data).then(l=>{s.value={status:!1,loading:!1,data:{username:v.user?v.user.ecode:a.params.ecode,password:"11111111111111111111111",password_confirmation:"11111111111111111111111"}},d.value={status:!0,type:"success",text:l.data.msg}}).catch(l=>{console.log(l),s.value.loading=!1,d.value={status:!0,type:"error",text:"Error while updating password"},console.log(l.response.data)})};return b(()=>v.user,(l,i)=>{l!=i&&(s.value.data.username=Object.assign({},l.ecode))}),b(()=>s.value.data.password,l=>{l&&l==s.value.data.password_confirmation?t.value=!1:t.value=!0}),b(()=>s.value.data.password_confirmation,(l,i)=>{l&&l==s.value.data.password?t.value=!1:t.value=!0}),(l,i)=>(w(),T("div",null,[e(B,{loading:s.value.loading},{default:n(()=>[e(P,{class:"text-primary text-capitalize mb-3"},{default:n(()=>[_(" Change password ")]),_:1}),e(z,null,{default:n(()=>[e(y(q),{as:"v-form","validation-schema":y(g)},{default:n(()=>[e(y(h),{name:"password",modelValue:s.value.data.password,"onUpdate:modelValue":i[1]||(i[1]=c=>s.value.data.password=c)},{default:n(({field:c,errors:k})=>[e(r,x({modelValue:s.value.data.password,"onUpdate:modelValue":i[0]||(i[0]=C=>s.value.data.password=C)},c,{label:"Set New Password",type:"password",variant:"outlined",density:"compact","error-messages":k}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),e(y(h),{name:"password_confirmation",modelValue:s.value.data.password_confirmation,"onUpdate:modelValue":i[3]||(i[3]=c=>s.value.data.password_confirmation=c)},{default:n(({field:c,errors:k})=>[e(r,x({modelValue:s.value.data.password_confirmation,"onUpdate:modelValue":i[2]||(i[2]=C=>s.value.data.password_confirmation=C)},c,{label:"Confirm New Password",type:"password",variant:"outlined",density:"compact","error-messages":k}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),m("div",oa,[e(E,{disabled:t.value,color:"primary",size:"large",onClick:u},{default:n(()=>[_(" Save ")]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])]),_:1})]),_:1},8,["loading"]),e(G,{options:d.value},null,8,["options"])]))}};export{ra as _,ia as a,ma as b};
