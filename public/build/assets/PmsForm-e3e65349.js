import{l as U,k as R,x as D,r as v,u as F,P as A,o as b,b as C,a as o,w as n,f as a,O as E,d as p,Q as N,R as T,t as B,i as y,a0 as f,s as i,c as M,n as O,v as j,e as z}from"./app-d9e59114.js";import{c as V}from"./clientApi-051bb680.js";import{u as I}from"./company-9de1d33c.js";import{e as K}from"./vue-datepicker-f8f61688.js";import{_ as Y}from"./SnackBar-d535541d.js";const L={class:"v-col-12 v-col-md-6"},Q={class:"v-col-12 v-col-md-6"},$={class:"v-col-12 d-flex align-center"},q=a("div",{class:"mr-3 text-subtitle-1",style:{"min-width":"150px"}},"Regular Employee",-1),G={class:"v-col-12 py-0"},H=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"Annual KPI Setting")],-1),J={class:"v-col-12 v-col-md-6 py-0"},W={class:"v-col-12 v-col-md-6 py-0"},X=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"Mid-year Review")],-1),Z={class:"v-col-12 v-col-md-6 py-0"},ee={class:"v-col-12 v-col-md-6 py-0"},ae=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"End-year Review")],-1),te={class:"v-col-12 v-col-md-6 py-0"},le={class:"v-col-12 v-col-md-6 py-0"},oe={class:"v-col-12 d-flex align-center"},se=a("div",{class:"mr-3 text-subtitle-1",style:{"min-width":"150px"}}," Probation Employee ",-1),ie={class:"v-col-12 py-0"},de=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"First Review")],-1),ne={class:"v-col-12 v-col-md-6 py-0"},re={class:"v-col-12 v-col-md-6 py-0"},ue=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"Final Review")],-1),ve={class:"v-col-12 v-col-md-6 py-0"},pe={class:"v-col-12 v-col-md-6 py-0"},_e={class:"d-flex justify-end mt-5"},be={__name:"PmsForm",props:{pms:{type:Object,default:{}}},setup(h){const x=h,w=U(),k=R(),_=D(),m=v({}),d=F();v(new Date().getFullYear()-1);const e=v({title:"Add PMS Setting",dialog:!0,data:{year:new Date().getFullYear(),company_id:null,employee_review_allowed_days:"",probation_final_review_end:"",probation_final_review_start:"",probation_first_review_end:"",probation_first_review_start:"",probation_kpi_setting:"",annual_kpi_setting_start:"",annual_kpi_setting_end:"",mid_year_review_start:"",mid_year_review_end:"",end_year_review_start:"",end_year_review_end:""},loading:!1});A(()=>x.pms,s=>{g(),e.value={...e.value,data:s}});const S=async()=>{e.value.loading=!0,await V(d.authToken).get("/hr/employees/paginated").then(s=>{e.value.loading=!1}).catch(s=>{e.value.loading=!1})},P=async()=>{e.value.loading=!0,e.value.data.profile_ecode=d.authProfile.ecode,e.value.data.profile_id=d.authProfile.id,await V(d.authToken).post("/api/hr/pms-settings/save",e.value.data).then(s=>{e.value.loading=!1,m.value={status:!0,type:"success",text:s.data.message},w.setPmsSettings(s.data.result),w.setAllSettings(s.data.result),s.data.profile&&s.data.profile.length>0&&d.setProfile(s.data.profile),setTimeout(()=>{_.name=="NewPms"&&k.push({name:"Pms"}).catch(t=>{})},1e3)}).catch(s=>{e.value.loading=!1,s.response.status==422&&(m.value={status:!0,type:"error",text:s.response.data.message})})};d.authToken&&S();const c=I(),r=v(!1),g=()=>{c.companies.length==0&&(r.value=!0,c.getCompanies(d.authToken).then(()=>{r.value=!1}))};return(s,t)=>(b(),C("div",null,[o(y,null,{default:n(()=>[a("div",L,[o(E,{disabled:p(_).name!="NewPms",modelValue:e.value.data.company_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.data.company_id=l),items:p(c).active_companies,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",class:"bg-white",label:r.value?"Loading...":"Select Company","hide-details":"",loading:r.value,onFocus:g},{selection:n(({props:l,item:u})=>[a("span",N(T(l)),B(u.raw.title&&u.raw.title.length>30?u.raw.title.substring(0,30)+"...":u.raw.title)+" ",17)]),_:1},8,["disabled","modelValue","items","label","loading"])]),a("div",Q,[o(p(K),{modelValue:e.value.data.year,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.data.year=l),"year-picker":"",class:"pms-date-picker",disabled:p(_).name!="NewPms"},null,8,["modelValue","disabled"])])]),_:1}),o(y,{class:"mt-6"},{default:n(()=>[a("div",$,[q,o(f)]),a("div",G,[o(i,{modelValue:e.value.data.employee_review_allowed_days,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.data.employee_review_allowed_days=l),variant:"outlined",density:"compact",class:"bg-white",label:"Employee Review Allowed (days)",type:"number"},null,8,["modelValue"])]),H,a("div",J,[o(i,{type:"date",label:"Start Date",modelValue:e.value.data.annual_kpi_setting_start,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.data.annual_kpi_setting_start=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),a("div",W,[o(i,{type:"date",label:"End Date",modelValue:e.value.data.annual_kpi_setting_end,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.data.annual_kpi_setting_end=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),X,a("div",Z,[o(i,{type:"date",label:"Start Date",modelValue:e.value.data.mid_year_review_start,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.data.mid_year_review_start=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),a("div",ee,[o(i,{type:"date",label:"End Date",modelValue:e.value.data.mid_year_review_end,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.data.mid_year_review_end=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),ae,a("div",te,[o(i,{type:"date",label:"Start Date",modelValue:e.value.data.end_year_review_start,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.data.end_year_review_start=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),a("div",le,[o(i,{type:"date",label:"End Date",modelValue:e.value.data.end_year_review_end,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.data.end_year_review_end=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])])]),_:1}),o(y,{class:"mt-6"},{default:n(()=>[a("div",oe,[se,o(f)]),a("div",ie,[o(i,{modelValue:e.value.data.probation_kpi_setting,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.data.probation_kpi_setting=l),variant:"outlined",density:"compact",class:"bg-white",label:"Probation KPI Setting Max Allowed (days)",type:"number"},null,8,["modelValue"])]),de,a("div",ne,[o(i,{modelValue:e.value.data.probation_first_review_start,"onUpdate:modelValue":t[10]||(t[10]=l=>e.value.data.probation_first_review_start=l),variant:"outlined",density:"compact",class:"bg-white",label:"From (in days)",type:"number"},null,8,["modelValue"])]),a("div",re,[o(i,{modelValue:e.value.data.probation_first_review_end,"onUpdate:modelValue":t[11]||(t[11]=l=>e.value.data.probation_first_review_end=l),variant:"outlined",density:"compact",class:"bg-white",label:"Up to (in days)",type:"number"},null,8,["modelValue"])]),ue,a("div",ve,[o(i,{modelValue:e.value.data.probation_final_review_start,"onUpdate:modelValue":t[12]||(t[12]=l=>e.value.data.probation_final_review_start=l),variant:"outlined",density:"compact",class:"bg-white",label:"From (in days)",type:"number"},null,8,["modelValue"])]),a("div",pe,[o(i,{modelValue:e.value.data.probation_final_review_end,"onUpdate:modelValue":t[13]||(t[13]=l=>e.value.data.probation_final_review_end=l),variant:"outlined",density:"compact",class:"bg-white",label:"Up to (in days)",type:"number"},null,8,["modelValue"])])]),_:1}),a("div",_e,[e.value.data.status!="locked"?(b(),M(j,{key:0,size:"x-large",color:"secondary",loading:e.value.loading,class:"px-10",onClick:P},{default:n(()=>[O("save")]),_:1},8,["loading"])):z("",!0)]),o(Y,{options:m.value},null,8,["options"])]))}};export{be as _};
