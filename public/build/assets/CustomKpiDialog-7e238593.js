import{K as O,u as T,r as x,N as $,o as t,c as v,w as d,a as o,g as N,i as C,f as r,Y as k,A as m,b as n,G as P,O as S,P as I,e as s,I as A,M as j,d as F,a0 as y,$ as R,H as V,C as f,J as z}from"./app-109f6553.js";import{u as E}from"./industry-e0764c0d.js";const H={class:"v-col-12"},M={key:2,class:"v-col-12 v-col-md-6 py-0"},G={key:3,class:"v-col-12 py-0"},J={key:4,class:"v-col-12 py-0"},L={key:5,class:"v-col-12 py-0"},Y={key:6,class:"v-col-12 py-0"},q={class:"v-col-12 py-0"},Q={class:"v-col-12 d-flex justify-end"},Z={__name:"CustomKpiDialog",props:{kpiOptions:{type:Object,default:null},isHr:{type:Boolean,default:!1}},emits:["save","approve"],setup(U,{emit:_}){const h=U;O();const B=T(),e=x({title:"",data:{},dialog:!1,loading:!1,type:"",action:"",is_review:!1}),g=E(),p=x(!1),w=()=>{g.industries.length==0&&(p.value=!0,g.getIndustries(B.authToken).then(()=>{p.value=!1}))},D=()=>{e.value.loading=!0,_("save",e.value.data)},K=()=>{e.value.loading=!0,_("approve",e.value.data)};$(()=>h.kpiOptions,c=>{w(),e.value=Object.assign({},c)});const u=c=>c.includes(e.value.type)==!0;return(c,l)=>(t(),v(z,{modelValue:e.value.dialog,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.dialog=a),width:"100%","max-width":e.value.type=="ecd"?600:900,persistent:""},{default:d(()=>[o(N,{class:"rounded-lg"},{default:d(()=>[o(C,{class:"ma-0 pa-0"},{default:d(()=>[r("div",{class:k(`v-col-12 ${e.value.is_review==!0?"v-col-md-8":""} px-4`)},[o(C,null,{default:d(()=>[r("div",H,m(e.value.title)+" "+m(),1),u(["ecd","kpi"])?(t(),n("div",{key:0,class:k(`v-col-12 ${e.value.type=="ecd"?"v-col-md-12":"v-col-md-6"}  py-0`)},[o(P,{modelValue:e.value.data.title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.data.title=a),variant:"outlined",density:"compact",label:"Title*"},{selection:d(({props:a,item:i})=>{var b;return[r("span",S(I(a)),m(((b=i==null?void 0:i.raw)==null?void 0:b.title.substring(0,35))+"..."),17)]}),_:1},8,["modelValue"])],2)):s("",!0),u(["ecd"])?(t(),n("div",{key:1,class:k(`v-col-12 ${e.value.type=="ecd"?"v-col-md-12":"v-col-md-6"}  py-0`)},[o(A,{modelValue:e.value.data.ecd_type,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.data.ecd_type=a),items:["tech","soft","both"],variant:"outlined",density:"compact",class:"bg-white","hide-details":"",label:"Select Type"},null,8,["modelValue"])],2)):s("",!0),u(["kpi"])?(t(),n("div",M,[o(j,{modelValue:e.value.data.industry_id,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.data.industry_id=a),items:F(g).active_industries,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",class:"bg-white","hide-details":"",label:p.value?"Loading...":"Select Industry",loading:p.value,onFocus:w},{selection:d(({props:a,item:i})=>[r("span",S(I(a)),m(i.raw.title&&i.raw.title.length>30?i.raw.title.substring(0,30)+"...":i.raw.title),17)]),_:1},8,["modelValue","items","label","loading"])])):s("",!0),u(["kpi"])?(t(),n("div",G,[o(y,{modelValue:e.value.data.definition,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.data.definition=a),label:"KPI Definition*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):s("",!0),u(["kpi"])?(t(),n("div",J,[o(y,{modelValue:e.value.data.formula,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.data.formula=a),label:"Calculation Formula*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):s("",!0),u(["kpi"])?(t(),n("div",L,[o(y,{modelValue:e.value.data.subordinate_measures,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.data.subordinate_measures=a),label:"Subordinate Measures*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):s("",!0),u(["kpi"])?(t(),n("div",Y,[o(y,{modelValue:e.value.data.calculation_example,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.data.calculation_example=a),label:"KPI Calculation Example*",variant:"outlined",rows:"2"},null,8,["modelValue"])])):s("",!0),r("div",q,[o(R,{class:"mx-auto"})]),r("div",Q,[e.value.action=="view"?(t(),v(V,{key:0,color:"primary",onClick:l[7]||(l[7]=a=>e.value.dialog=!1)},{default:d(()=>[f("Close")]),_:1})):s("",!0),["edit","add","approve"].includes(e.value.action)==!0?(t(),v(V,{key:1,color:"primary",variant:"text",onClick:l[8]||(l[8]=a=>e.value.dialog=!1)},{default:d(()=>[f("Cancel")]),_:1})):s("",!0),["edit","add"].includes(e.value.action)==!0?(t(),v(V,{key:2,color:"secondary",class:"ml-2 px-8",onClick:D,loading:e.value.loading},{default:d(()=>[f("save")]),_:1},8,["loading"])):s("",!0),e.value.action=="approve"?(t(),v(V,{key:3,color:"secondary",class:"ml-2 px-8",loading:e.value.loading,onClick:K},{default:d(()=>[f("Approve")]),_:1},8,["loading"])):s("",!0)])]),_:1})],2)]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"]))}};export{Z as _};
