import{u as C,r as n,Q as b,o as g,b as k,a,w as l,f as o,P as F,d as h,R,S,t as D,v as f,n as y,i as _,g as P,c as B,h as N,e as T}from"./app-c786321f.js";import{c as z}from"./clientApi-745d63d6.js";import{u as A}from"./company-f0159192.js";import{e as j}from"./vue-datepicker-83ed9b3b.js";import"./typeof-7fd5df1e.js";import"./defineProperty-fcf2a4a8.js";const U={class:"v-col-12 v-col-md-4"},E={class:"v-col-12 v-col-md-4"},G={class:"v-col-12 v-col-md-3"},H={class:"d-flex justify-space-between"},L={class:"v-col-12"},M={__name:"GraphHrbp",props:{profile:{type:Object,default:null}},setup(O){const s=C(),p=n(null),v=n(s.authProfile&&s.authProfile.reviews.length>0?s.authProfile.reviews[0].state:"setting");b(()=>v.value,()=>{r()}),n(2023);const r=async()=>{await z(s.authToken).get("/api/hr/graph/pms/state/"+v.value).then(t=>{p.value=t.data.data,console.log("pmsData.value",p.value)}).catch(t=>{console.log("getData error",t.response)})};r();const m=A(),c=n(!1),w=()=>{m.companies.length==0&&(c.value=!0,m.getCompanies(s.authToken).then(()=>{c.value=!1}))},e=n({loadingReset:!1,loadingFilter:!1,data:{employee:null,company_id:null,year:new Date().getFullYear(),is_regular:1}}),V=async()=>{e.value.loadingFilter=!0,r().then(()=>{e.value.loadingFilter=!1}).catch(t=>{e.value.loadingFilter=!1})},x=async()=>{e.value.data={employee:null,company_id:null,is_regular:1},e.value.loadingReset=!0,r().then(()=>{e.value.loadingReset=!1}).catch(t=>{e.value.loadingReset=!1})};return(t,u)=>(g(),k("div",null,[a(_,null,{default:l(()=>[o("div",U,[a(F,{modelValue:e.value.data.company_id,"onUpdate:modelValue":u[0]||(u[0]=i=>e.value.data.company_id=i),items:h(m).active_companies,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",class:"bg-white","hide-details":"",label:c.value?"Loading...":"Select Company",loading:c.value,clearable:"",onFocus:w},{selection:l(({props:i,item:d})=>[o("span",R(S(i)),D(d.raw.title&&d.raw.title.length>20?d.raw.title.substring(0,20)+"...":d.raw.title),17)]),_:1},8,["modelValue","items","label","loading"])]),o("div",E,[a(h(j),{modelValue:e.value.data.year,"onUpdate:modelValue":u[1]||(u[1]=i=>e.value.data.year=i),"year-picker":"",class:"pms-date-picker"},null,8,["modelValue"])]),o("div",G,[o("div",H,[a(f,{onClick:x,height:"40px",variant:"text",color:"primary",class:"bg-grey-lighten-2 text-capitalize",loading:e.value.loadingReset,style:{width:"48%"}},{default:l(()=>[y("Reset")]),_:1},8,["loading"]),a(f,{onClick:V,height:"40px",color:"secondary",class:"text-capitalize",loading:e.value.loadingFilter,style:{width:"48%"}},{default:l(()=>[y("filter")]),_:1},8,["loading"])])])]),_:1}),a(_,null,{default:l(()=>[o("div",L,[a(P,null,{default:l(()=>[p.value!=null?(g(),B(N,{key:0})):T("",!0)]),_:1})])]),_:1})]))}};export{M as default};
