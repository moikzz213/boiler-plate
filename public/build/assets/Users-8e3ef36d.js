import{k as w,x as R,u as P,r as d,P as x,c as h,w as o,V as A,o as i,a as s,f as e,g as N,m as T,i as V,t as p,s as B,d as y,a3 as E,b as C,C as F,F as I,a5 as L,n as k,e as U,S as $,a6 as j,Z as D}from"./app-cd5d535f.js";import{h as H,f as Z}from"./mdi-5e26928d.js";import{c as q}from"./clientApi-8a9bbd48.js";import{_ as G}from"./pageHeader-a64be269.js";const J={class:"v-col-12"},K={class:"v-col-12 v-col-md-6 text-primary text-capitalize"},M={class:"v-col-12 v-col-md-6"},O=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-capitalize"},"Username"),e("th",{class:"text-left text-capitalize"},"Email"),e("th",{class:"text-left text-capitalize"},"Role"),e("th",{class:"text-left text-capitalize"},"Status"),e("th",{class:"text-right text-capitalize"},"Actions")])],-1),Q={class:"d-flex align-center justify-end"},ta={__name:"Users",setup(W){const g=w(),v=R(),S=P(),n=d({loading:!1,data:[]}),f=d(0),_=d(0),r=d(v.params&&v.params.page?v.params.page:1),m=async(l,t)=>{let a="/api/admin/user/all?&filter[employee]="+l;a+="&page="+t,n.value.loading=!0,await q(S.authToken).get(a).then(c=>{f.value=c.data.last_page,r.value=c.data.current_page,_.value=c.data.total,n.value.data=c.data.data,n.value.loading=!1}).catch(c=>{n.value.loading=!1,console.log(c)})};x(r,(l,t)=>{l!=t&&(g.push({name:"PaginatedUsers",params:{page:r.value}}).catch(a=>{}),m(u.value,r.value))}),m(null,r.value);const u=d("");x(u,(l,t)=>{l!=t&&l.length>3&&m(u.value,1)});const z=()=>{m(null,1).then(()=>{u.value=""})},b=l=>{g.push({name:"EditUser",params:{ecode:l}}).catch(()=>{})};return(l,t)=>(i(),h(A,null,{default:o(()=>[s(G,{title:"Users"}),s(V,{class:"mb-3"},{default:o(()=>[e("div",J,[s(N,{loading:n.value.loading},{default:o(()=>[s(T,{class:"pt-3"},{default:o(()=>[s(V,{class:"pa-0"},{default:o(()=>[e("div",K," Users "+p("("+_.value+")"),1),e("div",M,[s(B,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),label:"Search",variant:"outlined",density:"compact","hide-details":"","append-inner-icon":u.value!==""?y(H):null,"onClick:appendInner":z},null,8,["modelValue","append-inner-icon"])])]),_:1})]),_:1}),s(E,null,{default:o(()=>[O,e("tbody",null,[(i(!0),C(I,null,F(n.value.data,a=>(i(),C("tr",{key:a.id},[e("td",null,p(a.username),1),e("td",null,p(a.email),1),e("td",null,p(a.role=="app_admin"?"Super admin":a.role=="hr_admin"?"HR Admin":a.role),1),e("td",null,[s(j,{class:"text-uppercase",size:"small",color:`${a.status.toLowerCase()=="active"?"success":"error"}`},{default:o(()=>[k(p(a.status),1)]),_:2},1032,["color"])]),e("td",null,[e("div",Q,[s(D,{size:"small",onClick:()=>b(a.ecode),icon:y(Z),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),n.value.data.length==0?(i(),h(L,{key:0,class:"pa-3 text-center w-100"},{default:o(()=>[k("No records found")]),_:1})):U("",!0)]),_:1},8,["loading"]),f.value>1?(i(),h($,{key:0,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=a=>r.value=a),class:"my-4",length:f.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):U("",!0)])]),_:1})]),_:1}))}};export{ta as default};
