import{r as c,M as H,O as A,o as v,b as F,a as s,w as r,g as q,i as C,f as a,I as z,A as p,c as g,N as ve,G as E,P as je,Q as Ke,W as Fe,T as Se,J as de,Z as Ue,$ as ke,a0 as re,H as x,C as _,e as f,K as Ve,F as ie,z as Ae,L as Be,u as Me,k as Ee,d as j,Y as U,B as Te,h as le,q as Ie,n as _e,v as $e}from"./app-c8106d02.js";import{b as Le,c as he,d as We,e as xe,f as be,g as we}from"./mdi-5e26928d.js";import{e as ze}from"./vue-datepicker-7a74635f.js";import{_ as Ce}from"./SnackBar-be9c06b9.js";const Ne={class:"v-col-12"},Ye={class:"v-col-12 v-col-md-6 py-0"},He={class:"v-col-12 v-col-md-6 py-0"},qe={class:"v-col-12 v-col-md-3 py-0 mb-2"},Ge={class:"v-col-12 v-col-md-3 py-0 mb-2"},Je={class:"v-col-12 v-col-md-3 py-0 mb-2"},Qe={class:"v-col-12 v-col-md-3 py-0 mb-2"},Ze={class:"v-col-12 py-0"},Xe={class:"v-col-12 pt-0"},et={class:"v-col-12 py-0"},tt={class:"v-col-12 py-0"},lt={class:"v-col-12 py-0"},at={class:"v-col-12 py-0 hidden hide",hidden:""},it={class:"v-col-12 py-0"},st={key:0,class:"v-col-12 d-flex justify-end"},nt={key:0,class:"v-col-12 v-col-md-4 bg-grey-lighten-4"},ut=a("div",{class:"v-col-12 px-1"},p("Review"),-1),ot={class:"v-col-12 py-0 px-1 mt-3 mb-3 text-body-2"},rt={class:"v-col-12 v-col-md-12 py-0 px-1"},dt={class:"v-col-12 v-col-md-6 py-0 px-1"},vt={class:"v-col-12 v-col-md-6 py-0 px-1 mb-3"},ct={class:"v-col-12 v-col-md-12 py-0 px-1"},mt={class:"v-col-12 py-0 px-1 mt-3 mb-3 text-body-2"},pt={class:"v-col-12 v-col-md-12 py-0 px-1"},gt={class:"v-col-md-4 v-col-12 py-0 px-1"},yt={class:"v-col-md-8 v-col-12 py-0 px-1"},ft={class:"v-col-12 py-5 px-1 text-center"},_t={class:"v-col-12 d-flex justify-end justify-center"},ht={__name:"KpiDialog",props:{createdKpiTitle:{type:Array,default:[]},kpiOptions:{type:Object,default:null},submitButton:{type:Boolean,default:!0},industryList:{type:Object,default:null},remainWeightage:{type:Number,default:70},measuresList:{type:Object,default:null},finalReview:{type:Boolean,default:!1}},emits:["savedResponse"],setup(R,{emit:N}){const w=R,W=c({}),k=c(["min","max"]),Z=c([]),h=c(["5%","10%","15%","20%","25%","30%"]),L=c(null),e=c({}),o=c({measures:null}),T=c([]),O=H(()=>T.value.filter(u=>!w.createdKpiTitle.includes(u.title))),te=c([]),B=c(""),M=c(""),S=c(""),D=c(""),m=c(""),y=c(""),I=c(!1),$=c(!0),V=c([]),ae=()=>{I.value=!0,e.value.data=o.value,e.value.industryTitle=y.value,setTimeout(()=>{I.value=!1,e.value.dialog=!1,N("savedResponse",e.value)},1200),B.value=w.kpiOptions.data.industry},se=()=>{e.value.dialog=!1,(e.value.action=="edit"||e.value.action=="review")&&(B.value=w.kpiOptions.data.industry,M.value=w.kpiOptions.data.title)},ne=()=>{w.finalReview.isFinal?e.value.state="final":e.value.state="mid",ae()},ue=u=>{D.value="",S.value="";let t=o.value.target/2;u.data.achievement_midyear&&(o.value.target_type=="max"?S.value=(t-u.data.achievement_midyear).toFixed(2):S.value=(u.data.achievement_midyear-t).toFixed(2),o.value.measures.includes("%")?(D.value=o.value.target,S.value=o.value.target-u.data.achievement_midyear):D.value=o.value.target-u.data.achievement_midyear)},ce=u=>{let t=u.data.target;u.data.revised_annual_target&&(t=u.data.revised_annual_target);let i=0;u.data.achievement_yearend&&(o.value.target_type=="max"?i=parseFloat(t/u.data.achievement_yearend).toFixed(2):i=parseFloat(u.data.achievement_yearend/t).toFixed(2),i>=125?m.value="Role Model":i>=110&&i<=124.99?m.value="Excellent":i>=95&&i<=109.99?m.value="Fully Successful":i>=70&&i<=94.99?m.value="Partially Successful":m.value="Unsuccessful")};A(()=>w.kpiOptions,u=>{I.value=!1,te.value=w.industryList,o.value=Object.assign({},u.data),e.value=Object.assign({},u),ue(u),ce(u),e.value.action=="edit"||e.value.action=="review"||e.value.action=="readonly"?(B.value=u.data.industry,M.value=u.data.title,L.value=u.data.weightage,$.value=!1):(B.value=null,M.value=null,L.value=null,$.value=!0)});const b=c([u=>u&&!isNaN(u)]);A(()=>o.value.achievement_midyear,u=>{D.value="",S.value="";let t=o.value.target/2,i="";o.value.measures.includes("%")&&(i="%"),u&&(o.value.target_type=="max"?S.value=(t-u).toFixed(2)+i:S.value=(u-t).toFixed(2)+i,o.value.measures.includes("%")?(D.value=o.value.target,S.value=o.value.target-u):D.value=o.value.target-u)}),A(()=>o.value.achievement_yearend,u=>{m.value="";let t=o.value.target;o.value.revised_annual_target&&(t=o.value.revised_annual_target);let i=0;u&&(o.value.target_type=="max"?i=(t/u*100).toFixed(2):i=(u/t*100).toFixed(2),i>=125?m.value="Role Model":i>=110&&i<=124.99?m.value="Excellent":i>=95&&i<=109.99?m.value="Fully Successful":i>=70&&i<=94.99?m.value="Partially Successful":m.value="Unsuccessful")}),A(()=>B.value,u=>{T.value=[],Z.value=w.measuresList,e.value.action=="add"?($.value=!0,o.value={},M.value=null,u&&(V.value.push("industry"),G(),y.value=u.title,te.value.map(t=>{t.id==u.id&&(T.value=t.kpis)}))):(V.value.push("industry"),$.value=!1)}),A(()=>M.value,u=>{if(e.value.action=="add"){o.value={};let t=T.value.filter(i=>i.id==u);t&&t.length>0&&(o.value=t[0],$.value=!1,V.value.push("kpi"),G())}else V.value.push("kpi")}),A(()=>o.value.weightage,u=>{let t=!1;if(W.value={status:!1,type:"info",text:""},!isNaN(u)||u==null||u==null)t=!1;else if(e.value.action=="add")parseInt(u)>w.remainWeightage?(t=!1,W.value={status:!0,type:"error",text:"Weightage is over the limit!"}):t=!0;else{let i=parseInt(w.remainWeightage)+parseInt(L.value)-parseInt(u);parseInt(i)<0?(t=!1,W.value={status:!0,type:"error",text:"Weightage is over the limit!"}):L.value>parseInt(u)||parseInt(i)>=0?t=!0:t=!1}t?(V.value.push("weightage"),G()):Y("weightage")});const G=()=>{V.value=V.value.filter((u,t)=>V.value.indexOf(u)===t)},Y=u=>{const t=V.value.indexOf(u);t>-1&&V.value.splice(t,1)};return A(()=>o.value.target,u=>{u?(V.value.push("target"),G()):Y("target")}),A(()=>o.value.measures,u=>{u?(V.value.push("measures"),G()):Y("measures")}),A(()=>o.value.target_type,u=>{V.value.push("target_type"),G(),u=="min"?o.value.evaluation_pattern='<span style="color:green">Positive Ranking = Exceeding the Target</span> <br/><span style="color:red">Negative Ranking = Falling short of the Target</span>':u=="max"?o.value.evaluation_pattern='<span style="color:green">Positive Ranking = Falling short of the Target</span> <br/><span style="color:red">Negative Ranking = Exceeding the Target</span>':(Y("target_type"),o.value.evaluation_pattern="")}),(u,t)=>(v(),F(ie,null,[s(Ve,{modelValue:e.value.dialog,"onUpdate:modelValue":t[23]||(t[23]=i=>e.value.dialog=i),width:"100%","max-width":`${e.value.is_review==!0?"1240":"900"} `,persistent:""},{default:r(()=>[s(q,{class:"rounded-lg"},{default:r(()=>[s(C,{class:"ma-0 pa-0"},{default:r(()=>[a("div",{class:z(`v-col-12 ${e.value.is_review==!0?"v-col-md-8":""} px-4`)},[s(C,null,{default:r(()=>[a("div",Ne,p(e.value.title),1),a("div",Ye,[e.value.action=="add"?(v(),g(ve,{key:0,modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=i=>B.value=i),items:R.industryList,"item-title":"title","item-value":"title","hide-details":"","return-object":"",variant:"outlined",density:"compact",label:"Select Industry*"},null,8,["modelValue","items"])):(v(),g(E,{key:1,readonly:"",modelValue:B.value,"onUpdate:modelValue":t[1]||(t[1]=i=>B.value=i),"hide-details":"",variant:"outlined",density:"compact",label:"Select Industry*",class:"bg-grey-lighten-4 mb-3"},null,8,["modelValue"]))]),a("div",He,[e.value.action=="add"?(v(),g(ve,{key:0,modelValue:M.value,"onUpdate:modelValue":t[2]||(t[2]=i=>M.value=i),items:O.value,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",label:"Select KPI*"},{selection:r(({props:i,item:K})=>[a("span",je(Ke(i)),p((K==null?void 0:K.title.substring(0,35))+"..."),17)]),item:r(({props:i,item:K})=>{var oe;return[s(Fe,Se({style:`${K.raw.profile_ecode?"background-color:#2196F3; color:#fff;":""} `},i,{title:(oe=K==null?void 0:K.raw)==null?void 0:oe.title}),null,16,["style","title"])]}),_:1},8,["modelValue","items"])):(v(),g(E,{key:1,readonly:"",modelValue:M.value,"onUpdate:modelValue":t[3]||(t[3]=i=>M.value=i),"hide-details":"",variant:"outlined",density:"compact",label:"Select KPI*",class:"bg-grey-lighten-4 mb-3"},null,8,["modelValue"]))]),a("div",qe,[!$.value&&!e.value.is_review?(v(),g(de,{key:0,modelValue:o.value.target_type,"onUpdate:modelValue":t[4]||(t[4]=i=>o.value.target_type=i),items:k.value,label:"Target Type*",variant:"outlined",density:"compact"},null,8,["modelValue","items"])):(v(),g(E,{key:1,readonly:"",modelValue:o.value.target_type,"onUpdate:modelValue":t[5]||(t[5]=i=>o.value.target_type=i),"hide-details":"",variant:"outlined",density:"compact",label:"Target Type*",class:"bg-grey-lighten-4 mb-3"},null,8,["modelValue"]))]),a("div",Ge,[s(E,{readonly:$.value||e.value.is_review,rules:b.value,type:"number",class:z(`${$.value||e.value.is_review?"bg-grey-lighten-4 mb-3":""}`),"hide-details":"",modelValue:o.value.target,"onUpdate:modelValue":t[6]||(t[6]=i=>o.value.target=i),label:"Target*",variant:"outlined",density:"compact","persistent-hint":""},null,8,["readonly","rules","class","modelValue"])]),a("div",Je,[!$.value&&!e.value.is_review?(v(),g(de,{key:0,modelValue:o.value.measures,"onUpdate:modelValue":t[7]||(t[7]=i=>o.value.measures=i),items:Z.value,label:"Measures*",variant:"outlined",density:"compact"},null,8,["modelValue","items"])):(v(),g(E,{key:1,readonly:"",modelValue:o.value.measures,"onUpdate:modelValue":t[8]||(t[8]=i=>o.value.measures=i),"hide-details":"",variant:"outlined",density:"compact",label:"Measures*",class:"bg-grey-lighten-4 mb-3"},null,8,["modelValue"]))]),a("div",Qe,[!$.value&&!e.value.is_review?(v(),g(de,{key:0,modelValue:o.value.weightage,"onUpdate:modelValue":t[9]||(t[9]=i=>o.value.weightage=i),items:h.value,label:"KPI's Weightage (%)*",variant:"outlined",density:"compact"},null,8,["modelValue","items"])):(v(),g(E,{key:1,readonly:"",modelValue:o.value.weightage,"onUpdate:modelValue":t[10]||(t[10]=i=>o.value.weightage=i),"hide-details":"",variant:"outlined",density:"compact",label:"KPI's Weightage (%)*",class:"bg-grey-lighten-4 mb-3"},null,8,["modelValue"]))]),a("div",Ze,[s(C,{class:"mx-0 mb-3"},{default:r(()=>[s(Ue,{class:"pa-3 bg-grey-lighten-4",style:{border:"1px solid #b1b1b1","border-radius":"5px","min-height":"70px"},innerHTML:o.value.evaluation_pattern},null,8,["innerHTML"])]),_:1})]),a("div",Xe,[s(ke,{class:"mx-auto"})]),a("div",et,[s(re,{"auto-grow":"",modelValue:o.value.definition,"onUpdate:modelValue":t[11]||(t[11]=i=>o.value.definition=i),readonly:$.value||e.value.action=="edit"||e.value.is_review,label:"KPI Definition*",variant:"outlined",rows:"2"},null,8,["modelValue","readonly"])]),a("div",tt,[s(re,{"auto-grow":"",modelValue:o.value.formula,"onUpdate:modelValue":t[12]||(t[12]=i=>o.value.formula=i),class:"bg-grey-lighten-4 mb-4","hide-details":"",readonly:"",label:"Calculation Formula*",variant:"outlined",rows:"2"},null,8,["modelValue"])]),a("div",lt,[s(re,{"auto-grow":"",modelValue:o.value.subordinate_measures,"onUpdate:modelValue":t[13]||(t[13]=i=>o.value.subordinate_measures=i),class:"bg-grey-lighten-4 mb-4","hide-details":"",readonly:"",label:"Subordinate Measures*",variant:"outlined",rows:"2"},null,8,["modelValue"])]),a("div",at,[s(re,{"auto-grow":"",modelValue:o.value.calculation_example,"onUpdate:modelValue":t[14]||(t[14]=i=>o.value.calculation_example=i),class:"bg-grey-lighten-4 mb-4","hide-details":"",readonly:"",label:"KPI Calculation Example*",variant:"outlined",rows:"2"},null,8,["modelValue"])]),a("div",it,[s(ke,{class:"mx-auto"})]),e.value.is_review?f("",!0):(v(),F("div",st,[s(x,{color:"primary",variant:"text",onClick:se},{default:r(()=>[_("Cancel")]),_:1}),s(x,{loading:I.value,disabled:V.value.length<6,color:"secondary",class:"ml-2 px-8",onClick:ae},{default:r(()=>[_("save")]),_:1},8,["loading","disabled"])]))]),_:1})],2),e.value.is_review?(v(),F("div",nt,[R.finalReview.isFinal?f("",!0):(v(),g(C,{key:0,class:"px-3"},{default:r(()=>[ut,a("div",ot,p(e.value.is_regular?"Mid-year Achievement":"First Review Achievement"),1),a("div",rt,[s(E,{type:"number",readonly:R.finalReview.isFinal||e.value.action=="readonly","hide-details":"",class:z(`${R.finalReview.isFinal||e.value.action=="readonly"?"bg-grey-lighten-2":""} mb-4`),modelValue:o.value.achievement_midyear,"onUpdate:modelValue":t[15]||(t[15]=i=>o.value.achievement_midyear=i),label:"Achievement*",variant:"outlined",density:"compact","persistent-hint":""},null,8,["readonly","class","modelValue"])]),a("div",dt,[s(E,{readonly:"",modelValue:S.value,"onUpdate:modelValue":t[16]||(t[16]=i=>S.value=i),label:"Target Variation",class:z(`${S.value&&parseFloat(S.value)>=0?"text-success":"text-red"} bg-grey-lighten-2`),"hide-details":"",variant:"outlined",density:"compact","persistent-hint":""},null,8,["modelValue","class"])]),a("div",vt,[s(E,{readonly:"",modelValue:D.value,"onUpdate:modelValue":t[17]||(t[17]=i=>D.value=i),label:"Remainder Annual Target",class:"bg-grey-lighten-2","hide-details":"",variant:"outlined",density:"compact","persistent-hint":""},null,8,["modelValue"])]),a("div",ct,[s(E,{type:"number",readonly:R.finalReview.isFinal||e.value.action=="readonly","hide-details":"",class:z(`${R.finalReview.isFinal||e.value.action=="readonly"?"bg-grey-lighten-2":""} mb-4`),modelValue:o.value.revised_annual_target,"onUpdate:modelValue":t[18]||(t[18]=i=>o.value.revised_annual_target=i),label:`${e.value.is_regular?"Revised Annual Target":"Revised Probation Target"}`,variant:"outlined",density:"compact","persistent-hint":""},null,8,["readonly","class","modelValue","label"])])]),_:1})),R.finalReview.isFinal||e.value.action=="readonly"?(v(),g(C,{key:1,class:"px-3"},{default:r(()=>[a("div",mt,p(e.value.is_regular?"Year-End Achievement":"Final Review Achievement"),1),a("div",pt,[e.value.action!="readonly"?(v(),g(E,{key:0,type:"number",readonly:"","hide-details":"",class:"bg-grey-lighten-2 mb-4",modelValue:o.value.revised_annual_target,"onUpdate:modelValue":t[19]||(t[19]=i=>o.value.revised_annual_target=i),label:`${e.value.is_regular?"Revised Annual Target":"Revised Probation Target"}`,variant:"outlined",density:"compact","persistent-hint":""},null,8,["modelValue","label"])):f("",!0)]),a("div",gt,[e.value.is_review?(v(),g(E,{key:0,readonly:"",modelValue:o.value.target_type,"onUpdate:modelValue":t[20]||(t[20]=i=>o.value.target_type=i),"hide-details":"",variant:"outlined",density:"compact",label:"Target Type*",class:"bg-grey-lighten-2 mb-3"},null,8,["modelValue"])):f("",!0)]),a("div",yt,[s(E,{modelValue:o.value.achievement_yearend,"onUpdate:modelValue":t[21]||(t[21]=i=>o.value.achievement_yearend=i),readonly:e.value.action=="readonly","hide-details":"",class:z(`${e.value.action=="readonly"?"bg-grey-lighten-2":""} mb-4`),label:"Total Achievement*",variant:"outlined",density:"compact","persistent-hint":""},null,8,["modelValue","readonly","class"])]),a("div",ft,[a("h3",{class:z(`${m.value&&m.value=="Unsuccessful"?"text-red":"text-success"}`)},p(m.value),3)])]),_:1})):f("",!0),s(C,null,{default:r(()=>[a("div",_t,[s(x,{class:"bg-grey-lighten-2 text-primary",variant:"text",onClick:t[22]||(t[22]=i=>e.value.dialog=!1)},{default:r(()=>[_("Cancel")]),_:1}),e.value.action!="readonly"&&w.submitButton&&R.finalReview.saveBtn?(v(),g(x,{key:0,loading:I.value,color:"secondary",class:"ml-2",onClick:ne},{default:r(()=>[_("Save")]),_:1},8,["loading"])):f("",!0)])]),_:1})])):f("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"]),s(Ce,{options:W.value},null,8,["options"])],64))}},xt={class:"v-col-12"},bt={class:"v-col-12 py-0"},wt={class:"v-col-12 py-0"},kt={class:"v-col-12 py-0"},Vt={key:0,class:"v-col-12 d-flex justify-end"},Ct={key:0,class:"v-col-12 v-col-md-4 bg-grey-lighten-4"},Rt={class:"v-col-12 py-0 px-1 mt-3 mb-3 text-body-2"},Tt={class:"v-col-12 py-0 px-1"},It={class:"v-col-12 py-5 mt-5"},$t={class:"v-col-12 d-flex justify-end justify-center"},Ft={__name:"EcdDialog",props:{createdKpiTitle:{type:Array,default:[]},ecdOptions:{type:Object,default:null},ecdList:{type:Object,default:null},remainWeightage:{type:Number,default:30},submitButton:{type:Boolean,default:!0},finalReview:{type:Boolean,default:!1}},emits:["savedResponse"],setup(R,{emit:N}){const w=R,W=c(null),k=c({}),Z=c([]),h=c({}),L=c(null),e=c(null),o=c(!1),T=c([{title:"5 - Skill level improved drastically & widely noticed",value:5},{title:"4 - Improvement is noticed",value:4},{title:"3 - Marginal improvement in skills",value:3},{title:"2 - Very slight Improvement",value:2},{title:"1 - No Improvement at all",value:1},{title:"0 - Didn`t attend the training",value:0}]),O=c(["5%","10%","15%","20%"]),te=()=>{o.value=!0,k.value.weightage=e.value,k.value.ecd_type=w.ecdOptions.ecdType,h.value.data=k.value,setTimeout(()=>{o.value=!1,h.value.dialog=!1,N("savedResponse",h.value)},1200)},B=m=>m>5?"Skill level improved drastically & widely noticed":m>=4?"Improvement is noticed":m>=3?"Marginal improvement in skills":m>=2?"Very slight Improvement":m>=1?"No Improvement at all":"Didn`t attend the training";A(()=>w.ecdOptions,m=>{k.value=Object.assign({},m.data),Z.value=w.ecdList.filter(y=>y.ecd_type==m.ecdType||y.ecd_type=="both"),h.value=Object.assign({},m),h.value.action=="edit"||h.value.action=="review"||h.value.action=="readonly"?(W.value=m.data.weightage,L.value=m.data.title,e.value=m.data.weightage):(W.value=null,L.value=null,e.value=null)});const M=()=>{w.finalReview.isFinal?h.value.state="final":h.value.state="mid",te()};A(()=>L.value,m=>{h.value.action=="add"&&(k.value={},k.value=m)});const S=c({}),D=c(!1);return A(()=>e.value,m=>{if(S.value={status:!1,type:"info",text:""},!isNaN(m)||m==null||m==null)D.value=!1;else if(h.value.action=="add")parseInt(m)>w.remainWeightage?(D.value=!1,S.value={status:!0,type:"error",text:"Weightage is over the limit!"}):D.value=!0;else{let y=parseInt(w.remainWeightage)+parseInt(W.value)-parseInt(m);parseInt(y)<0?(D.value=!1,S.value={status:!0,type:"error",text:"Weightage is over the limit!"}):W.value>parseInt(m)||parseInt(y)>=0?D.value=!0:D.value=!1}}),(m,y)=>(v(),F(ie,null,[s(Ve,{modelValue:h.value.dialog,"onUpdate:modelValue":y[5]||(y[5]=I=>h.value.dialog=I),width:"100%","max-width":`${R.ecdOptions.is_review==!0?"1240":"700"} `,persistent:""},{default:r(()=>[s(q,{class:"rounded-lg",minHeight:"300"},{default:r(()=>[s(C,{class:"ma-0 pa-0"},{default:r(()=>[a("div",{class:z(`v-col-12 ${R.ecdOptions.is_review==!0?"v-col-md-8":""} px-4`)},[s(C,null,{default:r(()=>[a("div",xt,p(h.value.title),1),a("div",bt,[s(ve,{modelValue:L.value,"onUpdate:modelValue":y[0]||(y[0]=I=>L.value=I),items:Z.value,"item-title":"title","item-value":"id","return-object":"",variant:"outlined",density:"compact",label:"Select *"},{item:r(({props:I,item:$})=>{var V;return[s(Fe,Se({style:`${$.raw.profile_ecode?"background-color:#2196F3; color:#fff;":""} `},I,{title:(V=$==null?void 0:$.raw)==null?void 0:V.title}),null,16,["style","title"])]}),_:1},8,["modelValue","items"])]),a("div",wt,[s(de,{modelValue:e.value,"onUpdate:modelValue":y[1]||(y[1]=I=>e.value=I),items:O.value,label:"Development Weightage (%)*",variant:"outlined",density:"compact"},null,8,["modelValue","items"])]),a("div",kt,[s(ke,{class:"mx-auto"})]),h.value.is_review?f("",!0):(v(),F("div",Vt,[s(x,{color:"primary",variant:"text",onClick:y[2]||(y[2]=I=>h.value.dialog=!1)},{default:r(()=>[_("Cancel")]),_:1}),s(x,{disabled:!D.value,loading:o.value,color:"secondary",class:"ml-2 px-8",onClick:te},{default:r(()=>[_("save")]),_:1},8,["disabled","loading"])]))]),_:1})],2),h.value.is_review?(v(),F("div",Ct,[R.finalReview.isFinal?(v(),g(C,{key:0,class:"px-3"},{default:r(()=>[a("div",Rt,p(h.value.is_regular?"Year-End Achievement":"Final Review Achievement"),1),a("div",Tt,[s(ve,{modelValue:k.value.achievement_yearend,"onUpdate:modelValue":y[3]||(y[3]=I=>k.value.achievement_yearend=I),items:T.value,"item-title":"title","item-value":"value",variant:"outlined",density:"compact",label:"Select *"},null,8,["modelValue","items"])])]),_:1})):(v(),g(C,{key:1},{default:r(()=>[a("div",It,[a("h3",{class:z(`${k.value.achievement_yearend>=1?"text-success":"text-error"} text-center`)},p(k.value.achievement_yearend?B(k.value.achievement_yearend):""),3)])]),_:1})),s(C,{class:"pb-4"},{default:r(()=>[a("div",$t,[s(x,{class:"bg-grey-lighten-2 text-primary",variant:"text",onClick:y[4]||(y[4]=I=>h.value.dialog=!1)},{default:r(()=>[_("Cancel")]),_:1}),h.value.action!="readonly"&&w.submitButton&&R.finalReview.saveBtn?(v(),g(x,{key:0,loading:o.value,color:"secondary",class:"ml-2",onClick:M},{default:r(()=>[_("Submit")]),_:1},8,["loading"])):f("",!0)])]),_:1})])):f("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","max-width"]),s(Ce,{options:S.value},null,8,["options"])],64))}};const St={class:"v-col-12 v-col-md-2"},Dt={class:"v-col-12 v-col-md-2"},Pt={class:"v-col-12"},Ot={class:"d-flex align-center px-3"},jt={key:1,class:"ml-auto text-h6"},Kt={key:1,class:"text-uppercase text-primary"},Ut={key:2,class:"text-uppercase text-center",style:{display:"block !important",width:"100%"}},At={key:3,class:"text-uppercase text-center"},Bt={key:4,class:"ml-auto text-body-1"},Mt={class:"v-col-12 pb-0"},Et={class:"v-col-12"},Lt={class:"text-right",style:{position:"absolute",top:"4px",right:"4px"}},Wt={class:"v-col-12 pb-0 d-flex justify-space-between"},zt=a("div",{class:"text-grey text-caption"},"KPI",-1),Nt={class:"text-primary text-body-1"},Yt={class:"v-col-3"},Ht=a("div",{class:"text-grey text-caption"},"Industry",-1),qt={class:"text-primary text-body-1"},Gt={class:"v-col-3"},Jt={class:"text-grey text-caption"},Qt={class:"text-primary text-body-1"},Zt={class:"v-col-3"},Xt=a("div",{class:"text-grey text-caption"},"Measure",-1),el={class:"text-primary text-body-1"},tl={class:"v-col-3"},ll={class:"text-grey text-caption"},al={class:"text-primary text-body-1"},il={key:1,class:"v-col-12 pb-0 text-center"},sl={class:"v-col-md-6 v-col-12 pb-0"},nl={key:1},ul={class:"v-col-md-6 v-col-12 pb-0"},ol={key:1},rl={class:"v-col-md-6 v-col-12 pb-2"},dl={class:"text-right",style:{position:"absolute",top:"4px",right:"4px"}},vl={class:"v-col-12 pb-0 d-flex justify-space-between"},cl=a("div",{class:"text-grey text-caption"},"Training",-1),ml={class:"text-primary text-body-1"},pl={class:"v-col-3"},gl={class:"text-grey text-caption"},yl={class:"text-primary text-body-1"},fl={class:"v-col-3"},_l=a("div",{class:"text-grey text-caption"},"Type",-1),hl={class:"text-primary text-body-1"},xl={class:"v-col-md-6 v-col-12 pb-0"},bl={class:"text-right",style:{position:"absolute",top:"4px",right:"4px"}},wl={class:"v-col-12 pb-0 d-flex justify-space-between"},kl=a("div",{class:"text-grey text-caption"},"Training",-1),Vl={class:"text-primary text-body-1"},Cl={class:"v-col-3"},Rl={class:"text-grey text-caption"},Tl={class:"text-primary text-body-1"},Il={class:"v-col-3"},$l=a("div",{class:"text-grey text-caption"},"Type",-1),Fl={class:"text-primary text-body-1"},Sl={class:"pb-3 text-grey"},Dl={class:"text-primary"},Pl={class:"d-flex justify-end mt-5"},Al={__name:"KpiContent",props:{selectedEmployee:{type:Object,default:null},industryList:{type:Object,default:null},ecdList:{type:Object,default:null},submitButton:{type:Boolean,default:!0},measuresList:{type:Object,default:null}},emits:["yearchange","savedResponse","errorcheck"],setup(R,{emit:N}){const w=R,W=Ae(),k=Be(),Z=Me(),h=c({}),L=Ee(),e=c(w.selectedEmployee),o=H(()=>{let l=[];return e.value&&e.value.reviews&&e.value.reviews[0]&&e.value.reviews[0].key_review.length>0&&(l=e.value.reviews[0].key_review.map(n=>n.title)),l}),T=H(()=>!e.value||e.value&&(!e.value.reviews||e.value.reviews.length==0)?[]:e.value.reviews[0].key_review.filter(l=>l.type=="kpi")),O=H(()=>!e.value||e.value&&(!e.value.reviews||e.value.reviews.length==0)?[]:e.value.reviews[0].key_review.filter(l=>l.type=="ecd")),te=H(()=>!e.value||e.value&&(!e.value.reviews||e.value.reviews.length==0)?[]:e.value.reviews[0].key_review.filter(l=>l.type=="ecd"&&l.ecd_type=="tech")),B=H(()=>!e.value||e.value&&(!e.value.reviews||e.value.reviews.length==0)?[]:e.value.reviews[0].key_review.filter(l=>l.type=="ecd"&&l.ecd_type=="soft")),M=H(()=>{let l=0;return e.value.reviews[0].key_review.map(n=>{l=l+S(n)}),l.toFixed(2)}),S=l=>{let n=0,d=l.target;l.revised_annual_target&&(d=l.revised_annual_target);let P=0;if(l.achievement_yearend){l.target_type=="max"?P=(d/l.achievement_yearend*100).toFixed(2):P=(l.achievement_yearend/d*100).toFixed(2),P>=125?n=5:P>=110&&P<=124.99?n=4:P>=95&&P<=109.99?n=3:P>=70&&P<=94.99?n=2:n=1;let Pe=l.weightage/100,Oe=(n*Pe).toFixed(2);return parseFloat(Oe)}return null},D=l=>l>=5?"Role Model":l>=4?"Excellent":l>=3?"Fully Successful":l>=2?"Partially Successful":"Unsuccessful",m=c(!1);A(()=>w.selectedEmployee,l=>{m.value=!0,l.length>0?e.value=Object.assign({},l[0]):e.value=Object.assign({},l),k.name=="SingleTeamMember"&&ae()});const y=H(()=>L.filteredSetting(e.value.company_id)),I=c(!1),$=c(!1),V=c(!1),ae=()=>{if(e.value&&e.value.reviews&&e.value.reviews.length>0&&(e.value.reviews[0].state=="midyear"||e.value.reviews[0].state=="first_review")){let l=e.value.reviews[0].key_review.filter(d=>d.type=="kpi"&&d.achievement_midyear==null),n=!1;l&&l.length>0&&(n=!0),V.value=n,N("errorcheck",{hasError:n})}else if(e.value&&e.value.reviews&&e.value.reviews.length>0&&(e.value.reviews[0].state=="yearend"||e.value.reviews[0].state=="final_review")){let l=e.value.reviews[0].key_review.filter(d=>d.achievement_yearend==null),n=!1;l&&l.length>0&&(n=!0),V.value=n,N("errorcheck",{hasError:n})}else ne().then(()=>{V.value=$.value,N("errorcheck",{hasError:$.value})})},se=c(""),ne=async()=>{let l="",n=!1;b.value=="kpi"&&T.value.length<4&&Q("kpi")==0?(l="Invalid: Minimum 4 KPI's needed, kindly update the weightage.",n=!0):(l="Invalid: Should have 1 each, technical and soft skill, kindly update the weightage.",n=ue(n)),I.value=n,n&&(se.value=l),ce()},ue=l=>{if(Q("ecd")==0&&O.value&&O.value.length>0&&O.value.length<2)l=!0;else if(O.value.length>1){let n=[];O.value.map((d,P)=>{n.push(d.ecd_type)}),n=[...new Set(n)],Q("ecd")==0&&n.length<2&&(l=!0)}return l},ce=async()=>{let l=!1;T.value.length<4&&Q("kpi")==0&&(l=!0),l=ue(l),$.value=l},b=c("kpi"),G=l=>{b.value=l,k.name=="SingleTeamMember"&&ne()},Y=c(new Date),u=H(()=>{if(e.value&&e.value.reviews&&e.value.reviews.length>0)return!!(Z.authRole.includes("manager")&&k.name=="SingleTeamMember"&&e.value.reviews[0].state=="setting"&&(e.value.reviews[0].status=="open"||e.value.reviews[0].status=="inprogress"||e.value.reviews[0].status=="inreview"));if(k.name=="SingleTeamMember"&&y.value&&y.value.state=="setting"&&(y.value.status=="open"||y.value.status=="inprogress"))return!0;if(e.value&&e.value.is_regular==0&&k.name=="SingleTeamMember"){let l=new Date(e.value.doj);if(l.setDate(l.getDate()+parseInt(y.value.probation_kpi_setting)),l>=Y.value)return!0}return!1}),t=c({saveBtn:!1,isFinal:!1}),i=H(()=>{if(t.value={saveBtn:!1,isFinal:!1},k.name=="SingleTeamMember"&&e.value.reviews.length>0&&e.value.reviews[0].state=="yearend"&&(e.value.reviews[0].status=="submitted"||e.value.reviews[0].status=="closed"||e.value.reviews[0].status=="locked"))return t.value={saveBtn:!1,isFinal:!1},!1;if(k.name=="SingleTeamMember"&&e.value.reviews.length>0&&e.value.reviews[0].state=="yearend"&&(e.value.reviews[0].status=="open"||e.value.reviews[0].status=="inprogress"))return t.value={saveBtn:!0,isFinal:!0},!0;if(e.value&&e.value.is_regular==0&&k.name=="SingleTeamMember"){if(t.value={saveBtn:!1,isFinal:!1},y.value){let l=new Date(e.value.doj),n=new Date(e.value.doj);if(l.setDate(l.getDate()+parseInt(y.value.probation_first_review_start)),n.setDate(n.getDate()+parseInt(y.value.probation_first_review_end)),e.value.reviews[0].state=="first_review"&&(e.value.reviews[0].status=="open"||e.value.reviews[0].status=="inprogress"))return t.value={saveBtn:!0,isFinal:!1},!0;if(l<=Y.value&&n>=Y.value)return t.value={saveBtn:!0,isFinal:!1},!0;let d=new Date(e.value.doj),P=new Date(e.value.doj);if(d.setDate(d.getDate()+parseInt(y.value.probation_final_review_start)),P.setDate(P.getDate()+parseInt(y.value.probation_final_review_end)),e.value.reviews[0].state=="final_review"&&(e.value.reviews[0].status=="open"||e.value.reviews[0].status=="inprogress"))return t.value={saveBtn:!0,isFinal:!0},!0;if(d<=Y.value&&P>=Y.value)return t.value={saveBtn:!0,isFinal:!0},!0}}else if(e.value&&e.value.reviews&&e.value.reviews.length>0)return e.value.reviews[0].status=="open"||e.value.reviews[0].status=="inprogress"?t.value.saveBtn=!0:e.value.reviews[0].state=="yearend"&&(t.value.isFinal=!0),!!(Z.authRole.includes("manager")&&k.name=="SingleTeamMember"&&(e.value.reviews[0].state=="midyear"||e.value.reviews[0].state=="yearend"));return!1}),K=c(new Date().getFullYear()),oe=()=>{const l=W.resolve({path:"/print/kpi/"+K.value+"/"+e.value.username,params:{year:K.value},query:{print:1}});window.open(l.href,"_blank")};A(K,async(l,n)=>{N("yearchange",l)});const X=c({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),J=c({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),me=async(l,n)=>{if(Q(b.value)<=0)h.value={status:!0,type:"error",text:"Denied: You've reached the weightage limit."};else if(l=="kpi")T.value.length>5?h.value={status:!0,type:"error",text:"Denied: Max of 6 KPI only. Minimum is 4 KPI"}:X.value={title:"Add KPI ",data:{},dialog:!0,type:l,action:"add",is_review:!1};else{let d="Identify Technical Skill Development";n=="soft"&&(d="Identify Behavioral Program"),J.value={...J.value,title:d,data:{},dialog:!0,type:l,ecdType:n,action:"add",is_review:!1}}},pe=async(l,n="kpi",d)=>{n=="kpi"?X.value={...X.value,title:"Edit KPI ",data:Object.assign({},l),dialog:!0,type:n,action:"edit",is_review:!1}:J.value={...J.value,title:"Edit ECD ",data:Object.assign({},l),dialog:!0,type:n,action:"edit",ecdType:d,is_review:!1}},ge=async(l,n="kpi")=>{n=="kpi"&&(X.value={...X.value,title:n.toUpperCase(),data:Object.assign({},l),dialog:!0,type:n,action:"readonly",is_review:!0,state:e.value.reviews[0].state,is_regular:e.value.is_regular}),n=="ecd"&&(J.value={...J.value,title:n.toUpperCase(),data:Object.assign({},l),dialog:!0,type:n,action:"readonly",is_review:!0,is_regular:e.value.is_regular})},ye=async(l,n="kpi")=>{n=="kpi"&&(X.value={...X.value,title:n.toUpperCase(),data:Object.assign({},l),dialog:!0,type:n,action:"review",is_review:!0,state:e.value.reviews[0].state,is_regular:e.value.is_regular}),n=="ecd"&&(J.value={...J.value,title:n.toUpperCase(),data:Object.assign({},l),dialog:!0,type:n,action:"review",is_review:!0,is_regular:e.value.is_regular})},Re=l=>{let n={reviewID:e.value.reviews[0].id,data:l,industryTitle:l.industryTitle,state:l.state};ae(),N("savedResponse",n)},ee=c({data:{},dialog:!1,loading:!1}),fe=async l=>{ee.value={...ee.value,data:Object.assign({},l),dialog:!0}},De=async()=>{let l=ee.value.data;ee.value.dialog=!1,N("removeKPI",l)},Q=l=>{let n=70;return e.value&&e.value.is_regular==0&&(n=100),l=="ecd"?(n=30,O.value&&O.value.length>0&&O.value.map((d,P)=>{n-=d.weightage})):T.value&&T.value.length>0&&T.value.map((d,P)=>{n-=d.weightage}),n};return(l,n)=>(v(),g(C,null,{default:r(()=>[a("div",St,[s(j(ze),{modelValue:K.value,"onUpdate:modelValue":n[0]||(n[0]=d=>K.value=d),"year-picker":"",class:"pms-date-picker"},null,8,["modelValue"])]),a("div",Dt,[e.value&&e.value.reviews&&e.value.reviews.length>0&&e.value.reviews[0].key_review.length>0?(v(),g(x,{key:0,onClick:oe,color:"white",class:"text-capitalize text-md-caption text-lg-body-2"},{default:r(()=>[_("View/Print"),s(U,{icon:j(Le),class:"ml-1"},null,8,["icon"])]),_:1})):f("",!0)]),a("div",Pt,[a("div",Ot,[s(q,{onClick:n[1]||(n[1]=()=>G("kpi")),flat:"",class:z(`
          ${b.value=="kpi"?"":"bg-grey-darken-3 text-white"}
          d-flex align-center justify-center px-3 text-center pms-tab`)},{default:r(()=>[_(" KPI "+p(T.value?"("+T.value.length+")":"(0)"),1)]),_:1},8,["class"]),e.value&&e.value.is_regular?(v(),g(q,{key:0,onClick:n[2]||(n[2]=()=>G("ecd")),flat:"",class:z(`${b.value=="ecd"?"":"bg-grey-darken-3 text-white"} d-flex align-center justify-center px-3 text-caption text-center pms-tab`)},{default:r(()=>[_(" Employee Capability Development "+p("("+O.value.length+")"),1)]),_:1},8,["class"])):f("",!0),e.value&&e.value.reviews&&e.value.reviews.length>0&&e.value.reviews[0].state=="yearend"&&!V.value&&(e.value.reviews[0].status=="submitted"||e.value.reviews[0].status=="inprogress")?(v(),F("div",jt," Rate: "+p(D(M.value)),1)):f("",!0)]),s(q,{flat:""},{default:r(()=>[s(Te,{class:"px-5 py-5 d-flex align-center"},{default:r(()=>[u.value&&b.value=="kpi"?(v(),g(x,{key:0,onClick:n[3]||(n[3]=()=>me(b.value)),density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:r(()=>[s(U,{size:"small",icon:j(he)},null,8,["icon"])]),_:1})):f("",!0),b.value=="kpi"&&T.value&&T.value.length>0||b.value=="ecd"&&O.value&&O.value.length>0?(v(),F("div",Kt,p(b.value=="ecd"?"Employee Capability Development":b.value)+" List ",1)):u.value?(v(),F("div",At,p(b.value=="ecd"?"Employee Capability Development":e.value.is_regular?b.value:"Probation KPI")+" List ",1)):(v(),F("div",Ut,p(b.value)+" not set ",1)),u.value&&Q(b.value)>0?(v(),F("div",Bt,"Remaining "+p(b.value.toUpperCase())+" weightage: "+p(Q(b.value))+"%",1)):f("",!0)]),_:1}),s(le,{class:"px-5 pb-10"},{default:r(()=>[I.value?(v(),g(C,{key:0,class:"mb-2"},{default:r(()=>[a("div",Mt,[s(q,{class:"rounded-lg",style:{border:"2px solid red"}},{default:r(()=>[s(le,null,{default:r(()=>[s(C,null,{default:r(()=>[a("div",Et,[s(U,{size:"large",color:"red",class:"mr-1",icon:j(We)},null,8,["icon"]),_(" "+p(se.value),1)])]),_:1})]),_:1})]),_:1})])]),_:1})):f("",!0),Ie(s(C,{class:"mt-3"},{default:r(()=>[T.value&&T.value.length>0?(v(!0),F(ie,{key:0},_e(T.value,d=>(v(),F("div",{class:"v-col-12 pb-0",key:d.id},[s(q,{class:"rounded-lg content-card"},{default:r(()=>[s(le,null,{default:r(()=>[a("div",Lt,[!i.value&&m.value?(v(),g(x,{key:0,onClick:()=>ge(d,"kpi"),density:"compact",color:"primary",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_(" View"),s(U,{size:"small",icon:j(xe),class:"ml-1"},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0),i.value?(v(),g(x,{key:1,color:"secondary",class:"rounded-xl px-5",size:"small",onClick:()=>ye(d,"kpi")},{default:r(()=>[_(p(t.value.isFinal&&d.achievement_yearend||!t.value.isFinal&&d.achievement_midyear?"Reviewed":"Review"),1)]),_:2},1032,["onClick"])):f("",!0),u.value?(v(),g(x,{key:2,onClick:()=>pe(d,"kpi"),density:"compact",color:"teal",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_("Edit"),s(U,{size:"small",class:"ml-1",icon:j(be)},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0),u.value?(v(),g(x,{key:3,onClick:()=>fe(d),density:"compact",color:"error",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_("Delete"),s(U,{size:"small",class:"ml-1",icon:j(we)},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0)]),s(C,null,{default:r(()=>[a("div",Wt,[a("div",null,[zt,a("div",Nt,p(d.title),1)])]),a("div",Yt,[Ht,a("div",qt,p(d.industry),1)]),a("div",Gt,[a("div",Jt,"Target ("+p(d.target_type)+")",1),a("div",Qt,p(d.target),1)]),a("div",Zt,[Xt,a("div",el,p(d.measures),1)]),a("div",tl,[a("div",ll,p("KPI's Weightage(%)"),1),a("div",al,p(d.weightage)+"%",1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):(v(),F("div",il," No records yet. "))]),_:1},512),[[$e,b.value=="kpi"]]),Ie(s(C,{class:"mt-n3"},{default:r(()=>[a("div",sl,[u.value?(v(),g(x,{key:0,onClick:n[4]||(n[4]=()=>me(b.value,"tech")),density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:r(()=>[s(U,{size:"small",icon:j(he)},null,8,["icon"])]),_:1})):f("",!0),u.value?(v(),F("span",nl,"Technical Skill")):f("",!0)]),a("div",ul,[u.value?(v(),g(x,{key:0,onClick:n[5]||(n[5]=()=>me(b.value,"soft")),density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:r(()=>[s(U,{size:"small",icon:j(he)},null,8,["icon"])]),_:1})):f("",!0),_(),u.value?(v(),F("span",ol,"Soft Skill")):f("",!0)]),a("div",rl,[s(C,null,{default:r(()=>[(v(!0),F(ie,null,_e(te.value,d=>(v(),F("div",{class:"v-col-12 pb-0",key:d.id},[s(q,{class:"rounded-lg"},{default:r(()=>[s(le,null,{default:r(()=>[a("div",dl,[!i.value&&m.value?(v(),g(x,{key:0,onClick:()=>ge(d,"ecd"),density:"compact",color:"primary",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_(" View"),s(U,{size:"small",icon:j(xe),class:"ml-1"},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0),i.value&&t.value.isFinal?(v(),g(x,{key:1,color:"secondary",class:"rounded-xl px-5",size:"small",onClick:()=>ye(d,"ecd")},{default:r(()=>[_(p(d.achievement_yearend?"Reviewed":"Review"),1)]),_:2},1032,["onClick"])):f("",!0),u.value?(v(),g(x,{key:2,onClick:()=>pe(d,"ecd","tech"),density:"compact",color:"teal",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_("Edit"),s(U,{size:"small",class:"ml-1",icon:j(be)},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0),u.value?(v(),g(x,{key:3,onClick:()=>fe(d),density:"compact",color:"error",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_("Delete"),s(U,{size:"small",class:"ml-1",icon:j(we)},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0)]),s(C,null,{default:r(()=>[a("div",vl,[a("div",null,[cl,a("div",ml,p(d.title),1)])]),a("div",pl,[a("div",gl,p("KPI's Weightage(%)"),1),a("div",yl,p(d.weightage),1)]),a("div",fl,[_l,a("div",hl,p(d.ecd_type),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),a("div",xl,[s(C,null,{default:r(()=>[(v(!0),F(ie,null,_e(B.value,d=>(v(),F("div",{class:"v-col-12 pb-0",key:d.id},[s(q,{class:"rounded-lg"},{default:r(()=>[s(le,null,{default:r(()=>[a("div",bl,[!i.value&&m.value?(v(),g(x,{key:0,onClick:()=>ge(d,"ecd"),density:"compact",color:"primary",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_(" View"),s(U,{size:"small",icon:j(xe),class:"ml-1"},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0),i.value&&t.value.isFinal?(v(),g(x,{key:1,color:"secondary",class:"rounded-xl px-5",size:"small",onClick:()=>ye(d,"ecd")},{default:r(()=>[_(p(d.achievement_yearend?"Reviewed":"Review"),1)]),_:2},1032,["onClick"])):f("",!0),u.value?(v(),g(x,{key:2,onClick:()=>pe(d,"ecd","soft"),density:"compact",color:"teal",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_("Edit"),s(U,{size:"small",class:"ml-1",icon:j(be)},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0),u.value?(v(),g(x,{key:3,onClick:()=>fe(d),density:"compact",color:"error",class:"rounded-xl elevation-2 ml-1 text-caption"},{default:r(()=>[_("Delete"),s(U,{size:"small",class:"ml-1",icon:j(we)},null,8,["icon"])]),_:2},1032,["onClick"])):f("",!0)]),s(C,null,{default:r(()=>[a("div",wl,[a("div",null,[kl,a("div",Vl,p(d.title),1)])]),a("div",Cl,[a("div",Rl,p("KPI's Weightage(%)"),1),a("div",Tl,p(d.weightage),1)]),a("div",Il,[$l,a("div",Fl,p(d.ecd_type),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})])]),_:1},512),[[$e,b.value=="ecd"]])]),_:1})]),_:1})]),s(Ve,{modelValue:ee.value.dialog,"onUpdate:modelValue":n[7]||(n[7]=d=>ee.value.dialog=d),width:"100%","max-width":"480",persistent:""},{default:r(()=>[s(q,{class:"rounded-lg"},{default:r(()=>[s(Te,{class:"pa-3"},{default:r(()=>[_("Confirm Remove")]),_:1}),s(le,{class:"px-3"},{default:r(()=>[a("div",Sl,[_(" Please confirm that you want to remove "),a("span",Dl,p("'"+ee.value.data.title.substring(0,35)+"...'"),1)]),a("div",Pl,[s(x,{class:"bg-grey-lighten-2 text-primary",variant:"text",onClick:n[6]||(n[6]=d=>ee.value.dialog=!1)},{default:r(()=>[_("Cancel")]),_:1}),s(x,{color:"primary",class:"ml-2",onClick:De},{default:r(()=>[_("Remove")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ht,{"created-kpi-title":o.value,"final-review":t.value,"measures-list":R.measuresList,"kpi-options":X.value,"remain-weightage":Q(b.value),"industry-list":R.industryList,"submit-button":w.submitButton,onSavedResponse:Re},null,8,["created-kpi-title","final-review","measures-list","kpi-options","remain-weightage","industry-list","submit-button"]),s(Ft,{"created-kpi-title":o.value,"final-review":t.value,"ecd-options":J.value,"remain-weightage":Q(b.value),"ecd-list":R.ecdList,"submit-button":w.submitButton,onSavedResponse:Re},null,8,["created-kpi-title","final-review","ecd-options","remain-weightage","ecd-list","submit-button"]),s(Ce,{options:h.value},null,8,["options"])]),_:1}))}};export{Al as _};
