import{k as H,u as M,z as N,r as _,o as l,c as v,w as a,a as e,H as D,S as U,C as E,A as m,d as o,g as j,f as t,a1 as q,$ as A,T as $,U as S,R as X,K as J,ay as Q,N as Y,l as Z,b as P,q as ee,v as te,F as B,n as K,az as ae,X as se,e as V,aA as oe,aB as R,ar as F,as as O,p as le,aC as ne,ax as ie}from"./app-d5f4601c.js";import{l as re,n as de,o as ue,p as T,q as ce,r as pe,s as me,t as he,u as _e,v as ve,w as ge,x as fe,y as ye,z as xe,A as ke,B as Ce}from"./mdi-7fd0807e.js";import{p as z}from"./printInitials-a54a9c4a.js";import{a as Pe,b as we}from"./sacntumApi-2bb74074.js";import{_ as Se}from"./_plugin-vue_export-helper-c27b6911.js";const Ve={class:"d-flex align-center pa-3"},Le={class:"text-body-2"},be={class:"text-body-1"},Ae={class:"text-caption"},Ie={class:"pa-3"},G={__name:"IconMenuAccount",props:{color:{type:String,default:"grey-darken-3"}},setup(I){const y=I,r=H(),u=M(),c=N(),p=_(!1),w=h=>{p.value=!1,c.push({path:h}).catch(d=>{})},g=_(!1),L=async()=>{let h={key:u.token};await axios.post("/client/removekey",h).then(()=>{u.logout().then(()=>{g.value=!1,c.push({path:"/login"}),localStorage.removeItem("authClient")})})},b=async()=>{let h={username:u.profile.ecode};return await Pe.post("/api/sanctumlogout",h)},x=async()=>{g.value=!0,b().then(()=>{r.setPageLoading(!0,"logging out"),L().then(()=>{r.setPageLoading(!1,"logging out")})}).catch(h=>{g.value=!1,r.setPageLoading(!1,"logging out"),console.log("error while trying to logout to server",h)})};return(h,d)=>(l(),v(X,{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=n=>p.value=n),"close-on-content-click":!1,location:"bottom"},{activator:a(({props:n})=>[e(D,U(n,{size:"36",icon:"",variant:"flat",color:y.color}),{default:a(()=>[E(m(o(z)(o(u).authProfile.display_name)),1)]),_:2},1040,["color"])]),default:a(()=>[e(j,{"min-width":"300",class:"rounded-lg mt-1"},{default:a(()=>[t("div",Ve,[e(q,{color:"grey-lighten-3",size:36,class:"d-flex align-center justify-center mr-3",style:{cursor:"pointer"}},{default:a(()=>[t("div",Le,m(o(z)(o(u).authProfile.display_name)),1)]),_:1}),t("div",null,[t("div",be,m(o(u).authProfile.display_name),1),t("div",Ae,m(o(u).authProfile.email),1)])]),e(A),e($,{nav:"",density:"compact",class:"d-flex flex-column"},{default:a(()=>[e(S,{"prepend-icon":o(re),title:"Account Settings",onClick:d[0]||(d[0]=()=>w("/account"))},null,8,["prepend-icon"])]),_:1}),e(A),t("div",Ie,[e(D,{loading:g.value,onClick:x,width:"100%",color:"primary"},{default:a(()=>[E(" Logout ")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]))}};const Be={class:"d-flex flex-column h-100"},$e=["value"],ze={key:0},Me={class:"bg-grey-darken-4",style:{"border-radius":"4px"}},Ne={style:{"font-size":"12px"}},De={class:"d-flex align-start py-3 px-3 w-100 h-100"},Ee={class:"d-flex",style:{position:"relative"}},Ke={class:"pms-avatar-wrapper"},Re={class:"d-flex align-start"},Fe={class:"text-h4 text-primary"},Oe={class:"pl-3 pt-2",style:{height:"56px",overflow:"hidden","min-width":"600px","max-width":"600px",width:"100%"}},Te={class:"text-body-2 text-capitalize"},Ge={class:"text-caption"},He={class:"d-flex"},Ue={class:"d-flex align-center"},qe={class:"ml-1 text-body-1 text-primary"},We={__name:"LoggedInLayout",setup(I){const y=_("GAG - Performance Management System"),r=_("http://127.0.0.1:8083/assets/images/fav.png"),u=_(["Home","Dashboard","Account","Teams","ManagerCustomKPI","PaginatedManagerCustomKPI","Employees","PaginatedEmployees","SingleEmployee"]),c=M(),p=N(),w=J(),g=_([{title:"Dashboard",icon:de,roles:["app_admin","normal","manager","hr_admin","hrbp"],path:"/dashboard"},{title:"Teams",icon:ue,roles:["app_admin","manager"],path:"/manager/teams"},{title:"My Custom KPI",icon:T,roles:["app_admin","manager"],path:"/manager/custom/kpi"},{title:"Employees",icon:ce,roles:["app_admin","hr_admin","hrbp"],path:"/hr/employees"},{title:"Settings",icon:pe,roles:["app_admin","hr_admin"],path:"",subs:[{title:"PMS Settings",icon:me,path:"/hr/settings/pms",roles:["app_admin"]},{title:"Custom KPIs",icon:T,path:"/hr/custom/kpi",roles:["app_admin","hr_admin"]},{title:"KPIs",icon:he,path:"/hr/master/kpi",roles:["app_admin","hr_admin"]},{title:"Industries",icon:_e,path:"/hr/industries",roles:["app_admin","hr_admin"]},{title:"Companies",icon:ve,path:"/hr/companies",roles:["app_admin","hr_admin"]},{title:"Notifications",icon:ge,path:"/admin/notifications",roles:["app_admin","hr_admin"]},{title:"Measures",icon:fe,path:"/hr/measures",roles:["app_admin","hr_admin"]},{title:"Weightage",icon:ye,path:"/hr/weightages",roles:["app_admin","hr_admin"]}]},{title:"User Settings",icon:xe,path:"/admin/users",roles:["app_admin"]}]),L=C=>{let i=[];return i=C.filter(s=>c.authRole.includes(s)),i.length>0},b=C=>{h.value=!1,p.push({path:C}).catch(i=>{})},{mobile:x}=Q(),h=_(!1),d=_(!1),n=_(!0),k=_(!1);return Y(x,async(C,i)=>{C==!0?(n.value=!1,k.value=!0):(n.value=!0,k.value=!1)}),Z(()=>{x.value==!0?(n.value=!1,k.value=!0):(n.value=!0,k.value=!1)}),(C,i)=>(l(),P("div",null,[e(oe,{rail:k.value==!0?!1:d.value,modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=s=>n.value=s),temporary:k.value,permanent:!k.value,class:"pt-4",color:"primary"},{default:a(()=>[t("div",Be,[e(S,{nav:"","prepend-avatar":r.value,class:"mb-3"},{default:a(()=>[ee(t("div",{class:"text-body-2",style:{width:"180px"}},m(y.value),513),[[te,!d.value]])]),_:1},8,["prepend-avatar"]),e(A),e($,{nav:""},{default:a(()=>[(l(!0),P(B,null,K(g.value,s=>(l(),P("div",{key:s.title,value:s.title},[L(s.roles)==!0?(l(),P("div",ze,[s.subs?(l(),v(ae,{key:0,value:s.title},{activator:a(({props:f})=>[e(S,U({nav:""},f,{"prepend-icon":s.icon,title:s.title}),null,16,["prepend-icon","title"])]),default:a(()=>[t("div",Me,[(l(!0),P(B,null,K(s.subs,(f,W)=>(l(),P(B,{key:W},[L(f.roles)==!0?(l(),v(S,{key:0,density:"compact",style:{"padding-left":"12px !important"},title:f.title,value:f.title,onClick:()=>b(f.path)},{title:a(()=>[t("div",Ne,m(f.title),1)]),prepend:a(()=>[e(se,{size:"16",icon:f.icon},null,8,["icon"])]),_:2},1032,["title","value","onClick"])):V("",!0)],64))),128))])]),_:2},1032,["value"])):(l(),v(S,{key:1,"prepend-icon":s.icon,title:s.title,value:s.title,onClick:()=>b(s.path)},null,8,["prepend-icon","title","value","onClick"]))])):V("",!0)],8,$e))),128))]),_:1}),e(A),o(x)?V("",!0):(l(),v($,{key:0,nav:"",class:"mt-auto"},{default:a(()=>[e(S,{"prepend-icon":d.value==!1?o(ke):o(Ce),title:"Collapse",onClick:i[0]||(i[0]=s=>d.value=!d.value)},null,8,["prepend-icon"])]),_:1}))])]),_:1},8,["rail","modelValue","temporary","permanent"]),u.value.includes(o(w).name)?(l(),v(O,{key:0,height:"100",color:"black",elevation:"0",style:{overflow:"visible"}},{default:a(()=>[t("div",De,[t("div",Ee,[o(x)==!0?(l(),v(R,{key:0,onClick:i[2]||(i[2]=s=>n.value=!n.value),size:"small"})):V("",!0),t("div",Ke,[t("div",Re,[e(q,{color:"grey-lighten-1",size:"90"},{default:a(()=>[t("div",Fe,m(o(z)(o(c).authProfile.display_name)),1)]),_:1}),t("div",Oe,[t("div",Te,m(o(c).authProfile.display_name)+" "+m(o(c).authProfile.ecode?" - "+o(c).authProfile.ecode:""),1),t("div",Ge,m(o(c).authProfile.email),1)])])])]),e(F),t("div",He,[e(G)])])]),_:1})):(l(),v(O,{key:1,density:"compact",color:"white",elevation:"0"},{prepend:a(()=>[t("div",Ue,[o(x)==!0?(l(),v(R,{key:0,onClick:i[3]||(i[3]=s=>n.value=!n.value),size:"small"})):V("",!0),t("div",qe,m(y.value),1)])]),default:a(()=>[e(F),e(G,{color:"grey-lighten-3"})]),_:1})),e(ne,null,{default:a(()=>[le(C.$slots,"default",{},void 0,!0)]),_:3})]))}},je=Se(We,[["__scopeId","data-v-e25b40a2"]]),et={__name:"Employee",setup(I){const y=M(),r=H(),u=N(),c=async()=>{r.setPageLoading(!0),await we(y.authToken).get("/api/checkuser").then(p=>{y.saveClientKey(p.data).then(w=>{r.setPageLoading(!1),r.setIsFromLogin(!1),r.setPmsSettings(w.data.pms_settings)})}).catch(p=>{console.log("error",p.response.status),p.response.status==401&&(localStorage.removeItem("authClient"),u.push({path:"/login"})),r.setPageLoading(!1)})};return r.isFromLogin==!1&&c(),(p,w)=>{const g=ie("router-view");return l(),P("div",null,[e(je,null,{default:a(()=>[e(g)]),_:1})])}}};export{et as default};
