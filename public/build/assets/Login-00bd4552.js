import{u as V,r,a as b,c as C,w as s,o as L,b as p,d as a,t as f,e as k,f as c,g as E,h as P,i as B,j as v,k as g,l as G}from"./app-47bd7f18.js";import{a as K}from"./sacntumApi-ff1f9b48.js";import{G as N,W as S}from"./WhiteLogo-6f1b2669.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"mx-auto px-3 text-center",style:{"z-index":"1","max-width":"400px",width:"100%","margin-top":"100px"}},A={class:"text-subtitle-1 text-white"},R={class:"text-error mt-2"},j={__name:"Login",setup(U){const n=V(),w=r("GAG - ESignature"),x=r("e-signature-cvtud"),m=b();m.authIsLoggedIn==!0&&n.push({path:"/dashboard"});const o=r(!1),t=r({login:"",password:"",url:x.value}),d=r(!1),i=r(""),h=async()=>{o.value=!0,_().then(l=>{let e="/dashboard";m.saveClientKey(l.data).then(u=>{o.value=!1,n.push({path:e})}).catch(()=>{o.value=!1})}).catch(l=>{d.value=!0,i.value="Enter Username and Password...",o.value=!1,console.log("error while trying to login to server",l)})},y=()=>{n.push({path:"reset-password"})},_=async()=>{let l={username:t.value.login,password:t.value.password,url:t.value.url};const e=await K.post("/api/sanctumlogin",l);return e.data.status==!1?(d.value=!0,i.value=e.data.message,o.value=!1,!1):e};return(l,e)=>(L(),C(N,null,{default:s(()=>[p("div",T,[a(S,{width:"100%"}),p("div",A,f(w.value),1)]),a(G,{class:"mt-8 pa-3 rounded-lg elevation-3",width:"90%","max-width":"450"},{default:s(()=>[a(k,{class:"px-5 pb-0 primary--text"},{default:s(()=>[c("Login")]),_:1}),a(E,{class:"py-4"},{default:s(()=>[a(P,{autocomplete:"off",ref:"form",onKeydown:B(h,["enter"])},{default:s(()=>[a(v,{modelValue:t.value.login,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.login=u),variant:"outlined",required:"",class:"border-radius",autocomplete:"off",label:"Enter Employee Code"},null,8,["modelValue"]),a(v,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.password=u),variant:"outlined",required:"",autocomplete:"off",label:"Enter Password",type:"password"},null,8,["modelValue"]),a(g,{onClick:h,width:"100%",color:"primary",height:"55",large:"",loading:o.value},{default:s(()=>[c("Login")]),_:1},8,["loading"]),a(g,{variant:"text",class:"mt-3",onClick:y},{default:s(()=>[c("Reset Password")]),_:1}),p("div",R,f(d.value==!0?i.value:""),1)]),_:1},8,["onKeydown"])]),_:1})]),_:1})]),_:1}))}};export{j as default};
