import{u as F,z as O,K as $,r,N as D,l as S,c as _,w as s,V as U,o as c,a,f as o,g as h,B as G,H as x,X as y,d as V,a2 as H,b as C,F as I,n as J,e as k,h as K,C as b,Q as L,i as w,A as T,G as Q,J as X,Y}from"./app-fc232221.js";import{c as q,f as W,g as Z}from"./mdi-6c0c9690.js";import{c as z}from"./clientApi-9cd075be.js";import{_ as ee}from"./PageHeader-27d36fc6.js";import{_ as ae}from"./ConfirmDialog-50f75ddc.js";import{_ as te}from"./SnackBar-1fd8bd8c.js";const le={class:"v-col-12"},se=o("div",{class:"text-primary text-capitalize"},"Measures",-1),oe=o("thead",null,[o("tr",null,[o("th",{class:"text-left text-capitalize"},"Title"),o("th",{class:"text-right text-capitalize"},"Actions")])],-1),ne={key:0},ie={class:"d-flex align-center justify-end"},ue={class:Y("v-col-12 px-4")},re={class:"v-col-12"},de={class:"v-col-12 py-0"},ce={class:"v-col-12 d-flex justify-end"},xe={__name:"Measures",setup(ve){const p=F(),P=O(),f=$(),v=r({}),d=r([]),t=r({title:"",data:{},loading:!1,dialog:!1,action:"add"}),g=r(0),i=r(f.params&&f.params.page?f.params.page:1),m=async l=>{await z(p.authToken).get("/api/hr/measures?page="+l).then(e=>{g.value=e.data.last_page,i.value=e.data.current_page,d.value=e.data.data}).catch(e=>{console.log("measures",e)})},R=async()=>{let l={id:t.value.action=="edit"?t.value.data.id:null,title:t.value.data.title};t.value.loading=!0,await z(p.authToken).post("/api/hr/measure/save",l).then(e=>{m(i.value).then(()=>{t.value.loading=!1,t.value.dialog=!1,v.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{t.value.loading=!1,console.log("measures",e),v.value={status:!0,type:"error",text:"Error while saving measure"}})},B=()=>{t.value={...t.value,title:"Add Measure",data:{},dialog:!0,action:"add"}},N=l=>{t.value={...t.value,title:"Edit "+l.title,data:Object.assign({},l),dialog:!0,action:"edit"}};D(i,(l,e)=>{l!=e&&(P.push({name:"PaginatedMeasures",params:{page:i.value}}).catch(n=>{}),m(i.value))}),S(()=>{m(i.value)});const u=r({}),M=r({}),A=l=>{M.value=Object.assign({},l),u.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+l.title+".",btnColor:"error",btnTitle:"Confirm"}},j=async()=>{await z(p.authToken).post("/api/hr/measure/remove/"+M.value.id).then(l=>{m(i.value).then(()=>{v.value={status:!0,type:"success",text:l.data.message}})}).catch(l=>{v.value={status:!0,type:"error",text:"Error while removing data"}})},E=l=>{u.value={...u.value,loading:!0},j().then(e=>{u.value={...u.value,dialog:!1,loading:!1}}).catch(e=>{u.value={...u.value,loading:!1}})};return(l,e)=>(c(),_(U,{class:"pb-16"},{default:s(()=>[a(ee,{title:"Measures"}),a(w,{class:"my-5"},{default:s(()=>[o("div",le,[a(h,{class:"rounded-lg"},{default:s(()=>[a(G,{class:"d-flex align-center"},{default:s(()=>[a(x,{onClick:B,density:"compact",size:"35",class:"rounded-xl elevation-2 mr-2"},{default:s(()=>[a(y,{size:"small",icon:V(q)},null,8,["icon"])]),_:1}),se]),_:1}),a(H,null,{default:s(()=>[oe,d.value&&d.value.length>0?(c(),C("tbody",ne,[(c(!0),C(I,null,J(d.value,n=>(c(),C("tr",{key:n.id},[o("td",null,T(n.title),1),o("td",null,[o("div",ie,[a(y,{size:"small",onClick:()=>N(n),icon:V(W),class:"mx-1"},null,8,["onClick","icon"]),a(y,{size:"small",onClick:()=>A(n),icon:V(Z),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])):k("",!0)]),_:1}),d.value&&d.value.length==0?(c(),_(h,{key:0},{default:s(()=>[a(K,{class:"text-center"},{default:s(()=>[b(" No records found ")]),_:1})]),_:1})):k("",!0)]),_:1}),g.value>1?(c(),_(L,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),class:"my-4",length:g.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):k("",!0)])]),_:1}),a(X,{modelValue:t.value.dialog,"onUpdate:modelValue":e[3]||(e[3]=n=>t.value.dialog=n),width:"100%","max-width":"480px",persistent:""},{default:s(()=>[a(h,{class:"rounded-lg"},{default:s(()=>[a(w,{class:"ma-0 pa-0"},{default:s(()=>[o("div",ue,[a(w,null,{default:s(()=>[o("div",re,T(t.value.title)+" "+T(),1),o("div",de,[a(Q,{modelValue:t.value.data.title,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.data.title=n),label:"Measure*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),o("div",ce,[a(x,{color:"primary",variant:"text",onClick:e[2]||(e[2]=n=>t.value.dialog=!1)},{default:s(()=>[b("Cancel")]),_:1}),a(x,{color:"primary",loading:t.value.loading,class:"ml-2 px-8",onClick:R},{default:s(()=>[b("save")]),_:1},8,["loading"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ae,{options:u.value,onConfirm:E},null,8,["options"]),a(te,{options:v.value},null,8,["options"])]),_:1}))}};export{xe as default};
