import{a as N,u as D,r as p,o as n,c as _,w as a,d as e,k as M,p as U,f as R,t as c,n as s,l as F,b as t,ad as G,a5 as L,ae as $,af as V,ag as J,m as W,ah as q,J as Q,s as X,x as k,A as Y,B as Z,F as B,y as E,ai as ee,O as te,H as P,aj as ae,ak as j,a3 as H,a4 as K,z as oe,al as se,ac as le}from"./app-47bd7f18.js";import{f as ne,g as ie,h as re,i as ue,j as ce,k as de,l as pe,n as ve}from"./mdi-ef0a081c.js";import{a as he,b as _e}from"./sacntumApi-ff1f9b48.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";function z(C){return C?C.split(" ").slice(0,2).join(" ").split(" ").map(v=>v[0]).join("").toUpperCase():"?"}const fe={class:"d-flex align-center pa-3"},ge={class:"text-body-2"},ye={class:"text-body-1"},xe={class:"text-caption"},ke={class:"pa-3"},O={__name:"IconMenuAccount",props:{color:{type:String,default:"grey-darken-3"}},setup(C){const v=C,u=N(),w=D(),l=p(!1),b=i=>{l.value=!1,w.push({path:i}).catch(f=>{})},m=p(!1),I=async()=>{let i={key:u.token};await axios.post("/client/removekey",i).then(()=>{u.logout().then(()=>{m.value=!1,w.push({path:"/login"}),localStorage.removeItem("authClient")})})},S=async()=>{let i={username:u.profile.ecode};return await he.post("/api/sanctumlogout",i)},A=async()=>{m.value=!0,S().then(()=>{I().then(()=>{})}).catch(i=>{m.value=!1,console.log("error while trying to logout to server",i)})};return(i,f)=>(n(),_(J,{modelValue:l.value,"onUpdate:modelValue":f[1]||(f[1]=h=>l.value=h),"close-on-content-click":!1,location:"bottom"},{activator:a(({props:h})=>[e(M,U(h,{size:"36",icon:"",variant:"flat",color:v.color}),{default:a(()=>[R(c(s(z)(s(u).authProfile.display_name)),1)]),_:2},1040,["color"])]),default:a(()=>[e(F,{"min-width":"300",class:"rounded-lg mt-1"},{default:a(()=>[t("div",fe,[e(G,{color:"grey-lighten-3",size:36,class:"d-flex align-center justify-center mr-3",style:{cursor:"pointer"}},{default:a(()=>[t("div",ge,c(s(z)(s(u).authProfile.display_name)),1)]),_:1}),t("div",null,[t("div",ye,c(s(u).authProfile.display_name),1),t("div",xe,c(s(u).authProfile.email),1)])]),e(L),e($,{nav:"",density:"compact",class:"d-flex flex-column"},{default:a(()=>[e(V,{"prepend-icon":s(ne),title:"Account Settings",onClick:f[0]||(f[0]=()=>b("/account"))},null,8,["prepend-icon"])]),_:1}),e(L),t("div",ke,[e(M,{loading:m.value,onClick:A,width:"100%",color:"primary"},{default:a(()=>[R(" Logout ")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]))}};const Ce={class:"d-flex flex-column h-100"},Ve=["value"],we={key:0},be={class:"bg-grey-darken-4",style:{"border-radius":"4px"}},Pe={style:{"font-size":"12px"}},Se={class:"d-flex align-start py-3 px-3 w-100 h-100"},Ae={class:"d-flex",style:{position:"relative"}},Le={class:"pms-avatar-wrapper"},Ie={class:"d-flex align-start"},Be={class:"text-h4 text-primary"},$e={class:"pl-3 pt-2",style:{height:"56px",overflow:"hidden","min-width":"600px","max-width":"600px",width:"100%"}},ze={class:"text-body-2 text-capitalize"},Ne={class:"text-caption"},De={class:"d-flex"},Me={class:"d-flex align-center"},Re={class:"ml-1 text-body-1 text-primary"},Ee={__name:"LoggedInLayout",setup(C){const v=p("GAG - ESignature"),u=p("http://127.0.0.1:8083/assets/images/fav.png"),w=p(["Home","Dashboard","Account","Teams","ManagerCustomKPI","PaginatedManagerCustomKPI","Employees","PaginatedEmployees","SingleEmployee","Reports"]),l=N(),b=D(),m=W(),I=p([{title:"Dashboard",icon:ie,roles:["app_admin","normal","manager","hr_admin","hrbp"],path:"/dashboard"},{title:"Settings",icon:re,roles:["app_admin","hr_admin","hrbp"],path:"",subs:[{title:"Companies",icon:ue,path:"/hr/companies",roles:["app_admin","hr_admin"]},{title:"Notifications",icon:ce,path:"/admin/notifications",roles:["app_admin","hr_admin"]}]},{title:"User Settings",icon:de,path:"/admin/users",roles:["app_admin"]}]),S=x=>{let r=[];return r=x.filter(o=>l.authRole.includes(o)),r.length>0},A=x=>{f.value=!1,b.push({path:x}).catch(r=>{})},{mobile:i}=q(),f=p(!1),h=p(!1),d=p(!0),y=p(!1);return Q(i,async(x,r)=>{x==!0?(d.value=!1,y.value=!0):(d.value=!0,y.value=!1)}),X(()=>{i.value==!0?(d.value=!1,y.value=!0):(d.value=!0,y.value=!1)}),(x,r)=>(n(),k("div",null,[e(ae,{rail:y.value==!0?!1:h.value,modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=o=>d.value=o),temporary:y.value,permanent:!y.value,class:"pt-4",color:"primary"},{default:a(()=>[t("div",Ce,[e(V,{nav:"","prepend-avatar":u.value,class:"mb-3"},{default:a(()=>[Y(t("div",{class:"text-body-2",style:{width:"180px"}},c(v.value),513),[[Z,!h.value]])]),_:1},8,["prepend-avatar"]),e(L),e($,{nav:""},{default:a(()=>[(n(!0),k(B,null,E(I.value,o=>(n(),k("div",{key:o.title,value:o.title},[S(o.roles)==!0?(n(),k("div",we,[o.subs?(n(),_(ee,{key:0,value:o.title},{activator:a(({props:g})=>[e(V,U({nav:""},g,{"prepend-icon":o.icon,title:o.title}),null,16,["prepend-icon","title"])]),default:a(()=>[t("div",be,[(n(!0),k(B,null,E(o.subs,(g,T)=>(n(),k(B,{key:T},[S(g.roles)==!0?(n(),_(V,{key:0,density:"compact",style:{"padding-left":"12px !important"},title:g.title,value:g.title,onClick:()=>A(g.path)},{title:a(()=>[t("div",Pe,c(g.title),1)]),prepend:a(()=>[e(te,{size:"16",icon:g.icon},null,8,["icon"])]),_:2},1032,["title","value","onClick"])):P("",!0)],64))),128))])]),_:2},1032,["value"])):(n(),_(V,{key:1,"prepend-icon":o.icon,title:o.title,value:o.title,onClick:()=>A(o.path)},null,8,["prepend-icon","title","value","onClick"]))])):P("",!0)],8,Ve))),128))]),_:1}),e(L),s(i)?P("",!0):(n(),_($,{key:0,nav:"",class:"mt-auto"},{default:a(()=>[e(V,{"prepend-icon":h.value==!1?s(pe):s(ve),title:"Collapse",onClick:r[0]||(r[0]=o=>h.value=!h.value)},null,8,["prepend-icon"])]),_:1}))])]),_:1},8,["rail","modelValue","temporary","permanent"]),w.value.includes(s(m).name)?(n(),_(K,{key:0,height:"100",color:"black",elevation:"0",style:{overflow:"visible"}},{default:a(()=>[t("div",Se,[t("div",Ae,[s(i)==!0?(n(),_(j,{key:0,onClick:r[2]||(r[2]=o=>d.value=!d.value),size:"small"})):P("",!0),t("div",Le,[t("div",Ie,[e(G,{color:"grey-lighten-1",size:"90"},{default:a(()=>[t("div",Be,c(s(z)(s(l).authProfile.display_name)),1)]),_:1}),t("div",$e,[t("div",ze,c(s(l).authProfile.display_name)+" "+c(s(l).authProfile.ecode?" - "+s(l).authProfile.ecode:""),1),t("div",Ne,c(s(l).authProfile.email),1)])])])]),e(H),t("div",De,[e(O)])])]),_:1})):(n(),_(K,{key:1,density:"compact",color:"white",elevation:"0"},{prepend:a(()=>[t("div",Me,[s(i)==!0?(n(),_(j,{key:0,onClick:r[3]||(r[3]=o=>d.value=!d.value),size:"small"})):P("",!0),t("div",Re,c(v.value),1)])]),default:a(()=>[e(H),e(O,{color:"grey-lighten-3"})]),_:1})),e(se,null,{default:a(()=>[oe(x.$slots,"default",{},void 0,!0)]),_:3})]))}},je=me(Ee,[["__scopeId","data-v-f5aef06c"]]),Ge={__name:"Employee",setup(C){const v=N(),u=D();return(async()=>{await _e(v.authToken).get("/api/checkuser").then(l=>{v.saveClientKey(l.data).then(b=>{})}).catch(l=>{console.log("error",l.response.status),l.response.status==401&&(localStorage.removeItem("authClient"),u.push({path:"/login"}))})})(),(l,b)=>{const m=le("router-view");return n(),k("div",null,[e(je,null,{default:a(()=>[e(m)]),_:1})])}}};export{Ge as default};
