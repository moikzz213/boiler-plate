import{k as D,z as R,K as C,r as v,u as E,N as F,o as w,b as A,a as o,w as n,f as a,M as N,d as p,O as T,P as B,A as M,i as y,$ as b,G as i,c as z,C as K,H as O,e as Y}from"./app-dddcb796.js";import{c as V}from"./clientApi-75d6c792.js";import{u as j}from"./company-feb69369.js";import{e as I}from"./vue-datepicker-4f064849.js";import{_ as $}from"./SnackBar-d9b09edf.js";const G={class:"v-col-12 v-col-md-6"},H={class:"v-col-12 v-col-md-6"},L={class:"v-col-12 d-flex align-center"},q=a("div",{class:"mr-3 text-subtitle-1",style:{"min-width":"150px"}},"Regular Employee",-1),J={class:"v-col-12 py-0"},Q=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"Annual KPI Setting")],-1),W={class:"v-col-12 v-col-md-6 py-0"},X={class:"v-col-12 v-col-md-6 py-0"},Z=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"Mid-year Review")],-1),ee={class:"v-col-12 v-col-md-6 py-0"},ae={class:"v-col-12 v-col-md-6 py-0"},te=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"End-year Review")],-1),le={class:"v-col-12 v-col-md-6 py-0"},oe={class:"v-col-12 v-col-md-6 py-0"},se={class:"v-col-12 d-flex align-center"},ie=a("div",{class:"mr-3 text-subtitle-1",style:{"min-width":"150px"}}," Probation Employee ",-1),de={class:"v-col-12 py-0"},ne=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"First Review")],-1),re={class:"v-col-12 v-col-md-6 py-0"},ue={class:"v-col-12 v-col-md-6 py-0"},ve=a("div",{class:"v-col-12 pt-0"},[a("div",{class:"text-caption"},"Final Review")],-1),pe={class:"v-col-12 v-col-md-6 py-0"},ce={class:"v-col-12 v-col-md-6 py-0"},me={class:"d-flex justify-end mt-5"},Ve={__name:"PmsForm",props:{pms:{type:Object,default:{}}},setup(f){const h=f,x=D(),k=R(),c=C(),m=v({}),d=E(),S=v(new Date().getFullYear()-1),e=v({title:"Add PMS Setting",dialog:!0,data:{year:new Date().getFullYear(),company_id:null,employee_review_allowed_days:"",probation_final_review_end:"",probation_final_review_start:"",probation_first_review_end:"",probation_first_review_start:"",probation_kpi_setting:"",annual_kpi_setting_start:"",annual_kpi_setting_end:"",mid_year_review_start:"",mid_year_review_end:"",end_year_review_start:"",end_year_review_end:""},loading:!1});F(()=>h.pms,s=>{g(),e.value={...e.value,data:s}});const P=async()=>{e.value.loading=!0,await V(d.authToken).get("/hr/employees/paginated").then(s=>{e.value.loading=!1}).catch(s=>{e.value.loading=!1,console.log("getEmployees",s)})},U=async()=>{e.value.loading=!0,e.value.data.profile_ecode=d.authProfile.ecode,e.value.data.profile_id=d.authProfile.id,await V(d.authToken).post("/api/hr/pms-settings/save",e.value.data).then(s=>{e.value.loading=!1,m.value={status:!0,type:"success",text:s.data.message},x.setPmsSettings(s.data.result),s.data.profile&&s.data.profile.length>0&&d.setProfile(s.data.profile),setTimeout(()=>{c.name=="NewPms"&&k.push({name:"Pms"}).catch(t=>{})},1e3)}).catch(s=>{e.value.loading=!1,s.response.status==422&&(m.value={status:!0,type:"error",text:s.response.data.message}),console.log("err",s)})};P();const _=j(),r=v(!1),g=()=>{_.companies.length==0&&(r.value=!0,_.getCompanies(d.authToken).then(()=>{r.value=!1}))};return(s,t)=>(w(),A("div",null,[o(y,null,{default:n(()=>[a("div",G,[o(N,{disabled:p(c).name!="NewPms",modelValue:e.value.data.company_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.data.company_id=l),items:p(_).active_companies,"item-title":"title","item-value":"id",variant:"outlined",density:"compact",class:"bg-white",label:r.value?"Loading...":"Select Company","hide-details":"",loading:r.value,onFocus:g},{selection:n(({props:l,item:u})=>[a("span",T(B(l)),M(u.raw.title&&u.raw.title.length>30?u.raw.title.substring(0,30)+"...":u.raw.title)+" ",17)]),_:1},8,["disabled","modelValue","items","label","loading"])]),a("div",H,[o(p(I),{modelValue:e.value.data.year,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.data.year=l),"year-picker":"",class:"pms-date-picker",disabled:p(c).name!="NewPms"},null,8,["modelValue","disabled"])])]),_:1}),o(y,{class:"mt-6"},{default:n(()=>[a("div",L,[q,o(b)]),a("div",J,[o(i,{modelValue:e.value.data.employee_review_allowed_days,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.data.employee_review_allowed_days=l),variant:"outlined",density:"compact",class:"bg-white",label:"Employee Review Allowed (days)",type:"number"},null,8,["modelValue"])]),Q,a("div",W,[o(i,{type:"date",label:"Start Date",modelValue:e.value.data.annual_kpi_setting_start,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.data.annual_kpi_setting_start=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),a("div",X,[o(i,{type:"date",label:"End Date",modelValue:e.value.data.annual_kpi_setting_end,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.data.annual_kpi_setting_end=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),Z,a("div",ee,[o(i,{type:"date",label:"Start Date",modelValue:e.value.data.mid_year_review_start,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.data.mid_year_review_start=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),a("div",ae,[o(i,{type:"date",label:"End Date",modelValue:e.value.data.mid_year_review_end,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.data.mid_year_review_end=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),te,a("div",le,[o(i,{type:"date",label:"Start Date",modelValue:e.value.data.end_year_review_start,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.data.end_year_review_start=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])]),a("div",oe,[o(i,{type:"date",label:"End Date",modelValue:e.value.data.end_year_review_end,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.data.end_year_review_end=l),variant:"outlined",density:"compact",class:"bg-white"},null,8,["modelValue"])])]),_:1}),o(y,{class:"mt-6"},{default:n(()=>[a("div",se,[ie,o(b)]),a("div",de,[o(i,{modelValue:e.value.data.probation_kpi_setting,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.data.probation_kpi_setting=l),variant:"outlined",density:"compact",class:"bg-white",label:"Probation KPI Setting Max Allowed (days)",type:"number"},null,8,["modelValue"])]),ne,a("div",re,[o(i,{modelValue:e.value.data.probation_first_review_start,"onUpdate:modelValue":t[10]||(t[10]=l=>e.value.data.probation_first_review_start=l),variant:"outlined",density:"compact",class:"bg-white",label:"From (in days)",type:"number"},null,8,["modelValue"])]),a("div",ue,[o(i,{modelValue:e.value.data.probation_first_review_end,"onUpdate:modelValue":t[11]||(t[11]=l=>e.value.data.probation_first_review_end=l),variant:"outlined",density:"compact",class:"bg-white",label:"Up to (in days)",type:"number"},null,8,["modelValue"])]),ve,a("div",pe,[o(i,{modelValue:e.value.data.probation_final_review_start,"onUpdate:modelValue":t[12]||(t[12]=l=>e.value.data.probation_final_review_start=l),variant:"outlined",density:"compact",class:"bg-white",label:"From (in days)",type:"number"},null,8,["modelValue"])]),a("div",ce,[o(i,{modelValue:e.value.data.probation_final_review_end,"onUpdate:modelValue":t[13]||(t[13]=l=>e.value.data.probation_final_review_end=l),variant:"outlined",density:"compact",class:"bg-white",label:"Up to (in days)",type:"number"},null,8,["modelValue"])])]),_:1}),a("div",me,[e.value.data.year>=S.value?(w(),z(O,{key:0,size:"x-large",color:"secondary",loading:e.value.loading,class:"px-10",onClick:U},{default:n(()=>[K("save")]),_:1},8,["loading"])):Y("",!0)]),o($,{options:m.value},null,8,["options"])]))}};export{Ve as _};
