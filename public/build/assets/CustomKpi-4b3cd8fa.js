import{u as S,r as u,k as L,x as A,Q as B,o as m,b as x,a as l,w as c,m as D,v as T,Z as C,d as P,a3 as F,f as s,F as U,C as Q,t as I,c as k,g as V,h as Z,n as z,e as b,T as q,V as ee,i as ae}from"./app-b338f8d3.js";import{c as K}from"./clientApi-542a8e2e.js";import{c as G,f as H,g as J}from"./mdi-5e26928d.js";import{_ as W}from"./CustomKpiDialog-5257677f.js";import{_ as X}from"./ConfirmDialog-634335d5.js";import{_ as Y}from"./SnackBar-3d5835bd.js";import"./industry-1cbc517f.js";const te={class:"v-col-12"},le=s("div",{class:"text-primary text-capitalize"},"KPI List",-1),se=s("thead",null,[s("tr",null,[s("th",{class:"text-left text-capitalize"},"Title"),s("th",{class:"text-left text-capitalize"},"Industry"),s("th",{class:"text-right text-capitalize"},"Actions")])],-1),oe={class:"d-flex align-center justify-end"},ie={__name:"ManagerKpi",setup(M){const n=S(),d=u({}),p=L(),v=A(),t=u({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),f=u({data:{},loading:!1,dialog:!1}),g=u([]),h=u(!1),y=u(0),i=u(1);i.value=v.params&&v.params.page?v.params.page:1;const _=async a=>{h.value=!0,await K(n.authToken).get("/api/manager/custom/kpi/list/"+n.authProfile.ecode+"/?page="+a).then(e=>{y.value=e.data.last_page,i.value=e.data.current_page,g.value=e.data.data,h.value=!1}).catch(e=>{console.log("getCustomKpi",e.response),h.value=!1})};n.authToken&&_(i.value);const $=()=>{t.value={...t.value,title:"Add New KPI ",data:{},dialog:!0,loading:!1,type:v.params.type,action:"add",is_review:!1}},O=a=>{t.value={...t.value,title:"Edit KPI ",data:Object.assign({},a),loading:!1,dialog:!0,type:"kpi",action:"edit",is_review:!1}},E=async a=>{let e=Object.assign({},a);e=Object.assign(e,{type:v.params.type,profile_id:n.authProfile.id}),t.value.action=="add"&&(e.profile_ecode=n.authProfile.ecode),await K(n.authToken).post("/api/manager/my-custom-kpi/save",e).then(o=>{_(i.value).then(()=>{d.value={status:!0,type:"success",text:o.data.message},t.value={...t.value,dialog:!1,loading:!1}})}).catch(o=>{d.value={status:!0,type:"error",text:"Error while saving Custom KPI"},t.value={...t.value,loading:!1}})};B(i,(a,e)=>{a!=e&&(p.push({name:"PaginatedManagerCustomKPI",params:{page:i.value}}).catch(o=>{}),_(i.value))});const r=u({}),w=u({}),R=a=>{w.value=Object.assign({},a),r.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+a.title+".",btnColor:"error",btnTitle:"Confirm"}},j=async()=>{let a={profile_id:n.authProfile.id};await K(n.authToken).post("/api/manager/my-custom-kpi/remove/"+w.value.id,a).then(e=>{_(i.value).then(()=>{d.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{d.value={status:!0,type:"error",text:"Error while removing data"}})},N=a=>{r.value={...r.value,loading:!0},j().then(e=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(e=>{r.value={...r.value,loading:!1}})};return(a,e)=>(m(),x("div",te,[l(V,{class:"mb-3 rounded-lg",loading:h.value},{default:c(()=>[l(D,{class:"d-flex align-center"},{default:c(()=>[l(T,{size:"small",icon:"",onClick:$,color:"white",loading:f.value.loading,class:"text-capitalize mr-3"},{default:c(()=>[l(C,{icon:P(G)},null,8,["icon"])]),_:1},8,["loading"]),le]),_:1}),l(F,null,{default:c(()=>[se,s("tbody",null,[(m(!0),x(U,null,Q(g.value,o=>(m(),x("tr",{key:o.id},[s("td",null,I(o.title),1),s("td",null,I(o.industry&&o.industry.title),1),s("td",null,[s("div",oe,[l(C,{size:"small",onClick:()=>O(o),icon:P(H),class:"mx-1"},null,8,["onClick","icon"]),l(C,{size:"small",onClick:()=>R(o),icon:P(J),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),g.value&&g.value.length==0?(m(),k(V,{key:0},{default:c(()=>[l(Z,{class:"text-center"},{default:c(()=>[z(" No records found ")]),_:1})]),_:1})):b("",!0)]),_:1},8,["loading"]),y.value>1?(m(),k(q,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):b("",!0),l(W,{"kpi-options":t.value,onSave:E},null,8,["kpi-options"]),l(X,{options:r.value,onConfirm:N},null,8,["options"]),l(Y,{options:d.value},null,8,["options"])]))}},ne={class:"v-col-12"},ue=s("div",{class:"text-primary text-capitalize"},"ECD List",-1),re=s("thead",null,[s("tr",null,[s("th",{class:"text-left text-capitalize"},"Title"),s("th",{class:"text-left text-capitalize"},"ECD Type"),s("th",{class:"text-right text-capitalize"},"Actions")])],-1),ce={class:"d-flex align-center justify-end"},de={__name:"ManagerEcd",setup(M){const n=S(),d=u({}),p=L(),v=A(),t=u({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),f=u({data:{},loading:!1,dialog:!1}),g=u([]),h=u(!1),y=u(0),i=u(1);i.value=v.params&&v.params.page?v.params.page:1;const _=async a=>{h.value=!0,await K(n.authToken).get("/api/manager/custom/ecd/list/"+n.authProfile.ecode+"/?page="+a).then(e=>{y.value=e.data.last_page,i.value=e.data.current_page,g.value=e.data.data,h.value=!1}).catch(e=>{console.log("getCustomKpi",e),h.value=!1})};n.authToken&&_(i.value);const $=()=>{t.value={...t.value,title:"Add New KPI ",data:{},dialog:!0,loading:!1,type:"ecd",action:"add",is_review:!1}},O=a=>{t.value={...t.value,title:"Edit KPI ",data:Object.assign({},a),loading:!1,dialog:!0,type:"ecd",action:"edit",is_review:!1}},E=async a=>{let e=Object.assign({},a);e=Object.assign(e,{type:v.params.type,profile_id:n.authProfile.id}),t.value.action=="add"&&(e.profile_ecode=n.authProfile.ecode),await K(n.authToken).post("/api/manager/my-custom-kpi/save",e).then(o=>{_(i.value).then(()=>{d.value={status:!0,type:"success",text:o.data.message},t.value={...t.value,dialog:!1,loading:!1}})}).catch(o=>{d.value={status:!0,type:"error",text:"Error while saving Custom KPI"},t.value={...t.value,loading:!1}})};B(i,(a,e)=>{a!=e&&(p.push({name:"PaginatedManagerCustomKPI",params:{page:i.value}}).catch(o=>{}),_(i.value))});const r=u({}),w=u({}),R=a=>{w.value=Object.assign({},a),r.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+a.title+".",btnColor:"error",btnTitle:"Confirm"}},j=async()=>{let a={profile_id:n.authProfile.id};await K(n.authToken).post("/api/manager/my-custom-kpi/remove/"+w.value.id,a).then(e=>{_(i.value).then(()=>{d.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{d.value={status:!0,type:"error",text:"Error while removing data"}})},N=a=>{r.value={...r.value,loading:!0},j().then(e=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(e=>{r.value={...r.value,loading:!1}})};return(a,e)=>(m(),x("div",ne,[l(V,{class:"mb-3 rounded-lg",loading:h.value},{default:c(()=>[l(D,{class:"d-flex align-center"},{default:c(()=>[l(T,{size:"small",icon:"",onClick:$,color:"white",loading:f.value.loading,class:"text-capitalize mr-3"},{default:c(()=>[l(C,{icon:P(G)},null,8,["icon"])]),_:1},8,["loading"]),ue]),_:1}),l(F,null,{default:c(()=>[re,s("tbody",null,[(m(!0),x(U,null,Q(g.value,o=>(m(),x("tr",{key:o.id},[s("td",null,I(o.title),1),s("td",null,I(o.ecd_type),1),s("td",null,[s("div",ce,[l(C,{size:"small",onClick:()=>O(o),icon:P(H),class:"mx-1"},null,8,["onClick","icon"]),l(C,{size:"small",onClick:()=>R(o),icon:P(J),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),g.value&&g.value.length==0?(m(),k(V,{key:0},{default:c(()=>[l(Z,{class:"text-center"},{default:c(()=>[z(" No records found ")]),_:1})]),_:1})):b("",!0)]),_:1},8,["loading"]),y.value>1?(m(),k(q,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):b("",!0),l(W,{"kpi-options":t.value,onSave:E},null,8,["kpi-options"]),l(X,{options:r.value,onConfirm:N},null,8,["options"]),l(Y,{options:d.value},null,8,["options"])]))}},pe=s("div",{class:"v-col-12 pb-0"},[s("div",{class:"text-h6"},"My Custom KPI")],-1),ve={class:"v-col-12 pb-0"},xe={__name:"CustomKpi",setup(M){const n=L(),d=A(),p=u(d.params.type),v=t=>{p.value!==t&&(p.value=t,n.push({name:"ManagerCustomKPI",params:{type:p.value}}).catch(f=>{}))};return(t,f)=>(m(),k(ee,{class:"pb-16"},{default:c(()=>[l(ae,{class:"my-5"},{default:c(()=>[pe,s("div",ve,[l(T,{size:"x-large",color:`${p.value=="kpi"?"secondary":""}`,readonly:`${p.value=="kpi"}`,class:"px-12 mr-3",onClick:f[0]||(f[0]=()=>v("kpi"))},{default:c(()=>[z(" KPI ")]),_:1},8,["color","readonly"]),l(T,{size:"x-large",color:`${p.value=="ecd"?"secondary":""}`,readonly:`${p.value=="ecd"}`,class:"px-12",onClick:f[1]||(f[1]=()=>v("ecd"))},{default:c(()=>[z(" ECD ")]),_:1},8,["color","readonly"])]),p.value=="kpi"?(m(),k(ie,{key:0})):b("",!0),p.value=="ecd"?(m(),k(de,{key:1})):b("",!0)]),_:1})]),_:1}))}};export{xe as default};
