import{u as M,r as i,z as A,K as L,N as S,o as m,b as k,a as l,w as c,B as D,H as I,X as C,d as P,a2 as F,f as s,F as U,n as q,A as T,c as x,g as V,h as H,C as z,e as b,Q,V as ee,i as ae}from"./app-d9b04b83.js";import{c as K}from"./clientApi-7c6a6b1c.js";import{c as X,f as G,g as J}from"./mdi-7fd0807e.js";import{_ as W}from"./CustomKpiDialog-3c2eeeae.js";import{_ as Y}from"./ConfirmDialog-b39d2e16.js";import{_ as Z}from"./SnackBar-5a301b09.js";import"./industry-1a056ec5.js";const te={class:"v-col-12"},le=s("div",{class:"text-primary text-capitalize"},"KPI List",-1),se=s("thead",null,[s("tr",null,[s("th",{class:"text-left text-capitalize"},"Title"),s("th",{class:"text-left text-capitalize"},"Industry"),s("th",{class:"text-right text-capitalize"},"Actions")])],-1),oe={class:"d-flex align-center justify-end"},ne={__name:"ManagerKpi",setup(B){const u=M(),d=i({}),p=A(),v=L(),t=i({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),g=i({data:{},loading:!1,dialog:!1}),f=i([]),_=i(!1),y=i(0),n=i(1);n.value=v.params&&v.params.page?v.params.page:1;const h=async a=>{_.value=!0,await K(u.authToken).get("/api/manager/custom/kpi/list/"+u.authProfile.ecode+"/?page="+a).then(e=>{y.value=e.data.last_page,n.value=e.data.current_page,f.value=e.data.data,_.value=!1}).catch(e=>{console.log("getCustomKpi",e.response),_.value=!1})};h(n.value);const $=()=>{t.value={...t.value,title:"Add New KPI ",data:{},dialog:!0,loading:!1,type:v.params.type,action:"add",is_review:!1},console.log("addKPI",t.value)},O=a=>{t.value={...t.value,title:"Edit KPI ",data:Object.assign({},a),loading:!1,dialog:!0,type:"kpi",action:"edit",is_review:!1}},E=async a=>{let e=Object.assign({},a);e=Object.assign(e,{type:v.params.type,profile_id:u.authProfile.id}),t.value.action=="add"&&(e.profile_ecode=u.authProfile.ecode),await K(u.authToken).post("/api/manager/my-custom-kpi/save",e).then(o=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:o.data.message},t.value={...t.value,dialog:!1,loading:!1}})}).catch(o=>{d.value={status:!0,type:"error",text:"Error while saving Custom KPI"},t.value={...t.value,loading:!1}})};S(n,(a,e)=>{a!=e&&(p.push({name:"PaginatedManagerCustomKPI",params:{page:n.value}}).catch(o=>{}),h(n.value))});const r=i({}),w=i({}),R=a=>{w.value=Object.assign({},a),r.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+a.title+".",btnColor:"error",btnTitle:"Confirm"}},j=async()=>{let a={profile_id:u.authProfile.id};await K(u.authToken).post("/api/manager/my-custom-kpi/remove/"+w.value.id,a).then(e=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{d.value={status:!0,type:"error",text:"Error while removing data"}})},N=a=>{r.value={...r.value,loading:!0},j().then(e=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(e=>{r.value={...r.value,loading:!1}})};return(a,e)=>(m(),k("div",te,[l(V,{class:"mb-3 rounded-lg",loading:_.value},{default:c(()=>[l(D,{class:"d-flex align-center"},{default:c(()=>[l(I,{size:"small",icon:"",onClick:$,color:"white",loading:g.value.loading,class:"text-capitalize mr-3"},{default:c(()=>[l(C,{icon:P(X)},null,8,["icon"])]),_:1},8,["loading"]),le]),_:1}),l(F,null,{default:c(()=>[se,s("tbody",null,[(m(!0),k(U,null,q(f.value,o=>(m(),k("tr",{key:o.id},[s("td",null,T(o.title),1),s("td",null,T(o.industry&&o.industry.title),1),s("td",null,[s("div",oe,[l(C,{size:"small",onClick:()=>O(o),icon:P(G),class:"mx-1"},null,8,["onClick","icon"]),l(C,{size:"small",onClick:()=>R(o),icon:P(J),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),f.value&&f.value.length==0?(m(),x(V,{key:0},{default:c(()=>[l(H,{class:"text-center"},{default:c(()=>[z(" No records found ")]),_:1})]),_:1})):b("",!0)]),_:1},8,["loading"]),y.value>1?(m(),x(Q,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):b("",!0),l(W,{"kpi-options":t.value,onSave:E},null,8,["kpi-options"]),l(Y,{options:r.value,onConfirm:N},null,8,["options"]),l(Z,{options:d.value},null,8,["options"])]))}},ie={class:"v-col-12"},ue=s("div",{class:"text-primary text-capitalize"},"ECD List",-1),re=s("thead",null,[s("tr",null,[s("th",{class:"text-left text-capitalize"},"Title"),s("th",{class:"text-left text-capitalize"},"ECD Type"),s("th",{class:"text-right text-capitalize"},"Actions")])],-1),ce={class:"d-flex align-center justify-end"},de={__name:"ManagerEcd",setup(B){const u=M(),d=i({}),p=A(),v=L(),t=i({title:"",dialog:!1,data:{},type:"",action:"",is_review:!1}),g=i({data:{},loading:!1,dialog:!1}),f=i([]),_=i(!1),y=i(0),n=i(1);n.value=v.params&&v.params.page?v.params.page:1;const h=async a=>{_.value=!0,await K(u.authToken).get("/api/manager/custom/ecd/list/"+u.authProfile.ecode+"/?page="+a).then(e=>{y.value=e.data.last_page,n.value=e.data.current_page,f.value=e.data.data,_.value=!1}).catch(e=>{console.log("getCustomKpi",e),_.value=!1})};h(n.value);const $=()=>{t.value={...t.value,title:"Add New KPI ",data:{},dialog:!0,loading:!1,type:"ecd",action:"add",is_review:!1}},O=a=>{t.value={...t.value,title:"Edit KPI ",data:Object.assign({},a),loading:!1,dialog:!0,type:"ecd",action:"edit",is_review:!1}},E=async a=>{let e=Object.assign({},a);e=Object.assign(e,{type:v.params.type,profile_id:u.authProfile.id}),t.value.action=="add"&&(e.profile_ecode=u.authProfile.ecode),await K(u.authToken).post("/api/manager/my-custom-kpi/save",e).then(o=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:o.data.message},t.value={...t.value,dialog:!1,loading:!1}})}).catch(o=>{d.value={status:!0,type:"error",text:"Error while saving Custom KPI"},t.value={...t.value,loading:!1}})};S(n,(a,e)=>{a!=e&&(p.push({name:"PaginatedManagerCustomKPI",params:{page:n.value}}).catch(o=>{}),h(n.value))});const r=i({}),w=i({}),R=a=>{w.value=Object.assign({},a),r.value={dialog:!0,title:"Confirm Remove",text:"Please confirm that you want to remove "+a.title+".",btnColor:"error",btnTitle:"Confirm"}},j=async()=>{let a={profile_id:u.authProfile.id};await K(u.authToken).post("/api/manager/my-custom-kpi/remove/"+w.value.id,a).then(e=>{h(n.value).then(()=>{d.value={status:!0,type:"success",text:e.data.message}})}).catch(e=>{d.value={status:!0,type:"error",text:"Error while removing data"}})},N=a=>{r.value={...r.value,loading:!0},j().then(e=>{r.value={...r.value,dialog:!1,loading:!1}}).catch(e=>{r.value={...r.value,loading:!1}})};return(a,e)=>(m(),k("div",ie,[l(V,{class:"mb-3 rounded-lg",loading:_.value},{default:c(()=>[l(D,{class:"d-flex align-center"},{default:c(()=>[l(I,{size:"small",icon:"",onClick:$,color:"white",loading:g.value.loading,class:"text-capitalize mr-3"},{default:c(()=>[l(C,{icon:P(X)},null,8,["icon"])]),_:1},8,["loading"]),ue]),_:1}),l(F,null,{default:c(()=>[re,s("tbody",null,[(m(!0),k(U,null,q(f.value,o=>(m(),k("tr",{key:o.id},[s("td",null,T(o.title),1),s("td",null,T(o.ecd_type),1),s("td",null,[s("div",ce,[l(C,{size:"small",onClick:()=>O(o),icon:P(G),class:"mx-1"},null,8,["onClick","icon"]),l(C,{size:"small",onClick:()=>R(o),icon:P(J),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),f.value&&f.value.length==0?(m(),x(V,{key:0},{default:c(()=>[l(H,{class:"text-center"},{default:c(()=>[z(" No records found ")]),_:1})]),_:1})):b("",!0)]),_:1},8,["loading"]),y.value>1?(m(),x(Q,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),class:"my-4",length:y.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):b("",!0),l(W,{"kpi-options":t.value,onSave:E},null,8,["kpi-options"]),l(Y,{options:r.value,onConfirm:N},null,8,["options"]),l(Z,{options:d.value},null,8,["options"])]))}},pe=s("div",{class:"v-col-12 pb-0"},[s("div",{class:"text-h6"},"My Custom KPI")],-1),ve={class:"v-col-12 pb-0"},ke={__name:"CustomKpi",setup(B){const u=A(),d=L(),p=i(d.params.type),v=t=>{console.log("selectType",t),p.value!==t&&(console.log("selectType not equal",t),p.value=t,u.push({name:"ManagerCustomKPI",params:{type:p.value}}).catch(g=>{}))};return(t,g)=>(m(),x(ee,{class:"pb-16"},{default:c(()=>[l(ae,{class:"my-5"},{default:c(()=>[pe,s("div",ve,[l(I,{size:"x-large",color:`${p.value=="kpi"?"secondary":""}`,readonly:`${p.value=="kpi"}`,class:"px-12 mr-3",onClick:g[0]||(g[0]=()=>v("kpi"))},{default:c(()=>[z(" KPI ")]),_:1},8,["color","readonly"]),l(I,{size:"x-large",color:`${p.value=="ecd"?"secondary":""}`,readonly:`${p.value=="ecd"}`,class:"px-12",onClick:g[1]||(g[1]=()=>v("ecd"))},{default:c(()=>[z(" ECD ")]),_:1},8,["color","readonly"])]),p.value=="kpi"?(m(),x(ne,{key:0})):b("",!0),p.value=="ecd"?(m(),x(de,{key:1})):b("",!0)]),_:1})]),_:1}))}};export{ke as default};
