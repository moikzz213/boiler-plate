import{k as S,r as b,M as p,O as j,o as d,c as y,w,b as f,F as m,n as _,f as k,I as h,A as I,a5 as C,C as E,i as z}from"./app-1a8b7c6c.js";const B={class:"d-flex justify-center"},T={__name:"KpiProgress",props:{selectedEmployee:{type:Object,default:null},density:{type:String,default:""}},setup(P){const c=P,x=S(),u=b(c.selectedEmployee),o=p(()=>{let t=[{state:"setting",title:"KPI & Annual Target Setting",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"inreview",title:"In Review"},{status:"submitted",title:"Submitted"}]},{state:"midyear",title:"Mid Year Review & Revised Target Setting",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]},{state:"yearend",title:"Year End Review and Submission",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]}],e=[{state:"setting",title:"KPI & Probation Target Setting",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]},{state:"first_review",title:"First Probation Review",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]},{state:"final_review",title:"Final Probation Review",status:[{status:"open",title:"Open"},{status:"inprogress",title:"In Progress"},{status:"submitted",title:"Submitted"}]}];return u.value&&u.value.is_regular?t:e}),O=b(new Date),R=(t,e,r)=>{let a=0;if(t&&t.reviews&&t.reviews.length>0&&t.reviews[0].key_review.length>0){let i=t.reviews[0].state,l=t.reviews[0].status,n=o.value.findIndex(s=>s.state==i);if(t.status=="Inactive")return"bg-grey-darken-1";if(e<n)return"bg-grey-darken-1";if(e==n){if(a=o.value[e].status.findIndex(s=>s.status==l),a==r)return"bg-secondary text-white";if(r<a)return"bg-grey-darken-1"}}else if(t&&t.reviews&&t.reviews.length>0){let i=t.reviews[0].state,l=t.reviews[0].status;if(i!="setting")return"bg-grey-darken-1";if(t.status=="Inactive")return"bg-grey-darken-1";let n=o.value.findIndex(s=>s.state==i);if(e<n)return"bg-grey-darken-1";if(e==n){if(a=o.value[e].status.findIndex(s=>s.status==l),a==r)return"bg-secondary text-white";if(r<a)return"bg-grey-darken-1"}}else if(t&&t.length>0){let i=t[0].profile;if(i.status=="Inactive")return"bg-grey-darken-1";if(i&&i.is_regular==0){let l=o.value.findIndex(s=>s.state=="setting"),n=new Date(i.doj);if(n.setDate(n.getDate()+parseInt(t[0].probation_setting_allow_days)),n>=O.value&&e==l&&(a=o.value[e].status.findIndex(s=>s.status=="open"),a==r))return"bg-secondary text-white"}else{let l=t[0].state,n=t[0].status,s=o.value.findIndex(v=>v.state==l);if(l!="setting")return"bg-grey-darken-1";if(e<s)return"bg-grey-darken-1";if(e==s){if(a=o.value[e].status.findIndex(v=>v.status==n),a==r)return"bg-secondary text-white";if(r<a)return"bg-grey-darken-1"}}}return""},g=p(()=>x.filteredSetting(u.value.company_id)),D=p(()=>u.value==null||!u.value.reviews||u.value.reviews.length==0?[{state:g.value?g.value.state:null,status:g.value?g.value.status:null,probation_setting_allow_days:g.value?g.value.probation_kpi_setting:null,profile:u.value}]:u.value);return j(()=>c.selectedEmployee,t=>{u.value=Object.assign({},t)}),(t,e)=>(d(),y(z,{class:""},{default:w(()=>[(d(!0),f(m,null,_(o.value,(r,a)=>(d(),f("div",{key:r.title,class:"v-col-12 v-col-md-4"},[k("div",{class:h(`${c.density=="compact"?"text-caption":"text-body-1"} mb-1 text-center d-flex align-center justify-center`),style:{"line-height":"1.2em",height:"30px"}},I(r.title),3),k("div",B,[(d(!0),f(m,null,_(r.status,(i,l)=>(d(),y(C,{style:{margin:"0 1px","font-size":"10px"},key:i.status,size:`${c.density=="compact"?"x-small":"small"}`,class:h(`${R(D.value,a,l)}`)},{default:w(()=>[E(I(i.title),1)]),_:2},1032,["size","class"]))),128))])]))),128))]),_:1}))}};export{T as default};
