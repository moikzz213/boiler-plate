import{z as b,L as w,u as A,r as i,O as x,c as h,w as o,V as B,o as d,a as s,f as e,g as N,B as P,i as V,A as p,G as T,d as y,a2 as E,b as C,n as F,F as L,ai as j,C as k,e as U,R as I,aj as $,Y as D}from"./app-97ea0592.js";import{h as G,f as H}from"./mdi-7fd0807e.js";import{c as O}from"./clientApi-749dd067.js";import{_ as Y}from"./pageHeader-b762dc1f.js";const q={class:"v-col-12"},J={class:"v-col-12 v-col-md-6 text-primary text-capitalize"},K={class:"v-col-12 v-col-md-6"},M=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-capitalize"},"Username"),e("th",{class:"text-left text-capitalize"},"Email"),e("th",{class:"text-left text-capitalize"},"Role"),e("th",{class:"text-left text-capitalize"},"Status"),e("th",{class:"text-right text-capitalize"},"Actions")])],-1),Q={class:"d-flex align-center justify-end"},ta={__name:"Users",setup(W){const g=b(),v=w(),z=A(),n=i({loading:!1,data:[]}),f=i(0),_=i(0),r=i(v.params&&v.params.page?v.params.page:1),m=async(l,t)=>{let a="/api/admin/user/all?&filter[employee]="+l;a+="&page="+t,n.value.loading=!0,await O(z.authToken).get(a).then(c=>{f.value=c.data.last_page,r.value=c.data.current_page,_.value=c.data.total,n.value.data=c.data.data,n.value.loading=!1}).catch(c=>{n.value.loading=!1,console.log(c)})};x(r,(l,t)=>{l!=t&&(g.push({name:"PaginatedUsers",params:{page:r.value}}).catch(a=>{}),m(u.value,r.value))}),m(null,r.value);const u=i("");x(u,(l,t)=>{l!=t&&l.length>3&&m(u.value,1)});const R=()=>{m(null,1).then(()=>{u.value=""})},S=l=>{g.push({name:"EditUser",params:{ecode:l}}).catch(()=>{})};return(l,t)=>(d(),h(B,null,{default:o(()=>[s(Y,{title:"Users"}),s(V,{class:"mb-3"},{default:o(()=>[e("div",q,[s(N,{loading:n.value.loading},{default:o(()=>[s(P,{class:"pt-3"},{default:o(()=>[s(V,{class:"pa-0"},{default:o(()=>[e("div",J," Users "+p("("+_.value+")"),1),e("div",K,[s(T,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),label:"Search",variant:"outlined",density:"compact","hide-details":"","append-inner-icon":u.value!==""?y(G):null,"onClick:appendInner":R},null,8,["modelValue","append-inner-icon"])])]),_:1})]),_:1}),s(E,null,{default:o(()=>[M,e("tbody",null,[(d(!0),C(L,null,F(n.value.data,a=>(d(),C("tr",{key:a.id},[e("td",null,p(a.username),1),e("td",null,p(a.email),1),e("td",null,p(a.role=="app_admin"?"Super admin":a.role=="hr_admin"?"HR Admin":a.role),1),e("td",null,[s($,{class:"text-uppercase",size:"small",color:`${a.status.toLowerCase()=="active"?"success":"error"}`},{default:o(()=>[k(p(a.status),1)]),_:2},1032,["color"])]),e("td",null,[e("div",Q,[s(D,{size:"small",onClick:()=>S(a.ecode),icon:y(H),class:"mx-1"},null,8,["onClick","icon"])])])]))),128))])]),_:1}),n.value.data.length==0?(d(),h(j,{key:0,class:"pa-3 text-center w-100"},{default:o(()=>[k("No records found")]),_:1})):U("",!0)]),_:1},8,["loading"]),f.value>1?(d(),h(I,{key:0,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=a=>r.value=a),class:"my-4",length:f.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable"},null,8,["modelValue","length"])):U("",!0)])]),_:1})]),_:1}))}};export{ta as default};
