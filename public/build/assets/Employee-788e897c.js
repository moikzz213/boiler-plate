import{l as G,u as $,k as z,r as _,o as l,c as v,w as a,a as e,v as E,y as H,n as N,t as m,d as o,g as q,f as t,a2 as W,a0 as A,W as D,X as S,U as Q,x as X,aA as Z,Q as J,A as Y,b as w,E as ee,G as te,F as B,C as K,aB as ae,Z as se,e as V,aC as oe,aD as R,L as O,al as F,D as le,aE as ie,az as ne}from"./app-07292aad.js";import{l as re,n as de,o as ue,p as ce,q as T,r as pe,s as me,t as he,u as _e,v as ve,w as ge,x as fe,y as ye,z as xe,A as ke,B as Ce,C as Pe,D as we}from"./mdi-9c5e96e3.js";import{p as M}from"./printInitials-a54a9c4a.js";import{a as Se,b as Ve}from"./sacntumApi-c008e9b2.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";const be={class:"d-flex align-center pa-3"},Ae={class:"text-body-2"},Ie={class:"text-body-1"},Be={class:"text-caption"},De={class:"pa-3"},U={__name:"IconMenuAccount",props:{color:{type:String,default:"grey-darken-3"}},setup(I){const y=I,n=G(),u=$(),c=z(),p=_(!1),x=h=>{p.value=!1,c.push({path:h}).catch(d=>{})},g=_(!1),L=async()=>{let h={key:u.token};await axios.post("/client/removekey",h).then(()=>{u.logout().then(()=>{g.value=!1,c.push({path:"/login"}),localStorage.removeItem("authClient")})})},b=async()=>{let h={username:u.profile.ecode};return await Se.post("/api/sanctumlogout",h)},k=async()=>{g.value=!0,b().then(()=>{n.setPageLoading(!0,"logging out"),L().then(()=>{n.setPageLoading(!1,"logging out")})}).catch(h=>{g.value=!1,n.setPageLoading(!1,"logging out"),console.log("error while trying to logout to server",h)})};return(h,d)=>(l(),v(Q,{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=i=>p.value=i),"close-on-content-click":!1,location:"bottom"},{activator:a(({props:i})=>[e(E,H(i,{size:"36",icon:"",variant:"flat",color:y.color}),{default:a(()=>[N(m(o(M)(o(u).authProfile.display_name)),1)]),_:2},1040,["color"])]),default:a(()=>[e(q,{"min-width":"300",class:"rounded-lg mt-1"},{default:a(()=>[t("div",be,[e(W,{color:"grey-lighten-3",size:36,class:"d-flex align-center justify-center mr-3",style:{cursor:"pointer"}},{default:a(()=>[t("div",Ae,m(o(M)(o(u).authProfile.display_name)),1)]),_:1}),t("div",null,[t("div",Ie,m(o(u).authProfile.display_name),1),t("div",Be,m(o(u).authProfile.email),1)])]),e(A),e(D,{nav:"",density:"compact",class:"d-flex flex-column"},{default:a(()=>[e(S,{"prepend-icon":o(re),title:"Account Settings",onClick:d[0]||(d[0]=()=>x("/account"))},null,8,["prepend-icon"])]),_:1}),e(A),t("div",De,[e(E,{loading:g.value,onClick:k,width:"100%",color:"primary"},{default:a(()=>[N(" Logout ")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]))}};const Me={class:"d-flex flex-column h-100"},$e=["value"],ze={key:0},Ee={class:"bg-grey-darken-4",style:{"border-radius":"4px"}},Ne={style:{"font-size":"12px"}},Ke={class:"d-flex align-start py-3 px-3 w-100 h-100"},Re={class:"d-flex",style:{position:"relative"}},Oe={class:"pms-avatar-wrapper"},Fe={class:"d-flex align-start"},Te={class:"text-h4 text-primary"},Ue={class:"pl-3 pt-2",style:{height:"56px",overflow:"hidden","min-width":"600px","max-width":"600px",width:"100%"}},Ge={class:"text-body-2 text-capitalize"},He={class:"text-caption"},We={class:"d-flex"},je={class:"d-flex align-center"},qe={class:"ml-1 text-body-1 text-primary"},Qe={__name:"LoggedInLayout",setup(I){const y=_("Performance Management System"),n=_("http://127.0.0.1:8000/assets/images/fav.png"),u=_(["Home","Dashboard","Account","Teams","ManagerCustomKPI","PaginatedManagerCustomKPI","Employees","PaginatedEmployees","SingleEmployee","Reports"]),c=$(),p=z(),x=X(),g=_([{title:"Dashboard",icon:de,roles:["app_admin","normal","manager","hr_admin","hrbp"],path:"/dashboard"},{title:"Reports",icon:ue,roles:["app_admin","hr_admin","hrbp"],path:"/hr/reports"},{title:"Teams",icon:ce,roles:["app_admin","manager"],path:"/manager/teams"},{title:"My Custom KPI",icon:T,roles:["app_admin","manager"],path:"/manager/custom/kpi"},{title:"Employees",icon:pe,roles:["app_admin","hr_admin","hrbp"],path:"/hr/employees"},{title:"Reports",icon:me,roles:["app_admin","hr_admin","hrbp"],path:"/hr/reports"},{title:"Settings",icon:he,roles:["app_admin","hr_admin","hrbp"],path:"",subs:[{title:"PMS Settings",icon:_e,path:"/hr/settings/pms",roles:["app_admin","hr_admin","hrbp"]},{title:"Custom KPIs",icon:T,path:"/hr/custom/kpi",roles:["app_admin","hr_admin"]},{title:"KPIs",icon:ve,path:"/hr/master/kpi",roles:["app_admin","hr_admin"]},{title:"Industries",icon:ge,path:"/hr/industries",roles:["app_admin","hr_admin"]},{title:"Companies",icon:fe,path:"/hr/companies",roles:["app_admin","hr_admin"]},{title:"Notifications",icon:ye,path:"/admin/notifications",roles:["app_admin","hr_admin"]},{title:"Measures",icon:xe,path:"/hr/measures",roles:["app_admin","hr_admin"]},{title:"Weightage",icon:ke,path:"/hr/weightages",roles:["app_admin","hr_admin"]}]},{title:"User Settings",icon:Ce,path:"/admin/users",roles:["app_admin"]}]),L=P=>{let r=[];return r=P.filter(s=>c.authRole.includes(s)),r.length>0},b=P=>{h.value=!1,p.push({path:P}).catch(r=>{})},{mobile:k}=Z(),h=_(!1),d=_(!1),i=_(!0),C=_(!1);return J(k,async(P,r)=>{P==!0?(i.value=!1,C.value=!0):(i.value=!0,C.value=!1)}),Y(()=>{k.value==!0?(i.value=!1,C.value=!0):(i.value=!0,C.value=!1)}),(P,r)=>(l(),w("div",null,[e(oe,{rail:C.value==!0?!1:d.value,modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=s=>i.value=s),temporary:C.value,permanent:!C.value,class:"pt-4",color:"primary"},{default:a(()=>[t("div",Me,[e(S,{nav:"","prepend-avatar":n.value,class:"mb-3"},{default:a(()=>[ee(t("div",{class:"text-body-2",style:{width:"180px"}},m(y.value),513),[[te,!d.value]])]),_:1},8,["prepend-avatar"]),e(A),e(D,{nav:""},{default:a(()=>[(l(!0),w(B,null,K(g.value,s=>(l(),w("div",{key:s.title,value:s.title},[L(s.roles)==!0?(l(),w("div",ze,[s.subs?(l(),v(ae,{key:0,value:s.title},{activator:a(({props:f})=>[e(S,H({nav:""},f,{"prepend-icon":s.icon,title:s.title}),null,16,["prepend-icon","title"])]),default:a(()=>[t("div",Ee,[(l(!0),w(B,null,K(s.subs,(f,j)=>(l(),w(B,{key:j},[L(f.roles)==!0?(l(),v(S,{key:0,density:"compact",style:{"padding-left":"12px !important"},title:f.title,value:f.title,onClick:()=>b(f.path)},{title:a(()=>[t("div",Ne,m(f.title),1)]),prepend:a(()=>[e(se,{size:"16",icon:f.icon},null,8,["icon"])]),_:2},1032,["title","value","onClick"])):V("",!0)],64))),128))])]),_:2},1032,["value"])):(l(),v(S,{key:1,"prepend-icon":s.icon,title:s.title,value:s.title,onClick:()=>b(s.path)},null,8,["prepend-icon","title","value","onClick"]))])):V("",!0)],8,$e))),128))]),_:1}),e(A),o(k)?V("",!0):(l(),v(D,{key:0,nav:"",class:"mt-auto"},{default:a(()=>[e(S,{"prepend-icon":d.value==!1?o(Pe):o(we),title:"Collapse",onClick:r[0]||(r[0]=s=>d.value=!d.value)},null,8,["prepend-icon"])]),_:1}))])]),_:1},8,["rail","modelValue","temporary","permanent"]),u.value.includes(o(x).name)?(l(),v(F,{key:0,height:"100",color:"black",elevation:"0",style:{overflow:"visible"}},{default:a(()=>[t("div",Ke,[t("div",Re,[o(k)==!0?(l(),v(R,{key:0,onClick:r[2]||(r[2]=s=>i.value=!i.value),size:"small"})):V("",!0),t("div",Oe,[t("div",Fe,[e(W,{color:"grey-lighten-1",size:"90"},{default:a(()=>[t("div",Te,m(o(M)(o(c).authProfile.display_name)),1)]),_:1}),t("div",Ue,[t("div",Ge,m(o(c).authProfile.display_name)+" "+m(o(c).authProfile.ecode?" - "+o(c).authProfile.ecode:""),1),t("div",He,m(o(c).authProfile.email),1)])])])]),e(O),t("div",We,[e(U)])])]),_:1})):(l(),v(F,{key:1,density:"compact",color:"white",elevation:"0"},{prepend:a(()=>[t("div",je,[o(k)==!0?(l(),v(R,{key:0,onClick:r[3]||(r[3]=s=>i.value=!i.value),size:"small"})):V("",!0),t("div",qe,m(y.value),1)])]),default:a(()=>[e(O),e(U,{color:"grey-lighten-3"})]),_:1})),e(ie,null,{default:a(()=>[le(P.$slots,"default",{},void 0,!0)]),_:3})]))}},Xe=Le(Qe,[["__scopeId","data-v-78f43fd6"]]),at={__name:"Employee",setup(I){const y=$(),n=G(),u=z(),c=async()=>{n.setPageLoading(!0),await Ve(y.authToken).get("/api/checkuser").then(p=>{y.saveClientKey(p.data).then(x=>{n.setPageLoading(!1),n.setIsFromLogin(!1),n.setPmsSettings(x.data.pms_settings),n.setAllSettings(x.data.all_settings)})}).catch(p=>{console.log("error",p.response.status),p.response.status==401&&(localStorage.removeItem("authClient"),u.push({path:"/login"})),n.setPageLoading(!1)})};return n.isFromLogin==!1&&c(),(p,x)=>{const g=ne("router-view");return l(),w("div",null,[e(Xe,null,{default:a(()=>[e(g)]),_:1})])}}};export{at as default};
