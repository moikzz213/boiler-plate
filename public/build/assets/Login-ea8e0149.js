import{k as L,l as P,r as i,u as S,c as C,w as s,o as b,f as p,a,t as h,m as k,n as c,h as E,p as B,q as K,s as v,v as w,g as N}from"./app-14f820c7.js";import{a as T}from"./sacntumApi-3ebc14a4.js";import{G as q,W as A}from"./WhiteLogo-2cb70b6d.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"mx-auto px-3 text-center",style:{"z-index":"1","max-width":"400px",width:"100%","margin-top":"100px"}},I={class:"text-subtitle-1 text-white"},U={class:"text-error mt-2"},R={__name:"Login",setup(G){const u=L(),o=P(),x=i("Performance Management System"),_=i("performance-management-system"),m=S();m.authIsLoggedIn==!0&&u.push({path:"/dashboard"});const l=i(!1),t=i({login:"",password:"",url:_.value}),d=i(!1),g=i(""),f=async()=>{l.value=!0,V().then(r=>{o.setPageLoading(!0,"logging in");let e="/dashboard";m.saveClientKey(r.data).then(n=>{l.value=!1,o.setPmsSettings(n.data.pms_settings),o.setAllSettings(n.data.all_settings),u.push({path:e}),o.setPageLoading(!1,"logging in")}).catch(()=>{l.value=!1,o.setPageLoading(!1,"logging in")})}).catch(r=>{d.value=!0,g.value="Enter Username and Password...",l.value=!1,console.log("error while trying to login to server",r)})},y=()=>{u.push({path:"reset-password"})},V=async()=>{let r={username:t.value.login,password:t.value.password,url:t.value.url};const e=await T.post("/api/sanctumlogin",r);return e.data.status==!1?(d.value=!0,g.value=e.data.message,l.value=!1,!1):e};return o.setIsFromLogin(!0),(r,e)=>(b(),C(q,null,{default:s(()=>[p("div",F,[a(A,{width:"100%"}),p("div",I,h(x.value),1)]),a(N,{class:"mt-8 pa-3 rounded-lg elevation-3",width:"90%","max-width":"450"},{default:s(()=>[a(k,{class:"px-5 pb-0 primary--text"},{default:s(()=>[c("Login")]),_:1}),a(E,{class:"py-4"},{default:s(()=>[a(B,{autocomplete:"off",ref:"form",onKeydown:K(f,["enter"])},{default:s(()=>[a(v,{modelValue:t.value.login,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.login=n),variant:"outlined",required:"",class:"border-radius",autocomplete:"off",label:"Enter Employee Code"},null,8,["modelValue"]),a(v,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n),variant:"outlined",required:"",autocomplete:"off",label:"Enter Password",type:"password"},null,8,["modelValue"]),a(w,{onClick:f,width:"100%",color:"primary",height:"55",large:"",loading:l.value},{default:s(()=>[c("Login")]),_:1},8,["loading"]),a(w,{variant:"text",class:"mt-3",onClick:y},{default:s(()=>[c("Reset Password")]),_:1}),p("div",U,h(d.value==!0?g.value:""),1)]),_:1},8,["onKeydown"])]),_:1})]),_:1})]),_:1}))}};export{R as default};
